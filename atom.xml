<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ChangingFond</title>
  
  <subtitle>æ´»ç€ï¼ŒåŠªåŠ›ç€ï¼Œå¹¶æ”¶è·ç€å¿«ä¹</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.fcj.one/"/>
  <updated>2022-04-29T07:03:48.309Z</updated>
  <id>http://blog.fcj.one/</id>
  
  <author>
    <name>ChangingFond</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Guava æºç é˜…è¯»ç³»åˆ—â€”â€”Primitives Ints ç±»</title>
    <link href="http://blog.fcj.one/guava-primitives-Ints.html"/>
    <id>http://blog.fcj.one/guava-primitives-Ints.html</id>
    <published>2022-03-03T20:15:50.000Z</published>
    <updated>2022-04-29T07:03:48.309Z</updated>
    
    <content type="html"><![CDATA[<p><code>Ints</code> ç±»ä½œä¸º Guava å¯¹ Java åŸºæœ¬æ•°æ®ç±»å‹ <code>int</code> çš„å·¥å…·ç±»å°è£…ã€‚</p><span id="more"></span><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><h3 id="BYTES"><a href="#BYTES" class="headerlink" title="BYTES"></a>BYTES</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ Java 8 ä¸­å¯ä»¥è¢« Integer.BYTES æ›¿ä»£ï¼Œä»£è¡¨å­—èŠ‚æ•° bytes</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">BYTES</span> <span class="operator">=</span> Integer.SIZE / Byte.SIZE;</span><br></pre></td></tr></table></figure><h3 id="MAX-POWER-OF-TWO"><a href="#MAX-POWER-OF-TWO" class="headerlink" title="MAX_POWER_OF_TWO"></a>MAX_POWER_OF_TWO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// int æœ€å¤§å­˜å‚¨å€¼ï¼Œä½¿ç”¨ 1&lt;&lt;(Integer.SIZE-2) è®¡ç®—å¾—åˆ°ï¼Œ2æ˜¯å› ä¸ºä¸€ä½ä»£è¡¨æ­£è´Ÿï¼Œ1åŒæ—¶å ä¸€ä½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_POWER_OF_TWO</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; (Integer.SIZE - <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h2><h3 id="public-static-int-hasCode-int"><a href="#public-static-int-hasCode-int" class="headerlink" title="public static int hasCode(int)"></a>public static int hasCode(int)</h3><p>è®¡ç®—ä¼ å…¥ int å€¼çš„ hashcodeã€‚ä¸ JDK 8 ä¸­ <code>Integer.hashCode(int)</code> ä¸€æ ·ï¼Œç›´æ¥è¿”å›æ•°å€¼æœ¬èº«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-checkedCast-long"><a href="#public-static-int-checkedCast-long" class="headerlink" title="public static int checkedCast(long)"></a>public static int checkedCast(long)</h3><p>å°† long å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º intã€‚<br>å½“ä¼ å…¥å‚æ•°è¶…å‡º int çš„å–å€¼èŒƒå›´ [2^31-1, -2^31] æ—¶ï¼ŒæŠ›å‡º <code>IllegalArgumentException</code> å¼‚å¸¸ï¼Œå¦åˆ™è¿”å›å‚æ•°æœ¬èº«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">checkedCast</span><span class="params">(<span class="type">long</span> value)</span> &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> (<span class="type">int</span>) value;</span><br><span class="line">  checkArgument(result == value, <span class="string">&quot;Out of range: %s&quot;</span>, value);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-saturatedCast-long"><a href="#public-static-int-saturatedCast-long" class="headerlink" title="public static int saturatedCast(long)"></a>public static int saturatedCast(long)</h3><p>å°† long è½¬æ¢æˆ int èŒƒå›´å†…çš„å€¼ã€‚<br>ä¸ <code>checkedCast</code> ä¸åŒçš„æ˜¯ï¼Œå½“ä¼ å…¥å‚æ•°å¤§äº int æœ€å¤§å€¼æˆ–å°äº int æœ€å°å€¼ï¼Œç›´æ¥è¿”å›æœ€å¤§å€¼æˆ–æœ€å¤§å€¼ï¼Œè€Œä¸æ˜¯æŠ›å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">saturatedCast</span><span class="params">(<span class="type">long</span> value)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (value &gt; Integer.MAX_VALUE) &#123;</span><br><span class="line">    <span class="keyword">return</span> Integer.MAX_VALUE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (value &lt; Integer.MIN_VALUE) &#123;</span><br><span class="line">    <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (<span class="type">int</span>) value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-compare-int-int"><a href="#public-static-int-compare-int-int" class="headerlink" title="public static int compare(int, int)`"></a>public static int compare(int, int)`</h3><p>æ¯”è¾ƒä¸¤ä¸ª int å€¼çš„å¤§å°ï¼Œç­‰ä»·äº <code>((Integer) a).compareTo(b)</code>ã€‚è¿”å›å€¼åˆ†ä¸ºä¸‰ç§æƒ…å†µ: a å°äº/ç­‰äº/å¤§äº b æ—¶åˆ†åˆ«è¿”å› -1/0/1ã€‚<br>æ³¨ï¼šJDK 7 åŠä»¥åå»ºè®®ä½¿ç”¨ <code>Integer.compar(int, int)</code> è€Œéæ­¤æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (a &lt; b) ? -<span class="number">1</span> : ((a &gt; b) ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-boolean-contains-int-int"><a href="#public-static-boolean-contains-int-int" class="headerlink" title="public static boolean contains(int[], int)`"></a>public static boolean contains(int[], int)`</h3><p>åˆ¤æ–­ç»™å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> value : array) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value == target) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-indexOf-int-int"><a href="#public-static-int-indexOf-int-int" class="headerlink" title="public static int indexOf(int[], int)`"></a>public static int indexOf(int[], int)`</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> indexOf(array, target, <span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="private-static-int-indexOf-int-int-int-int"><a href="#private-static-int-indexOf-int-int-int-int" class="headerlink" title="private static int indexOf(int[], int, int, int)"></a>private static int indexOf(int[], int, int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> target, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; end; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] == target) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-indexOf-int-int-1"><a href="#public-static-int-indexOf-int-int-1" class="headerlink" title="public static int indexOf(int[], int[])"></a>public static int indexOf(int[], int[])</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span>[] target)</span> &#123;</span><br><span class="line">  checkNotNull(array, <span class="string">&quot;array&quot;</span>);</span><br><span class="line">  checkNotNull(target, <span class="string">&quot;target&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (target.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  outer:</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length - target.length + <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; target.length; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (array[i + j] != target[j]) &#123;</span><br><span class="line">        <span class="keyword">continue</span> outer;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-int-lastIndexOf-int-int"><a href="#public-int-lastIndexOf-int-int" class="headerlink" title="public int lastIndexOf(int[], int)"></a>public int lastIndexOf(int[], int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> lastIndexOf(array, target, <span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="private-int-lastIndexOf-int-int-int-int"><a href="#private-int-lastIndexOf-int-int-int-int" class="headerlink" title="private int lastIndexOf(int[], int, int, int)"></a>private int lastIndexOf(int[], int, int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> target, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> end - <span class="number">1</span>; i &gt;= start; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] == target) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-min-intâ€¦"><a href="#public-static-int-min-intâ€¦" class="headerlink" title="public static int min(intâ€¦)"></a>public static int min(intâ€¦)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">min</span><span class="params">(<span class="type">int</span>... array)</span> &#123;</span><br><span class="line">  checkArgument(array.length &gt; <span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] &lt; min) &#123;</span><br><span class="line">      min = array[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-max-intâ€¦"><a href="#public-static-int-max-intâ€¦" class="headerlink" title="public static int max(intâ€¦)"></a>public static int max(intâ€¦)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span>... array)</span> &#123;</span><br><span class="line">  checkArgument(array.length &gt; <span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (array[i] &gt; max) &#123;</span><br><span class="line">      max = array[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-constrainToRange-int-int-int"><a href="#public-static-int-constrainToRange-int-int-int" class="headerlink" title="public static int constrainToRange(int, int, int)"></a>public static int constrainToRange(int, int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">constrainToRange</span><span class="params">(<span class="type">int</span> value, <span class="type">int</span> min, <span class="type">int</span> max)</span> &#123;</span><br><span class="line">  checkArgument(min &lt;= max, <span class="string">&quot;min (%s) must be less than or equal to max (%s)&quot;</span>, min, max);</span><br><span class="line">  <span class="keyword">return</span> Math.min(Math.max(value, min), max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-concat-int-â€¦"><a href="#public-static-int-concat-int-â€¦" class="headerlink" title="public static int[] concat(int[]â€¦)"></a>public static int[] concat(int[]â€¦)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] concat(<span class="type">int</span>[]... arrays) &#123;</span><br><span class="line">  <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span>[] array : arrays) &#123;</span><br><span class="line">    length += array.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[length];</span><br><span class="line">  <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span>[] array : arrays) &#123;</span><br><span class="line">    System.arraycopy(array, <span class="number">0</span>, result, pos, array.length);</span><br><span class="line">    pos += array.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-byte-toByteArray-int"><a href="#public-static-byte-toByteArray-int" class="headerlink" title="public static byte[] toByteArray(int)"></a>public static byte[] toByteArray(int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] toByteArray(<span class="type">int</span> value) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">byte</span>[] &#123;</span><br><span class="line">    (<span class="type">byte</span>) (value &gt;&gt; <span class="number">24</span>), (<span class="type">byte</span>) (value &gt;&gt; <span class="number">16</span>), (<span class="type">byte</span>) (value &gt;&gt; <span class="number">8</span>), (<span class="type">byte</span>) value</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-fromByteArray-byte"><a href="#public-static-int-fromByteArray-byte" class="headerlink" title="public static int fromByteArray(byte[])"></a>public static int fromByteArray(byte[])</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fromByteArray</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">  checkArgument(bytes.length &gt;= BYTES, <span class="string">&quot;array too small: %s &lt; %s&quot;</span>, bytes.length, BYTES);</span><br><span class="line">  <span class="keyword">return</span> fromBytes(bytes[<span class="number">0</span>], bytes[<span class="number">1</span>], bytes[<span class="number">2</span>], bytes[<span class="number">3</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-fromBytes-byte-byte-byte-byte"><a href="#public-static-int-fromBytes-byte-byte-byte-byte" class="headerlink" title="public static int fromBytes(byte, byte, byte, byte)"></a>public static int fromBytes(byte, byte, byte, byte)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fromBytes</span><span class="params">(<span class="type">byte</span> b1, <span class="type">byte</span> b2, <span class="type">byte</span> b3, <span class="type">byte</span> b4)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> b1 &lt;&lt; <span class="number">24</span> | (b2 &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">16</span> | (b3 &amp; <span class="number">0xFF</span>) &lt;&lt; <span class="number">8</span> | (b4 &amp; <span class="number">0xFF</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-Converter-lt-String-Integer-gt-stringConverter"><a href="#public-static-Converter-lt-String-Integer-gt-stringConverter" class="headerlink" title="public static Converter&lt;String, Integer&gt; stringConverter()"></a>public static Converter&lt;String, Integer&gt; stringConverter()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Converter&lt;String, Integer&gt; <span class="title function_">stringConverter</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> IntConverter.INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-ensureCapacity-int-int-int"><a href="#public-static-int-ensureCapacity-int-int-int" class="headerlink" title="public static int[] ensureCapacity(int[], int, int)"></a>public static int[] ensureCapacity(int[], int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] ensureCapacity(<span class="type">int</span>[] array, <span class="type">int</span> minLength, <span class="type">int</span> padding) &#123;</span><br><span class="line">  checkArgument(minLength &gt;= <span class="number">0</span>, <span class="string">&quot;Invalid minLength: %s&quot;</span>, minLength);</span><br><span class="line">  checkArgument(padding &gt;= <span class="number">0</span>, <span class="string">&quot;Invalid padding: %s&quot;</span>, padding);</span><br><span class="line">  <span class="keyword">return</span> (array.length &lt; minLength) ? Arrays.copyOf(array, minLength + padding) : array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-String-join-String-intâ€¦"><a href="#public-static-String-join-String-intâ€¦" class="headerlink" title="public static String join(String, intâ€¦)"></a>public static String join(String, intâ€¦)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">join</span><span class="params">(String separator, <span class="type">int</span>... array)</span> &#123;</span><br><span class="line">  checkNotNull(separator);</span><br><span class="line">  <span class="keyword">if</span> (array.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// For pre-sizing a builder, just get the right order of magnitude</span></span><br><span class="line">  <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(array.length * <span class="number">5</span>);</span><br><span class="line">  builder.append(array[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">    builder.append(separator).append(array[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> builder.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-void-sortDescending-int"><a href="#public-static-void-sortDescending-int" class="headerlink" title="public static void sortDescending(int[])"></a>public static void sortDescending(int[])</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Sorts the elements of &#123;<span class="doctag">@code</span> array&#125; in descending order.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@since</span> 23.1</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sortDescending</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">  checkNotNull(array);</span><br><span class="line">  sortDescending(array, <span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-void-sortDescending-int-int-int"><a href="#public-static-void-sortDescending-int-int-int" class="headerlink" title="public static void sortDescending(int[], int, int)"></a>public static void sortDescending(int[], int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sortDescending</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> fromIndex, <span class="type">int</span> toIndex)</span> &#123;</span><br><span class="line">  checkNotNull(array);</span><br><span class="line">  checkPositionIndexes(fromIndex, toIndex, array.length);</span><br><span class="line">  Arrays.sort(array, fromIndex, toIndex);</span><br><span class="line">  reverse(array, fromIndex, toIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-void-reverse-int"><a href="#public-static-void-reverse-int" class="headerlink" title="public static void reverse(int[])"></a>public static void reverse(int[])</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">  checkNotNull(array);</span><br><span class="line">  reverse(array, <span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-void-reverse-int-int-int"><a href="#public-static-void-reverse-int-int-int" class="headerlink" title="public static void reverse(int[], int, int)"></a>public static void reverse(int[], int, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> fromIndex, <span class="type">int</span> toIndex)</span> &#123;</span><br><span class="line">  checkNotNull(array);</span><br><span class="line">  checkPositionIndexes(fromIndex, toIndex, array.length);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> fromIndex, j = toIndex - <span class="number">1</span>; i &lt; j; i++, j--) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> array[i];</span><br><span class="line">    array[i] = array[j];</span><br><span class="line">    array[j] = tmp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-int-toArray-Collection-lt-extends-Number-gt"><a href="#public-static-int-toArray-Collection-lt-extends-Number-gt" class="headerlink" title="public static int[] toArray(Collection&lt;? extends Number&gt;)"></a>public static int[] toArray(Collection&lt;? extends Number&gt;)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] toArray(Collection&lt;? <span class="keyword">extends</span> <span class="title class_">Number</span>&gt; collection) &#123;</span><br><span class="line">  <span class="keyword">if</span> (collection <span class="keyword">instanceof</span> IntArrayAsList) &#123;</span><br><span class="line">    <span class="keyword">return</span> ((IntArrayAsList) collection).toIntArray();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Object[] boxedArray = collection.toArray();</span><br><span class="line">  <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> boxedArray.length;</span><br><span class="line">  <span class="type">int</span>[] array = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// checkNotNull for GWT (do not optimize)</span></span><br><span class="line">    array[i] = ((Number) checkNotNull(boxedArray[i])).intValue();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-List-asList-intâ€¦"><a href="#public-static-List-asList-intâ€¦" class="headerlink" title="public static List asList(intâ€¦)"></a>public static List<Integer> asList(intâ€¦)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">asList</span><span class="params">(<span class="type">int</span>... backingArray)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (backingArray.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IntArrayAsList</span>(backingArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-Integer-tryParse-String"><a href="#public-static-Integer-tryParse-String" class="headerlink" title="public static Integer tryParse(String)"></a>public static Integer tryParse(String)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">tryParse</span><span class="params">(String string)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> tryParse(string, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="public-static-Integer-tryParse-String-int"><a href="#public-static-Integer-tryParse-String-int" class="headerlink" title="public static Integer tryParse(String, int)"></a>public static Integer tryParse(String, int)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">tryParse</span><span class="params">(String string, <span class="type">int</span> radix)</span> &#123;</span><br><span class="line">  <span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> Longs.tryParse(string, radix);</span><br><span class="line">  <span class="keyword">if</span> (result == <span class="literal">null</span> || result.longValue() != result.intValue()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> result.intValue();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h2><h3 id="class-IntConverter-extends-Converter-lt-String-Integer-gt-implements-Serializable"><a href="#class-IntConverter-extends-Converter-lt-String-Integer-gt-implements-Serializable" class="headerlink" title="class IntConverter extends Converter&lt;String, Integer&gt; implements Serializable"></a>class IntConverter extends Converter&lt;String, Integer&gt; implements Serializable</h3><h3 id="enum-LexicographicalComparator-implements-Comparator-lt-int-gt"><a href="#enum-LexicographicalComparator-implements-Comparator-lt-int-gt" class="headerlink" title="enum LexicographicalComparator implements Comparator&lt;int[]&gt;"></a>enum LexicographicalComparator implements Comparator&lt;int[]&gt;</h3><h3 id="class-IntArrayAsList-extends-AbstractListimplements-RandomAccess-Serializable"><a href="#class-IntArrayAsList-extends-AbstractListimplements-RandomAccess-Serializable" class="headerlink" title="class IntArrayAsList extends AbstractListimplements RandomAccess, Serializable"></a>class IntArrayAsList extends AbstractList<Integer>implements RandomAccess, Serializable</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Ints&lt;/code&gt; ç±»ä½œä¸º Guava å¯¹ Java åŸºæœ¬æ•°æ®ç±»å‹ &lt;code&gt;int&lt;/code&gt; çš„å·¥å…·ç±»å°è£…ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æºç é˜…è¯»" scheme="http://blog.fcj.one/categories/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
    
      <category term="Guava" scheme="http://blog.fcj.one/categories/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Guava/"/>
    
    
      <category term="Guava" scheme="http://blog.fcj.one/tags/Guava/"/>
    
  </entry>
  
  <entry>
    <title>Mockito 3.6.0 ä¸­æ–‡æ–‡æ¡£</title>
    <link href="http://blog.fcj.one/mockito-zh-doc.html"/>
    <id>http://blog.fcj.one/mockito-zh-doc.html</id>
    <published>2020-10-28T23:32:43.000Z</published>
    <updated>2022-04-29T07:03:48.312Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://mockito.org/">Mockito</a> åº“èƒ½å¤Ÿ Mock å¯¹è±¡ã€éªŒè¯ç»“æœä»¥åŠæ‰“æ¡©(stubbing)ã€‚<br>æœ¬ä¸­æ–‡æ–‡æ¡£åŸºäº Mockito 3.6.0 ç‰ˆæœ¬çš„<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html">å®˜æ–¹æ–‡æ¡£</a>ç¿»è¯‘ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ‘ã€‚</p><span id="more"></span><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol start="0"><li><a href="#0">è¿ç§»åˆ°Mockito 2.0</a></li><li><a href="#1">éªŒè¯æŸäº›è¡Œä¸º</a></li><li><a href="#2">å¦‚ä½•åšä¸€äº›æµ‹è¯•æ¡© (Stub)</a></li><li><a href="#3">å‚æ•°åŒ¹é…å™¨ (matchers)</a></li><li><a href="#4">éªŒè¯å‡½æ•°çš„ç¡®åˆ‡ã€æœ€å°‘ã€ä»æœªè°ƒç”¨æ¬¡æ•°</a></li><li><a href="#5">ä¸ºè¿”å›å€¼ä¸ºvoidçš„å‡½æ•°é€šè¿‡StubæŠ›å‡ºå¼‚å¸¸</a></li><li><a href="#6">æŒ‰ç…§é¡ºåºéªŒè¯æ‰§è¡Œç»“æœ</a></li><li><a href="#7">ç¡®ä¿äº¤äº’(interaction)æ“ä½œä¸ä¼šæ‰§è¡Œåœ¨mockå¯¹è±¡ä¸Š</a></li><li><a href="#8">æŸ¥æ‰¾å†—ä½™çš„è°ƒç”¨</a></li><li><a href="#9">ç®€åŒ–mockå¯¹è±¡çš„åˆ›å»º</a></li><li><a href="#10">ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡© (stub) </a></li><li><a href="#11">ä¸ºå›è°ƒåšæµ‹è¯•æ¡©</a></li><li><a href="#12">doReturn()ã€doThrow()ã€doAnswer()ã€doNothing()ã€doCallRealMethod()ç³»åˆ—æ–¹æ³•çš„è¿ç”¨</a></li><li><a href="#13">ç›‘æ§çœŸå®å¯¹è±¡</a></li><li><a href="#14">ä¿®æ”¹æ²¡æœ‰æµ‹è¯•æ¡©çš„è°ƒç”¨çš„é»˜è®¤è¿”å›å€¼ ( 1.7ç‰ˆæœ¬ä¹‹å ) </a></li><li><a href="#15">ä¸ºä¸‹ä¸€æ­¥çš„æ–­è¨€æ•è·å‚æ•° (1.8ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#16">çœŸå®çš„å±€éƒ¨mocks (1.8ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#17">é‡ç½®mockså¯¹è±¡ (1.8ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#18">æ•…éšœæ’æŸ¥ä¸éªŒè¯æ¡†æ¶çš„ä½¿ç”¨ (1.8ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#19">è¡Œä¸ºé©±åŠ¨å¼€å‘çš„åˆ«å (1.8ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#20">åºåˆ—åŒ–mockå¯¹è±¡</a></li><li><a href="#21">æ–°çš„æ³¨è§£ : @Captor,@Spy,@ InjectMocks (1.8.3ç‰ˆæœ¬ä¹‹å) </a></li><li><a href="#22">éªŒè¯è¶…æ—¶ (1.8.5ç‰ˆæœ¬ä¹‹å) </a></li><li><a href="#23">è‡ªåŠ¨åˆå§‹åŒ–è¢«@Spies, @InjectMocksæ³¨è§£çš„å­—æ®µä»¥åŠæ„é€ å‡½æ•°æ³¨å…¥ (1.9.0ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#24">å•è¡Œæµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å) </a></li><li><a href="#25">éªŒè¯è¢«å¿½ç•¥çš„æµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#26">mockè¯¦æƒ… (1.9.5ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#27">delegateè°ƒç”¨çœŸå®çš„å®ä¾‹ (1.9.5ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#28">MockMaker API (1.9.5ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#29">BDDé£æ ¼çš„éªŒè¯ (1.10.0ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#30">è¿½è¸ªæˆ–è€…MockæŠ½è±¡ç±» (1.10.12ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#31">Mockito mockå¯¹è±¡é€šè¿‡ClassLoaderèƒ½è¢«åºåˆ—åŒ–/ååºåˆ—åŒ– (1.10.0ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#32">deep stubsæ›´å¥½çš„æ”¯æŒæ³›å‹ (1.10.0ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#33">Mockito JUnit è§„åˆ™ (1.10.17ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#34">å¼€/å…³æ’ä»¶ (1.10.15ç‰ˆæœ¬ä¹‹å)</a></li><li><a href="#35">è‡ªå®šä¹‰éªŒè¯å¤±è´¥æ¶ˆæ¯ (2.0.0ç‰ˆæœ¬ä¹‹å)</a></li></ol><h2 id="0-è¿ç§»åˆ°-Mockito-2-0"><a href="#0-è¿ç§»åˆ°-Mockito-2-0" class="headerlink" title="0. è¿ç§»åˆ° Mockito 2.0"></a>0. è¿ç§»åˆ° Mockito 2.0</h2><p>ä¸ºäº†æŒç»­æå‡ Mockito ä»¥åŠæ›´è¿›ä¸€æ­¥çš„æå‡å•å…ƒæµ‹è¯•ä½“éªŒï¼Œæˆ‘ä»¬å¸Œæœ›ä½ å‡çº§åˆ° Mockito 2.1.0ã€‚Mockito éµå¾ªè¯­æ„åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œé™¤éæœ‰éå¸¸å¤§çš„æ”¹å˜æ‰ä¼šå˜åŒ–ä¸»ç‰ˆæœ¬å·ã€‚åœ¨ä¸€ä¸ªåº“çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¸ºäº†å¼•å…¥ä¸€ç³»åˆ—æœ‰ç”¨çš„ç‰¹æ€§ï¼Œä¿®æ”¹å·²å­˜åœ¨çš„è¡Œä¸ºæˆ–è€… API ç­‰é‡å¤§å˜æ›´æ˜¯åœ¨æ‰€éš¾å…çš„ã€‚æœ‰å…³æ–°ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬ä¸å…¼å®¹çš„æ›´æ”¹ï¼‰çš„å…¨é¢æŒ‡å—ï¼Œè¯·å‚é˜…â€Mockito 2â€ <a href="https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2">wiki é¡µé¢</a>ä¸­çš„ â€œWhatâ€™s new in Mockito 2â€ã€‚æˆ‘ä»¬å¸Œæœ›ä½ èƒ½å¤Ÿå–œæ¬¢ Mockito 2.0!</p><p>0.1. Mockito Android support<br>With Mockito version 2.6.1 we ship â€œnativeâ€ Android support. To enable Android support, add the <code>mockito-android</code> library as dependency to your project. This artifact is published to the same Mockito organization and can be imported for Android as follows: You can continue to run the same unit tests on a regular VM by using the <code>mockito-core</code> artifact in your â€œtestCompileâ€ scope as shown above. Be aware that you cannot use the inline mock maker on Android due to limitations in the Android VM. If you encounter issues with mocking on Android, please open an issue on the official issue tracker. Do provide the version of Android you are working on and dependencies of your project.</p><p>0.2. Configuration-free inline mock making<br>Starting with version 2.7.6, we offer the â€˜mockito-inlineâ€™ artifact that enables inline mock making without configuring the MockMaker extension file. To use this, add the <code>mockito-inline</code> instead of the <code>mockito-core</code> artifact as follows: Be aware that this artifact may be abolished when the inline mock making feature is integrated into the default mock maker.</p><h2 id="1-éªŒè¯æŸäº›è¡Œä¸º"><a href="#1-éªŒè¯æŸäº›è¡Œä¸º" class="headerlink" title="1. éªŒè¯æŸäº›è¡Œä¸º"></a>1. éªŒè¯æŸäº›è¡Œä¸º</h2><p>è·Ÿç€æˆ‘ä»¬çš„ç¤ºä¾‹æ¥ mock ä¸€ä¸ª Listï¼Œå› ä¸ºå¤§å®¶å¯¹ List æ¥å£å¾ˆç†Ÿæ‚‰ï¼ˆä¾‹å¦‚ add(),get(), clear()ï¼‰ã€‚äº‹å®ä¸Šï¼Œä¸è¦ mock List æ¥å£æœ¬èº«,è€Œè¦ä½¿ç”¨ List çš„ä¸€ä¸ªå®ä¾‹æ¥æ›¿ä»£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é™æ€å¯¼å…¥ä¼šä½¿ä»£ç æ›´ç®€æ´</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º mock å¯¹è±¡</span></span><br><span class="line"><span class="type">List</span> <span class="variable">mockedList</span> <span class="operator">=</span> mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ mock å¯¹è±¡</span></span><br><span class="line">mockedList.add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">mockedList.clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯</span></span><br><span class="line">verify(mockedList).add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">verify(mockedList).clear();</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ mock å¯¹è±¡è¢«åˆ›å»ºäº†ï¼Œmock å¯¹è±¡ä¼šè®°ä½æ‰€æœ‰çš„äº¤äº’ã€‚ç„¶åä½ å°±å¯èƒ½é€‰æ‹©æ€§åœ°éªŒè¯ä½ æ„Ÿå…´è¶£çš„äº¤äº’ã€‚</p><h2 id="2-å¦‚ä½•åšä¸€äº›æµ‹è¯•æ¡©-Stub"><a href="#2-å¦‚ä½•åšä¸€äº›æµ‹è¯•æ¡©-Stub" class="headerlink" title="2. å¦‚ä½•åšä¸€äº›æµ‹è¯•æ¡© (Stub)"></a>2. å¦‚ä½•åšä¸€äº›æµ‹è¯•æ¡© (Stub)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½ å¯ä»¥ mock å…·ä½“çš„ç±»å‹ï¼Œä¸ä»…åªæ˜¯æ¥å£</span></span><br><span class="line"><span class="type">LinkedList</span> <span class="variable">mockedList</span> <span class="operator">=</span> mock(LinkedList.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ¡©</span></span><br><span class="line">when(mockedList.get(<span class="number">0</span>)).thenReturn(<span class="string">&quot;first&quot;</span>);</span><br><span class="line">when(mockedList.get(<span class="number">1</span>)).thenThrow(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºâ€œfirstâ€</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸º get(999) æ²¡æœ‰æ‰“æ¡©ï¼Œå› æ­¤è¾“å‡º null</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">999</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Although it is possible to verify a stubbed invocation, usually it&#x27;s just redundant</span></span><br><span class="line"><span class="comment">//If your code cares what get(0) returns then something else breaks (often before even verify() gets executed).</span></span><br><span class="line"><span class="comment">//If your code doesn&#x27;t care what get(0) returns then it should not be stubbed. Not convinced? See here.</span></span><br><span class="line"><span class="comment">// éªŒè¯ get(0) è¢«è°ƒç”¨çš„æ¬¡æ•°</span></span><br><span class="line">verify(mockedList).get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰è¿”å›å€¼ã€‚mock å‡½æ•°é»˜è®¤è¿”å›çš„æ˜¯ nullï¼Œä¸€ä¸ªç©ºçš„é›†åˆæˆ–è€…ä¸€ä¸ªè¢«å¯¹è±¡ç±»å‹åŒ…è£…çš„å†…ç½®ç±»å‹ï¼Œä¾‹å¦‚ 0ã€false å¯¹åº”çš„å¯¹è±¡ç±»å‹ä¸º Integerã€Booleanï¼›</li><li>æµ‹è¯•æ¡©å‡½æ•°å¯ä»¥è¢«è¦†å†™ï¼šä¾‹å¦‚å¸¸è§çš„æµ‹è¯•æ¡©å‡½æ•°å¯ä»¥ç”¨äºåˆå§‹åŒ–å¤¹å…·ï¼Œä½†æ˜¯æµ‹è¯•å‡½æ•°èƒ½å¤Ÿè¦†å†™å®ƒã€‚è¯·æ³¨æ„ï¼Œè¦†å†™æµ‹è¯•æ¡©å‡½æ•°æ˜¯ä¸€ç§å¯èƒ½å­˜åœ¨æ½œåœ¨é—®é¢˜çš„åšæ³•ï¼›</li><li>ä¸€æ—¦æµ‹è¯•æ¡©å‡½æ•°è¢«è°ƒç”¨ï¼Œè¯¥å‡½æ•°å°†ä¼šä¸€ç›´è¿”å›å›ºå®šçš„å€¼ï¼›</li><li>ä¸Šä¸€æ¬¡è°ƒç”¨æµ‹è¯•æ¡©å‡½æ•°æœ‰æ—¶å€™æä¸ºé‡è¦â€”â€”å½“ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¾ˆå¤šæ¬¡æ—¶ï¼Œæœ€åä¸€æ¬¡è°ƒç”¨å¯èƒ½æ˜¯ä½ æ‰€æ„Ÿå…´è¶£çš„ã€‚</li></ul><h2 id="3-å‚æ•°åŒ¹é…å™¨-matchers"><a href="#3-å‚æ•°åŒ¹é…å™¨-matchers" class="headerlink" title="3. å‚æ•°åŒ¹é…å™¨ (matchers)"></a>3. å‚æ•°åŒ¹é…å™¨ (matchers)</h2><p>Mockito ä»¥è‡ªç„¶çš„ java é£æ ¼æ¥éªŒè¯å‚æ•°å€¼: ä½¿ç”¨ equals() å‡½æ•°ã€‚æœ‰æ—¶å½“éœ€è¦é¢å¤–çš„çµæ´»æ€§æ—¶ä½ å¯èƒ½éœ€è¦ä½¿ç”¨å‚æ•°åŒ¹é…å™¨ argument matchers :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨å†…ç½®çš„ anyInt() å‚æ•°åŒ¹é…å™¨</span></span><br><span class="line">when(mockedList.get(anyInt())).thenReturn(<span class="string">&quot;element&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„å‚æ•°åŒ¹é…å™¨( åœ¨isValid() å‡½æ•°ä¸­è¿”å›ä½ è‡ªå·±çš„åŒ¹é…å™¨å®ç° )</span></span><br><span class="line">when(mockedList.contains(argThat(isValid()))).thenReturn(<span class="string">&quot;element&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º element</span></span><br><span class="line">System.out.println(mockedList.get(<span class="number">999</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ ä¹Ÿå¯ä»¥éªŒè¯å‚æ•°åŒ¹é…å™¨</span></span><br><span class="line">verify(mockedList).get(anyInt());</span><br></pre></td></tr></table></figure><p>å‚æ•°åŒ¹é…å™¨ä½¿éªŒè¯å’Œæµ‹è¯•æ¡©å˜å¾—æ›´çµæ´»ã€‚<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html">ç‚¹å‡»è¿™é‡Œ</a>æŸ¥çœ‹æ›´å¤šå†…ç½®çš„åŒ¹é…å™¨ä»¥åŠè‡ªå®šä¹‰å‚æ•°åŒ¹é…å™¨æˆ–è€… hamcrest åŒ¹é…å™¨çš„ç¤ºä¾‹ã€‚</p><p>å¦‚æœä»…ä»…æ˜¯è·å–è‡ªå®šä¹‰å‚æ•°åŒ¹é…å™¨çš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹<a href="http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentMatcher.html">ArgumentMatcherç±»æ–‡æ¡£</a>å³å¯ã€‚</p><p>ä¸ºäº†åˆç†çš„ä½¿ç”¨å¤æ‚çš„å‚æ•°åŒ¹é…ï¼Œä½¿ç”¨ equals() ä¸ anyX() çš„åŒ¹é…å™¨ä¼šä½¿å¾—æµ‹è¯•ä»£ç æ›´ç®€æ´ã€ç®€å•ã€‚<br>æœ‰æ—¶ï¼Œä¼šè¿«ä½¿ä½ é‡æ„ä»£ç ä»¥ä½¿ç”¨ equals() åŒ¹é…æˆ–è€…å®ç° equals() å‡½æ•°æ¥å¸®åŠ©ä½ è¿›è¡Œæµ‹è¯•ã€‚<br>åŒæ—¶å»ºè®®ä½ é˜…è¯»<a href="#15">ç¬¬15ç« èŠ‚</a>æˆ–è€…<a href="http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentCaptor.html">ArgumentCaptorç±»æ–‡æ¡£</a>ã€‚ArgumentCaptor æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ•è·å‚æ•°å€¼çš„ç‰¹æ®Šå‚æ•°åŒ¹é…å™¨ã€‚</p><p>å‚æ•°åŒ¹é…å™¨çš„æ³¨æ„ç‚¹ : </p><p>å¦‚æœä½ ä½¿ç”¨å‚æ•°åŒ¹é…å™¨ï¼Œæ‰€æœ‰å‚æ•°éƒ½å¿…é¡»ç”±åŒ¹é…å™¨æä¾›ã€‚</p><p>ç¤ºä¾‹ : ( è¯¥ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å¤šæ¬¡åº”ç”¨äºæµ‹è¯•æ¡©å‡½æ•°çš„éªŒè¯ ) </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">verify(mock).someMethod(anyInt(), anyString(), eq(<span class="string">&quot;third argument&quot;</span>));</span><br><span class="line"><span class="comment">// ä¸Šè¿°ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸º eq() ä¹Ÿæ˜¯ä¸€ä¸ªå‚æ•°åŒ¹é…å™¨</span></span><br><span class="line"></span><br><span class="line">verify(mock).someMethod(anyInt(), anyString(), <span class="string">&quot;third argument&quot;</span>);</span><br><span class="line"><span class="comment">// ä¸Šè¿°ä»£ç æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæ‰€æœ‰å‚æ•°å¿…é¡»ç”±åŒ¹é…å™¨æä¾›ï¼Œè€Œå‚æ•° &quot;third argument&quot; å¹¶éç”±å‚æ•°åŒ¹é…å™¨æä¾›ï¼Œå› æ­¤ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br></pre></td></tr></table></figure><p>åƒ anyObject(), eq() è¿™æ ·çš„åŒ¹é…å™¨å‡½æ•°ä¸ä¼šè¿”å›åŒ¹é…å™¨ã€‚å®ƒä»¬ä¼šåœ¨å†…éƒ¨å°†åŒ¹é…å™¨è®°å½•åˆ°ä¸€ä¸ªæ ˆå½“ä¸­ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡çš„å€¼ï¼Œé€šå¸¸ä¸ºnullã€‚<br><code>è¿™æ ·çš„å®ç°æ˜¯ç”±äºè¢«Javaç¼–è¯‘å™¨å¼ºåŠ çš„é™æ€ç±»å‹å®‰å…¨</code>ã€‚ç»“æœå°±æ˜¯ä½ ä¸èƒ½åœ¨éªŒè¯æˆ–è€…æµ‹è¯•æ¡©å‡½æ•°ä¹‹å¤–ä½¿ç”¨ anyObject(), eq() å‡½æ•°ã€‚</p><p><b id="4"></b></p><h2 id="4-éªŒè¯å‡½æ•°çš„ç¡®åˆ‡ã€æœ€å°‘ã€ä»æœªè°ƒç”¨æ¬¡æ•°"><a href="#4-éªŒè¯å‡½æ•°çš„ç¡®åˆ‡ã€æœ€å°‘ã€ä»æœªè°ƒç”¨æ¬¡æ•°" class="headerlink" title="4. éªŒè¯å‡½æ•°çš„ç¡®åˆ‡ã€æœ€å°‘ã€ä»æœªè°ƒç”¨æ¬¡æ•°"></a>4. <a href="">éªŒè¯å‡½æ•°çš„ç¡®åˆ‡ã€æœ€å°‘ã€ä»æœªè°ƒç”¨æ¬¡æ•°</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mockedList.add(<span class="string">&quot;once&quot;</span>);</span><br><span class="line"></span><br><span class="line">mockedList.add(<span class="string">&quot;twice&quot;</span>);</span><br><span class="line">mockedList.add(<span class="string">&quot;twice&quot;</span>);</span><br><span class="line"></span><br><span class="line">mockedList.add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line">mockedList.add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line">mockedList.add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„ä¸¤ä¸ªéªŒè¯å‡½æ•°æ•ˆæœä¸€æ ·ï¼Œå› ä¸º verify é»˜è®¤éªŒè¯çš„å°±æ˜¯ times(1)</span></span><br><span class="line">verify(mockedList).add(<span class="string">&quot;once&quot;</span>);</span><br><span class="line">verify(mockedList, times(<span class="number">1</span>)).add(<span class="string">&quot;once&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯å…·ä½“çš„æ‰§è¡Œæ¬¡æ•°</span></span><br><span class="line">verify(mockedList, times(<span class="number">2</span>)).add(<span class="string">&quot;twice&quot;</span>);</span><br><span class="line">verify(mockedList, times(<span class="number">3</span>)).add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨never()è¿›è¡ŒéªŒè¯,neverç›¸å½“äºtimes(0)</span></span><br><span class="line">verify(mockedList, never()).add(<span class="string">&quot;never happened&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨atLeast()/atMost()</span></span><br><span class="line">verify(mockedList, atMostOnce()).add(<span class="string">&quot;once&quot;</span>);</span><br><span class="line">verify(mockedList, atLeastOnce()).add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line">verify(mockedList, atLeast(<span class="number">2</span>)).add(<span class="string">&quot;five times&quot;</span>);</span><br><span class="line">verify(mockedList, atMost(<span class="number">5</span>)).add(<span class="string">&quot;three times&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>verify å‡½æ•°é»˜è®¤éªŒè¯çš„æ˜¯æ‰§è¡Œäº† times(1)ï¼Œä¹Ÿå°±æ˜¯æŸä¸ªæµ‹è¯•å‡½æ•°æ˜¯å¦æ‰§è¡Œäº† 1 æ¬¡ã€‚å› æ­¤ï¼Œtimes(1) é€šå¸¸è¢«çœç•¥äº†ã€‚</p><p><b id="5"></b></p><h2 id="5-ä¸ºè¿”å›å€¼ä¸ºvoidçš„å‡½æ•°é€šè¿‡StubæŠ›å‡ºå¼‚å¸¸"><a href="#5-ä¸ºè¿”å›å€¼ä¸ºvoidçš„å‡½æ•°é€šè¿‡StubæŠ›å‡ºå¼‚å¸¸" class="headerlink" title="5. ä¸ºè¿”å›å€¼ä¸ºvoidçš„å‡½æ•°é€šè¿‡StubæŠ›å‡ºå¼‚å¸¸"></a>5. <a href="">ä¸ºè¿”å›å€¼ä¸ºvoidçš„å‡½æ•°é€šè¿‡StubæŠ›å‡ºå¼‚å¸¸</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doThrow(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>()).when(mockedList).clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨è¿™å¥ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">mockedList.clear();</span><br></pre></td></tr></table></figure><p>å…³äº doThrow | doAnswer ç­‰å‡½æ•°çš„ä¿¡æ¯è¯·é˜…è¯»<a href="#12">ç¬¬ 12 èŠ‚</a>ã€‚</p><p><b id="6"></b></p><h2 id="6-éªŒè¯æ‰§è¡Œæ‰§è¡Œé¡ºåº"><a href="#6-éªŒè¯æ‰§è¡Œæ‰§è¡Œé¡ºåº" class="headerlink" title="6. éªŒè¯æ‰§è¡Œæ‰§è¡Œé¡ºåº"></a>6. <a href="">éªŒè¯æ‰§è¡Œæ‰§è¡Œé¡ºåº</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A. éªŒè¯ mock ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°æ‰§è¡Œé¡ºåº</span></span><br><span class="line"><span class="type">List</span> <span class="variable">singleMock</span> <span class="operator">=</span> mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ singleMock</span></span><br><span class="line">singleMock.add(<span class="string">&quot;was added first&quot;</span>);</span><br><span class="line">singleMock.add(<span class="string">&quot;was added second&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºè¯¥ mock å¯¹è±¡åˆ›å»ºä¸€ä¸ª inOrder å¯¹è±¡</span></span><br><span class="line"><span class="type">InOrder</span> <span class="variable">inOrder</span> <span class="operator">=</span> inOrder(singleMock);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®ä¿ add å‡½æ•°é¦–å…ˆæ‰§è¡Œçš„æ˜¯ add(&quot;was added first&quot;)ï¼Œç„¶åæ‰æ˜¯ add(&quot;was added second&quot;)</span></span><br><span class="line">inOrder.verify(singleMock).add(<span class="string">&quot;was added first&quot;</span>);</span><br><span class="line">inOrder.verify(singleMock).add(<span class="string">&quot;was added second&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// B. éªŒè¯å¤šä¸ª mock å¯¹è±¡çš„å‡½æ•°æ‰§è¡Œé¡ºåº</span></span><br><span class="line"><span class="type">List</span> <span class="variable">firstMock</span> <span class="operator">=</span> mock(List.class);</span><br><span class="line"><span class="type">List</span> <span class="variable">secondMock</span> <span class="operator">=</span> mock(List.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ mock</span></span><br><span class="line">firstMock.add(<span class="string">&quot;was called first&quot;</span>);</span><br><span class="line">secondMock.add(<span class="string">&quot;was called second&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºè¿™ä¸¤ä¸ª mock å¯¹è±¡åˆ›å»º inOrder å¯¹è±¡</span></span><br><span class="line"><span class="type">InOrder</span> <span class="variable">inOrder</span> <span class="operator">=</span> inOrder(firstMock, secondMock);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯å®ƒä»¬çš„æ‰§è¡Œé¡ºåº</span></span><br><span class="line">inOrder.verify(firstMock).add(<span class="string">&quot;was called first&quot;</span>);</span><br><span class="line">inOrder.verify(secondMock).add(<span class="string">&quot;was called second&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A å’Œ B å¯ä»¥æŒ‰ç…§ä½ çš„æ„æ„¿ç»„åˆåœ¨ä¸€èµ·</span></span><br></pre></td></tr></table></figure><p>éªŒè¯æ‰§è¡Œé¡ºåºæ˜¯éå¸¸çµæ´»çš„ï¼šä½ ä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„éªŒè¯æ‰€æœ‰äº¤äº’ï¼Œåªéœ€è¦éªŒè¯ä½ æ„Ÿå…´è¶£çš„å¯¹è±¡å³å¯ã€‚<br>å¦å¤–ï¼Œä½ å¯ä»¥ä»…é€šè¿‡é‚£äº›éœ€è¦éªŒè¯é¡ºåºçš„ mock å¯¹è±¡æ¥åˆ›å»º InOrder å¯¹è±¡ã€‚</p><p><b id="7"></b></p><h2 id="7-ç¡®ä¿äº¤äº’-interaction-æ“ä½œä¸ä¼šæ‰§è¡Œåœ¨-mock-å¯¹è±¡ä¸Š"><a href="#7-ç¡®ä¿äº¤äº’-interaction-æ“ä½œä¸ä¼šæ‰§è¡Œåœ¨-mock-å¯¹è±¡ä¸Š" class="headerlink" title="7. ç¡®ä¿äº¤äº’(interaction)æ“ä½œä¸ä¼šæ‰§è¡Œåœ¨ mock å¯¹è±¡ä¸Š"></a>7. ç¡®ä¿äº¤äº’(interaction)æ“ä½œä¸ä¼šæ‰§è¡Œåœ¨ mock å¯¹è±¡ä¸Š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Mock å¯¹è±¡</span></span><br><span class="line">mockOne.add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šéªŒè¯</span></span><br><span class="line">verify(mockOne).add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯æŸä¸ªäº¤äº’æ˜¯å¦ä»æœªè¢«æ‰§è¡Œ</span></span><br><span class="line">verify(mockOne, never()).add(<span class="string">&quot;two&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯ mock å¯¹è±¡æ²¡æœ‰äº¤äº’è¿‡</span></span><br><span class="line">verifyZeroInteractions(mockTwo, mockThree);</span><br></pre></td></tr></table></figure><p><b id="8"></b></p><h2 id="8-æŸ¥æ‰¾å†—ä½™çš„è°ƒç”¨"><a href="#8-æŸ¥æ‰¾å†—ä½™çš„è°ƒç”¨" class="headerlink" title="8. æŸ¥æ‰¾å†—ä½™çš„è°ƒç”¨"></a>8. æŸ¥æ‰¾å†—ä½™çš„è°ƒç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ mock</span></span><br><span class="line">mockedList.add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">mockedList.add(<span class="string">&quot;two&quot;</span>);</span><br><span class="line"></span><br><span class="line">verify(mockedList).add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„éªŒè¯å°†ä¼šå¤±è´¥</span></span><br><span class="line">verifyNoMoreInteractions(mockedList);</span><br></pre></td></tr></table></figure><p>ä¸€äº›ç”¨æˆ·å¯èƒ½ä¼šåœ¨é¢‘ç¹åœ°ä½¿ç”¨ <code>verifyNoMoreInteractions()</code>ï¼Œç”šè‡³åœ¨æ¯ä¸ªæµ‹è¯•å‡½æ•°ä¸­éƒ½ç”¨ã€‚ä½†æ˜¯ <code>verifyNoMoreInteractions()</code> å¹¶ä¸å»ºè®®åœ¨æ¯ä¸ªæµ‹è¯•å‡½æ•°ä¸­éƒ½ä½¿ç”¨ã€‚<code>verifyNoMoreInteractions()</code> åœ¨äº¤äº’æµ‹è¯•å¥—ä»¶ä¸­åªæ˜¯ä¸€ä¸ªä¾¿åˆ©çš„éªŒè¯ï¼Œå®ƒçš„ä½œç”¨æ˜¯å½“ä½ éœ€è¦éªŒè¯æ˜¯å¦å­˜åœ¨å†—ä½™è°ƒç”¨æ—¶ã€‚æ»¥ç”¨å®ƒå°†å¯¼è‡´æµ‹è¯•ä»£ç çš„å¯ç»´æŠ¤æ€§é™ä½ã€‚</p><p><code>never()</code> æ˜¯ä¸€ç§æ›´ä¸ºæ˜æ˜¾ä¸”æ˜“äºç†è§£çš„å½¢å¼ã€‚</p><p><b id="9"></b></p><h2 id="9-ç®€åŒ–-mock-å¯¹è±¡çš„åˆ›å»º-Mock-æ³¨è§£"><a href="#9-ç®€åŒ–-mock-å¯¹è±¡çš„åˆ›å»º-Mock-æ³¨è§£" class="headerlink" title="9. ç®€åŒ– mock å¯¹è±¡çš„åˆ›å»º - @Mock æ³¨è§£"></a>9. ç®€åŒ– mock å¯¹è±¡çš„åˆ›å»º - @Mock æ³¨è§£</h2><ul><li>æœ€å°åŒ–é‡å¤çš„åˆ›å»ºä»£ç </li><li>ä½¿æµ‹è¯•ç±»çš„ä»£ç å¯è¯»æ€§æ›´é«˜</li><li>ä½¿éªŒè¯é”™è¯¯æ›´æ˜“äºé˜…è¯»ï¼Œå› ä¸ºå­—æ®µåå¯ç”¨äºæ ‡è¯† mock å¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArticleManagerTest</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Mock</span> <span class="keyword">private</span> ArticleCalculator calculator;</span><br><span class="line">   <span class="meta">@Mock</span> <span class="keyword">private</span> ArticleDatabase database;</span><br><span class="line">   <span class="meta">@Mock</span> <span class="keyword">private</span> UserProvider userProvider;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> ArticleManager manager;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ä¸‹é¢è¿™å¥ä»£ç éœ€è¦åœ¨è¿è¡Œæµ‹è¯•å‡½æ•°ä¹‹å‰è¢«è°ƒç”¨ï¼Œä¸€èˆ¬æ”¾åˆ°æµ‹è¯•ç±»çš„åŸºç±»æˆ–è€… test runner ä¸­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MockitoAnnotations.initMocks(testClass);</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„ runner: [MockitoJUnitRunner] [runner] æˆ–è€…ä¸€ä¸ª rule : <a href="http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoJUnit.html#rule()">MockitoRule</a>ã€‚<br>å¯¹äº JUnit5 æµ‹è¯•ï¼Œåœ¨ 45 èŠ‚æœ‰æè¿°ã€‚<br>å…³äº mock æ³¨è§£çš„æ›´å¤šä¿¡æ¯å¯ä»¥é˜…è¯» <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockitoAnnotations.html">MockitoAnnotationsæ–‡æ¡£</a>ã€‚</p><p><b id="10"></b></p><h2 id="10-ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡©-stub"><a href="#10-ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡©-stub" class="headerlink" title="10. ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡© (stub)"></a>10. ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡© (stub)</h2><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¸ºåŒä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„ä¸åŒçš„è¿”å›å€¼æˆ–å¼‚å¸¸åšæµ‹è¯•æ¡©ã€‚å…¸å‹çš„è¿ç”¨å°±æ˜¯ä½¿ç”¨ mock è¿­ä»£å™¨ã€‚<br>åŸå§‹ç‰ˆæœ¬çš„ Mockito å¹¶æ²¡æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ Iterable æˆ–è€…ç®€å•çš„é›†åˆæ¥æ›¿æ¢è¿­ä»£å™¨ã€‚è¿™äº›æ–¹æ³•æä¾›äº†æ›´åŸå§‹çš„æ–¹å¼ã€‚<br>åœ¨ä¸€äº›åœºæ™¯ä¸­ä¸ºè¿ç»­çš„è°ƒç”¨åšæµ‹è¯•æ¡©ä¼šå¾ˆæœ‰ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ ï¼š </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">when(mock.someMethod(<span class="string">&quot;some arg&quot;</span>))</span><br><span class="line">  .thenThrow(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>())</span><br><span class="line">  .thenReturn(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ : æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸</span></span><br><span class="line">mock.someMethod(<span class="string">&quot;some arg&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ : è¾“å‡º &quot;foo&quot;</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">&quot;some arg&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç»­è°ƒç”¨ : ä¹Ÿæ˜¯è¾“å‡º &quot;foo&quot;</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">&quot;some arg&quot;</span>));</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè¿ç»­è°ƒç”¨çš„å¦ä¸€ç§æ›´ç®€çŸ­çš„ç‰ˆæœ¬ : </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è¿”å› &quot;one&quot;ï¼Œç¬¬äºŒæ¬¡è¿”å› &quot;two&quot;ï¼Œç¬¬ä¸‰æ¬¡è¿”å› &quot;three&quot;</span></span><br><span class="line"> when(mock.someMethod(<span class="string">&quot;some arg&quot;</span>))</span><br><span class="line">   .thenReturn(<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure><p><b id="11"></b></p><h2 id="11-ä¸ºå›è°ƒåšæµ‹è¯•æ¡©"><a href="#11-ä¸ºå›è°ƒåšæµ‹è¯•æ¡©" class="headerlink" title="11. ä¸ºå›è°ƒåšæµ‹è¯•æ¡©"></a>11. ä¸ºå›è°ƒåšæµ‹è¯•æ¡©</h2><p>Allows stubbing with generic Answer interface.<br>è¿è¡Œä¸ºæ³›å‹æ¥å£ Answer æ‰“æ¡©ã€‚</p><p>åœ¨æœ€åˆçš„Mockitoé‡Œä¹Ÿæ²¡æœ‰è¿™ä¸ªå…·æœ‰äº‰è®®æ€§çš„ç‰¹æ€§ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨thenReturn() æˆ–thenThrow()æ¥æ‰“æ¡©ã€‚è¿™ä¸¤ç§æ–¹æ³•è¶³å¤Ÿç”¨äºæµ‹è¯•æˆ–è€…æµ‹è¯•é©±åŠ¨å¼€å‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">when(mock.someMethod(anyString())).thenAnswer(<span class="keyword">new</span> <span class="title class_">Answer</span>() &#123;</span><br><span class="line">    Object <span class="title function_">answer</span><span class="params">(InvocationOnMock invocation)</span> &#123;</span><br><span class="line">        Object[] args = invocation.getArguments();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">mock</span> <span class="operator">=</span> invocation.getMock();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;called with arguments: &quot;</span> + args;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Following prints &quot;called with arguments: foo&quot;</span></span><br><span class="line"><span class="comment">// è¾“å‡º : &quot;called with arguments: foo&quot;</span></span><br><span class="line">System.out.println(mock.someMethod(<span class="string">&quot;foo&quot;</span>));</span><br></pre></td></tr></table></figure><p><b id="12"></b></p><h2 id="12-doReturn-ã€doThrow-ã€doAnswer-ã€doNothing-ã€doCallRealMethod-ç³»åˆ—æ–¹æ³•çš„è¿ç”¨"><a href="#12-doReturn-ã€doThrow-ã€doAnswer-ã€doNothing-ã€doCallRealMethod-ç³»åˆ—æ–¹æ³•çš„è¿ç”¨" class="headerlink" title="12. doReturn()ã€doThrow()ã€doAnswer()ã€doNothing()ã€doCallRealMethod()ç³»åˆ—æ–¹æ³•çš„è¿ç”¨"></a>12. <a href="">doReturn()ã€doThrow()ã€doAnswer()ã€doNothing()ã€doCallRealMethod()ç³»åˆ—æ–¹æ³•çš„è¿ç”¨</a></h2><p>é€šè¿‡<code>when(Object)</code>ä¸ºæ— è¿”å›å€¼çš„å‡½æ•°æ‰“æ¡©æœ‰ä¸åŒçš„æ–¹æ³•,å› ä¸ºç¼–è¯‘å™¨ä¸å–œæ¬¢voidå‡½æ•°åœ¨æ‹¬å·å†…â€¦</p><p>ä½¿ç”¨<code>doThrow(Throwable)</code> æ›¿æ¢<code>stubVoid(Object)</code>æ¥ä¸ºvoidå‡½æ•°æ‰“æ¡©æ˜¯ä¸ºäº†ä¸<code>doAnswer()</code>ç­‰å‡½æ•°æ—ä¿æŒä¸€è‡´æ€§ã€‚</p><p>å½“ä½ æƒ³ä¸ºvoidå‡½æ•°æ‰“æ¡©æ—¶ä½¿ç”¨å«æœ‰ä¸€ä¸ªexception å‚æ•°çš„<code>doAnswer()</code> : </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">doThrow(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>()).when(mockedList).clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">//following throws RuntimeException:</span></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">mockedList.clear();</span><br></pre></td></tr></table></figure><p>å½“ä½ è°ƒç”¨<code>doThrow()</code>, <code>doAnswer()</code>, <code>doNothing()</code>, <code>doReturn()</code> and <code>doCallRealMethod()</code> è¿™äº›å‡½æ•°æ—¶å¯ä»¥åœ¨é€‚å½“çš„ä½ç½®è°ƒç”¨<code>when()</code>å‡½æ•°. å½“ä½ éœ€è¦ä¸‹é¢è¿™äº›åŠŸèƒ½æ—¶è¿™æ˜¯å¿…é¡»çš„: </p><ul><li>æµ‹è¯•voidå‡½æ•°</li><li>åœ¨å—ç›‘æ§çš„å¯¹è±¡ä¸Šæµ‹è¯•å‡½æ•°</li><li>ä¸çŸ¥ä¸€æ¬¡çš„æµ‹è¯•ä¸ºåŒä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æ”¹å˜mockå¯¹è±¡çš„è¡Œä¸ºã€‚</li></ul><p>ä½†æ˜¯åœ¨è°ƒç”¨<code>when()</code>å‡½æ•°æ—¶ä½ å¯ä»¥é€‰æ‹©æ˜¯å¦è°ƒç”¨è¿™äº›ä¸Šè¿°è¿™äº›å‡½æ•°ã€‚</p><p>é˜…è¯»æ›´å¤šå…³äºè¿™äº›æ–¹æ³•çš„ä¿¡æ¯:</p><ul><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doReturn(java.lang.Object">doReturn(Object)</a>) </li><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doThrow(java.lang.Throwable">doThrow(Throwable)</a>)</li><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doThrow(java.lang.Class">doThrow(Class)</a>)</li><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doAnswer(org.mockito.stubbing.Answer">doAnswer(Answer)</a>)</li><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doNothing(">doNothing()</a>)</li><li><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doCallRealMethod(">doCallRealMethod()</a>)</li></ul><p><b id="13"></b></p><h2 id="13-ç›‘æ§çœŸå®å¯¹è±¡"><a href="#13-ç›‘æ§çœŸå®å¯¹è±¡" class="headerlink" title="13. ç›‘æ§çœŸå®å¯¹è±¡"></a>13. <a href="">ç›‘æ§çœŸå®å¯¹è±¡</a></h2><p>ä½ å¯ä»¥ä¸ºçœŸå®å¯¹è±¡åˆ›å»ºä¸€ä¸ªç›‘æ§(spy)å¯¹è±¡ã€‚å½“ä½ ä½¿ç”¨è¿™ä¸ªspyå¯¹è±¡æ—¶çœŸå®çš„å¯¹è±¡ä¹Ÿä¼šä¹Ÿè°ƒç”¨ï¼Œé™¤éå®ƒçš„å‡½æ•°è¢«stubäº†ã€‚å°½é‡å°‘ä½¿ç”¨spyå¯¹è±¡ï¼Œä½¿ç”¨æ—¶ä¹Ÿéœ€è¦å°å¿ƒå½¢å¼ï¼Œä¾‹å¦‚spyå¯¹è±¡å¯ä»¥ç”¨æ¥å¤„ç†é—ç•™ä»£ç ã€‚</p><p>ç›‘æ§ä¸€ä¸ªçœŸå®çš„å¯¹è±¡å¯ä»¥ä¸â€œå±€éƒ¨mockå¯¹è±¡â€æ¦‚å¿µç»“åˆèµ·æ¥ã€‚åœ¨1.8ä¹‹å‰ï¼Œmockitoçš„ç›‘æ§åŠŸèƒ½å¹¶ä¸æ˜¯çœŸæ­£çš„å±€éƒ¨mockå¯¹è±¡ã€‚åŸå› æ˜¯æˆ‘ä»¬è®¤ä¸ºå±€éƒ¨mockå¯¹è±¡çš„å®ç°æ–¹å¼å¹¶ä¸å¥½ï¼Œåœ¨æŸäº›æ—¶å€™æˆ‘å‘ç°ä¸€äº›ä½¿ç”¨å±€éƒ¨mockå¯¹è±¡çš„åˆæ³•ç”¨ä¾‹ã€‚ï¼ˆç¬¬ä¸‰æ–¹æ¥å£ã€ä¸´æ—¶é‡æ„é—ç•™ä»£ç ï¼Œå®Œæ•´çš„æ–‡ç« åœ¨<a href="http://monkeyisland.pl/2009/01/13/subclass-and-override-vs-partial-mocking-vs-refactoring/">è¿™é‡Œ</a> ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line"><span class="type">List</span> <span class="variable">spy</span> <span class="operator">=</span> spy(list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//optionally, you can stub out some methods:</span></span><br><span class="line"><span class="comment">// ä½ å¯ä»¥ä¸ºæŸäº›å‡½æ•°æ‰“æ¡©</span></span><br><span class="line">when(spy.size()).thenReturn(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//using the spy calls *real* methods</span></span><br><span class="line"><span class="comment">// é€šè¿‡spyå¯¹è±¡è°ƒç”¨çœŸå®å¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line">spy.add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">spy.add(<span class="string">&quot;two&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//prints &quot;one&quot; - the first element of a list</span></span><br><span class="line"><span class="comment">// è¾“å‡ºç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">System.out.println(spy.get(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//size() method was stubbed - 100 is printed</span></span><br><span class="line"><span class="comment">// å› ä¸ºsize()å‡½æ•°è¢«æ‰“æ¡©äº†,å› æ­¤è¿™é‡Œè¿”å›çš„æ˜¯100</span></span><br><span class="line">System.out.println(spy.size());</span><br><span class="line"></span><br><span class="line"><span class="comment">//optionally, you can verify</span></span><br><span class="line"><span class="comment">// äº¤äº’éªŒè¯</span></span><br><span class="line">verify(spy).add(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">verify(spy).add(<span class="string">&quot;two&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç†è§£ç›‘æ§çœŸå®å¯¹è±¡éå¸¸é‡è¦ï¼</p><p>æœ‰æ—¶ï¼Œåœ¨ç›‘æ§å¯¹è±¡ä¸Šä½¿ç”¨<code>when(Object)</code>æ¥è¿›è¡Œæ‰“æ¡©æ˜¯ä¸å¯èƒ½æˆ–è€…ä¸åˆ‡å®é™…çš„ã€‚å› æ­¤ï¼Œå½“ä½¿ç”¨ç›‘æ§å¯¹è±¡æ—¶è¯·è€ƒè™‘<code>doReturn|Answer|Throw()</code>å‡½æ•°æ—æ¥è¿›è¡Œæ‰“æ¡©ã€‚ä¾‹å¦‚ : </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line"><span class="type">List</span> <span class="variable">spy</span> <span class="operator">=</span> spy(list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Impossible: real method is called so spy.get(0) throws IndexOutOfBoundsException (the list is yet empty)</span></span><br><span class="line"><span class="comment">// ä¸å¯èƒ½ : å› ä¸ºå½“è°ƒç”¨spy.get(0)æ—¶ä¼šè°ƒç”¨çœŸå®å¯¹è±¡çš„get(0)å‡½æ•°,æ­¤æ—¶ä¼šå‘ç”ŸIndexOutOfBoundsExceptionå¼‚å¸¸ï¼Œå› ä¸ºçœŸå®Listå¯¹è±¡æ˜¯ç©ºçš„</span></span><br><span class="line">   when(spy.get(<span class="number">0</span>)).thenReturn(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//You have to use doReturn() for stubbing</span></span><br><span class="line"><span class="comment">// ä½ éœ€è¦ä½¿ç”¨doReturn()æ¥æ‰“æ¡©</span></span><br><span class="line">doReturn(<span class="string">&quot;foo&quot;</span>).when(spy).get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>Mockitoå¹¶ä¸ä¼šä¸ºçœŸå®å¯¹è±¡ä»£ç†å‡½æ•°è°ƒç”¨ï¼Œå®é™…ä¸Šå®ƒä¼šæ‹·è´çœŸå®å¯¹è±¡ã€‚å› æ­¤å¦‚æœä½ ä¿ç•™äº†çœŸå®å¯¹è±¡å¹¶ä¸”ä¸ä¹‹äº¤äº’ï¼Œä¸è¦æœŸæœ›ä»ç›‘æ§å¯¹è±¡å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚å½“ä½ åœ¨ç›‘æ§å¯¹è±¡ä¸Šè°ƒç”¨ä¸€ä¸ªæ²¡æœ‰è¢«stubçš„å‡½æ•°æ—¶å¹¶ä¸ä¼šè°ƒç”¨çœŸå®å¯¹è±¡çš„å¯¹åº”å‡½æ•°ï¼Œä½ ä¸ä¼šåœ¨çœŸå®å¯¹è±¡ä¸Šçœ‹åˆ°ä»»ä½•æ•ˆæœã€‚</p><p>å› æ­¤ç»“è®ºå°±æ˜¯ : å½“ä½ åœ¨ç›‘æ§ä¸€ä¸ªçœŸå®å¯¹è±¡æ—¶ï¼Œä½ æƒ³åœ¨stubè¿™ä¸ªçœŸå®å¯¹è±¡çš„å‡½æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨è‡ªæ‰¾éº»çƒ¦ã€‚æˆ–è€…ä½ æ ¹æœ¬ä¸åº”è¯¥éªŒè¯è¿™äº›å‡½æ•°ã€‚</p><p><b id="14"></b></p><h2 id="14-ä¿®æ”¹æ²¡æœ‰æµ‹è¯•æ¡©çš„è°ƒç”¨çš„é»˜è®¤è¿”å›å€¼-1-7ç‰ˆæœ¬ä¹‹å"><a href="#14-ä¿®æ”¹æ²¡æœ‰æµ‹è¯•æ¡©çš„è°ƒç”¨çš„é»˜è®¤è¿”å›å€¼-1-7ç‰ˆæœ¬ä¹‹å" class="headerlink" title="14. ä¿®æ”¹æ²¡æœ‰æµ‹è¯•æ¡©çš„è°ƒç”¨çš„é»˜è®¤è¿”å›å€¼ ( 1.7ç‰ˆæœ¬ä¹‹å ) "></a>14. <a href="">ä¿®æ”¹æ²¡æœ‰æµ‹è¯•æ¡©çš„è°ƒç”¨çš„é»˜è®¤è¿”å›å€¼ ( 1.7ç‰ˆæœ¬ä¹‹å ) </a></h2><p>ä½ å¯ä»¥æŒ‡å®šç­–ç•¥æ¥åˆ›å»ºmockå¯¹è±¡çš„è¿”å›å€¼ã€‚è¿™æ˜¯ä¸€ä¸ªé«˜çº§ç‰¹æ€§ï¼Œé€šå¸¸æ¥è¯´ï¼Œä½ ä¸éœ€è¦å†™è¿™æ ·çš„æµ‹è¯•ã€‚ç„¶åï¼Œå®ƒå¯¹äºé—ç•™ç³»ç»Ÿæ¥è¯´æ˜¯å¾ˆæœ‰ç”¨å¤„çš„ã€‚å½“ä½ ä¸éœ€è¦ä¸ºå‡½æ•°è°ƒç”¨æ‰“æ¡©æ—¶ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„answerã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Foo</span> <span class="variable">mock</span> <span class="operator">=</span> mock(Foo.class, Mockito.RETURNS_SMART_NULLS);</span><br><span class="line"><span class="type">Foo</span> <span class="variable">mockTwo</span> <span class="operator">=</span> mock(Foo.class, <span class="keyword">new</span> <span class="title class_">YourOwnAnswer</span>());</span><br></pre></td></tr></table></figure><p>å…³äºRETURNS_SMART_NULLSæ›´å¤šçš„ä¿¡æ¯è¯·æŸ¥çœ‹ :<br><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#RETURNS_SMART_NULLS">RETURNS_SMART_NULLSæ–‡æ¡£</a> ã€‚</p><p><b id="15"></b></p><h2 id="15-ä¸ºä¸‹ä¸€æ­¥çš„æ–­è¨€æ•è·å‚æ•°-1-8ç‰ˆæœ¬ä¹‹å"><a href="#15-ä¸ºä¸‹ä¸€æ­¥çš„æ–­è¨€æ•è·å‚æ•°-1-8ç‰ˆæœ¬ä¹‹å" class="headerlink" title="15. ä¸ºä¸‹ä¸€æ­¥çš„æ–­è¨€æ•è·å‚æ•° (1.8ç‰ˆæœ¬ä¹‹å)"></a>15. ä¸ºä¸‹ä¸€æ­¥çš„æ–­è¨€æ•è·å‚æ•° (1.8ç‰ˆæœ¬ä¹‹å)</h2><p>Mockitoä»¥javaä»£ç é£æ ¼çš„å½¢å¼æ¥éªŒè¯å‚æ•°å€¼ : å³é€šè¿‡ä½¿ç”¨<code>equals()</code>å‡½æ•°ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ¨èç”¨äºå‚æ•°åŒ¹é…çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šä½¿å¾—æµ‹è¯•ä»£ç æ›´ç®€å•ã€ç®€æ´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå½“éªŒè¯äº¤äº’ä¹‹åè¦æ£€æµ‹çœŸå®çš„å‚æ•°å€¼æ—¶è¿™å°†å˜å¾—æœ‰ç”¨ã€‚ä¾‹å¦‚ ï¼š </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);</span><br><span class="line"><span class="comment">// å‚æ•°æ•è·</span></span><br><span class="line">verify(mock).doSomething(argument.capture());</span><br><span class="line"><span class="comment">// ä½¿ç”¨equalæ–­è¨€</span></span><br><span class="line">assertEquals(<span class="string">&quot;John&quot;</span>, argument.getValue().getName());</span><br></pre></td></tr></table></figure><p>è­¦å‘Š : æˆ‘ä»¬å»ºè®®ä½¿ç”¨æ²¡æœ‰æµ‹è¯•æ¡©çš„ArgumentCaptoræ¥éªŒè¯ï¼Œå› ä¸ºä½¿ç”¨å«æœ‰æµ‹è¯•æ¡©çš„ArgumentCaptorä¼šé™ä½æµ‹è¯•ä»£ç çš„å¯è¯»æ€§ï¼Œå› ä¸ºcaptoræ˜¯åœ¨æ–­è¨€ä»£ç å—ä¹‹å¤–åˆ›å»ºçš„ã€‚å¦ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒå¯ä»¥é™ä½æœ¬åœ°åŒ–çš„ç¼ºç‚¹ï¼Œå› ä¸ºå¦‚æœæµ‹è¯•æ¡©å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆå‚æ•°å°±ä¸ä¼šè¢«æ•è·ã€‚æ€»ä¹‹ï¼ŒArgumentCaptorä¸è‡ªå®šä¹‰çš„å‚æ•°åŒ¹é…å™¨ç›¸å…³(å¯ä»¥æŸ¥çœ‹<a href="ArgumentMatcher">ArgumentMatcherç±»çš„æ–‡æ¡£</a> )ã€‚è¿™ä¸¤ç§æŠ€æœ¯éƒ½èƒ½ç”¨äºæ£€æµ‹å¤–éƒ¨ä¼ é€’åˆ°Mockå¯¹è±¡çš„å‚æ•°ã€‚ç„¶è€Œï¼Œä½¿ç”¨ArgumentCaptoråœ¨ä»¥ä¸‹çš„æƒ…å†µä¸‹æ›´åˆé€‚ : </p><ul><li>è‡ªå®šä¹‰ä¸èƒ½è¢«é‡ç”¨çš„å‚æ•°åŒ¹é…å™¨</li><li>ä½ ä»…éœ€è¦æ–­è¨€å‚æ•°å€¼</li></ul><p>è‡ªå®šä¹‰å‚æ•°åŒ¹é…å™¨ç›¸å…³çš„èµ„æ–™ä½ å¯ä»¥å‚è€ƒ<a href="ArgumentMatcher">ArgumentMatcher</a>æ–‡æ¡£ã€‚</p><h2 id="16-çœŸå®çš„å±€éƒ¨mocks-1-8ç‰ˆæœ¬ä¹‹å"><a href="#16-çœŸå®çš„å±€éƒ¨mocks-1-8ç‰ˆæœ¬ä¹‹å" class="headerlink" title="16. çœŸå®çš„å±€éƒ¨mocks (1.8ç‰ˆæœ¬ä¹‹å)"></a>16. çœŸå®çš„å±€éƒ¨mocks (1.8ç‰ˆæœ¬ä¹‹å)</h2><p>åœ¨å†…éƒ¨é€šè¿‡é‚®ä»¶è¿›è¡Œäº†æ— æ•°äº‰è¾©å’Œè®¨è®ºåï¼Œæœ€ç»ˆ Mockito å†³å®šæ”¯æŒéƒ¨åˆ†æµ‹è¯•ï¼Œæ—©å‰æˆ‘ä»¬ä¸æ”¯æŒæ˜¯å› ä¸ºæˆ‘ä»¬è®¤ä¸ºéƒ¨åˆ†æµ‹è¯•ä¼šè®©ä»£ç å˜å¾—ç³Ÿç³•ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å‘ç°äº†éƒ¨åˆ†æµ‹è¯•çœŸæ­£åˆç†çš„ç”¨æ³•ã€‚<a href="http://monkeyisland.pl/2009/01/13/subclass-and-override-vs-partial-mocking-vs-refactoring/">è¯¦æƒ…ç‚¹è¿™</a></p><p>åœ¨ Mockito 1.8 ä¹‹å‰ï¼Œspy() æ–¹æ³•å¹¶ä¸ä¼šäº§ç”ŸçœŸæ­£çš„éƒ¨åˆ†æµ‹è¯•ï¼Œè€Œè¿™æ— ç–‘ä¼šè®©ä¸€äº›å¼€å‘è€…å›°æƒ‘ã€‚æ›´è¯¦ç»†çš„å†…å®¹å¯ä»¥çœ‹ï¼š<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#13">è¿™é‡Œ</a> æˆ– <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#spy(T">Java æ–‡æ¡£</a>)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//you can create partial mock with spy() method:</span></span><br><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> spy(<span class="keyword">new</span> <span class="title class_">LinkedList</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//you can enable partial mock capabilities selectively on mocks:</span></span><br><span class="line"><span class="type">Foo</span> <span class="variable">mock</span> <span class="operator">=</span> mock(Foo.class);</span><br><span class="line"><span class="comment">//Be sure the real implementation is &#x27;safe&#x27;.</span></span><br><span class="line"><span class="comment">//If real implementation throws exceptions or depends on specific state of the object then you&#x27;re in trouble.</span></span><br><span class="line">when(mock.someMethod()).thenCallRealMethod();</span><br></pre></td></tr></table></figure><p>ä¸€å¦‚æ—¢å¾€ï¼Œä½ ä¼šå»è¯»éƒ¨åˆ†æµ‹è¯•çš„è­¦å‘Šéƒ¨åˆ†ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹é€šè¿‡å°†æŠ½è±¡çš„å¤æ‚åº¦æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªç‹¬ç«‹ï¼Œç²¾ç¡®çš„ SRPy å¯¹è±¡ä¸­ï¼Œé™ä½äº†æŠ½è±¡å¤„ç†çš„å¤æ‚åº¦ã€‚é‚£éƒ¨åˆ†æµ‹è¯•æ˜¯æ€ä¹ˆéµå¾ªè¿™ä¸ªè§„èŒƒçš„å‘¢ï¼Ÿäº‹å®ä¸Šéƒ¨åˆ†æµ‹è¯•å¹¶æ²¡æœ‰éµå¾ªè¿™ä¸ªè§„èŒƒâ€¦â€¦éƒ¨åˆ†æµ‹è¯•é€šå¸¸æ„å‘³ç€æŠ½è±¡çš„å¤æ‚åº¦è¢«ç§»åŠ¨åˆ°åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒæ–¹æ³•ä¸­ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ä¼šæ˜¯ä½ æƒ³è¦çš„åº”ç”¨æ¶æ„æ–¹å¼ã€‚</p><p>ç„¶è€Œï¼Œåœ¨ä¸€äº›ç½•è§çš„æƒ…å†µä¸‹éƒ¨åˆ†æµ‹è¯•æ‰ä¼šæ˜¯æ˜“ç”¨çš„ï¼šå¤„ç†ä¸èƒ½è½»æ˜“ä¿®æ”¹çš„ä»£ç ï¼ˆç¬¬ä¸‰æ–¹æ¥å£ï¼Œä¸´æ—¶é‡æ„çš„é—ç•™ä»£ç ç­‰ç­‰ï¼‰ã€‚ç„¶è€Œï¼Œä¸ºäº†æ–°çš„ï¼Œæµ‹è¯•é©±åŠ¨å’Œæ¶æ„ä¼˜ç§€çš„ä»£ç ï¼Œæˆ‘æ˜¯ä¸ä¼šä½¿ç”¨éƒ¨åˆ†æµ‹è¯•çš„ã€‚</p><h2 id="17-é‡ç½®mockså¯¹è±¡-1-8ç‰ˆæœ¬ä¹‹å"><a href="#17-é‡ç½®mockså¯¹è±¡-1-8ç‰ˆæœ¬ä¹‹å" class="headerlink" title="17. é‡ç½®mockså¯¹è±¡ (1.8ç‰ˆæœ¬ä¹‹å)"></a>17. é‡ç½®mockså¯¹è±¡ (1.8ç‰ˆæœ¬ä¹‹å)</h2><p>èªæ˜çš„ Mockito ä½¿ç”¨è€…å¾ˆå°‘ä¼šç”¨åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“è¿™æ˜¯å‡ºç°ç³Ÿç³•æµ‹è¯•å•å…ƒçš„ä¿¡å·ã€‚é€šå¸¸æƒ…å†µä¸‹ä½ ä¸ä¼šéœ€è¦é‡è®¾ä½ çš„æµ‹è¯•å•å…ƒï¼Œåªéœ€è¦ä¸ºæ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•é‡æ–°åˆ›å»ºä¸€ä¸ªæµ‹è¯•å•å…ƒå°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœä½ çœŸçš„æƒ³é€šè¿‡ reset() æ–¹æ³•æ»¡è¶³æŸäº›éœ€æ±‚çš„è¯ï¼Œè¯·è€ƒè™‘å®ç°ç®€å•ï¼Œå°è€Œä¸”ä¸“æ³¨äºæµ‹è¯•æ–¹æ³•è€Œä¸æ˜¯å†—é•¿ï¼Œç²¾ç¡®çš„æµ‹è¯•ã€‚é¦–å…ˆå¯èƒ½å‡ºç°çš„ä»£ç å¼‚å‘³å°±æ˜¯æµ‹è¯•æ–¹æ³•ä¸­é—´é‚£çš„ reset() æ–¹æ³•ã€‚è¿™å¯èƒ½æ„å‘³ç€ä½ å·²ç»è¿‡åº¦æµ‹è¯•äº†ã€‚è¯·éµå¾ªæµ‹è¯•æ–¹æ³•çš„å‘¢å–ƒï¼šè¯·è®©æˆ‘ä»¬å°ï¼Œè€Œä¸”ä¸“æ³¨äºå•ä¸€çš„è¡Œä¸ºä¸Šã€‚åœ¨ Mockito é‚®ä»¶åˆ—è¡¨ä¸­å°±æœ‰å¥½å‡ ä¸ªè®¨è®ºæ˜¯å’Œè¿™ä¸ªæœ‰å…³çš„ã€‚</p><p>æ·»åŠ  reset() æ–¹æ³•çš„å”¯ä¸€åŸå› å°±æ˜¯è®©å®ƒèƒ½ä¸å®¹å™¨æ³¨å…¥çš„æµ‹è¯•å•å…ƒåä½œã€‚è¯¦æƒ…çœ‹ <a href="http://code.google.com/p/mockito/issues/detail?id=55">issue 55</a> æˆ– <a href="http://code.google.com/p/mockito/wiki/FAQ">FAQ</a>ã€‚</p><p>åˆ«è‡ªå·±ç»™è‡ªå·±æ‰¾éº»çƒ¦ï¼Œreset() æ–¹æ³•åœ¨æµ‹è¯•æ–¹æ³•çš„ä¸­é—´ç¡®å®æ˜¯ä»£ç å¼‚å‘³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">mock</span> <span class="operator">=</span> mock(List.class);</span><br><span class="line">when(mock.size()).thenReturn(<span class="number">10</span>);</span><br><span class="line">mock.add(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">reset(mock);</span><br><span class="line"><span class="comment">//at this point the mock forgot any interactions &amp; stubbing</span></span><br></pre></td></tr></table></figure><h2 id="18-æ•…éšœæ’æŸ¥ä¸éªŒè¯æ¡†æ¶çš„ä½¿ç”¨-1-8ç‰ˆæœ¬ä¹‹å"><a href="#18-æ•…éšœæ’æŸ¥ä¸éªŒè¯æ¡†æ¶çš„ä½¿ç”¨-1-8ç‰ˆæœ¬ä¹‹å" class="headerlink" title="18. æ•…éšœæ’æŸ¥ä¸éªŒè¯æ¡†æ¶çš„ä½¿ç”¨ (1.8ç‰ˆæœ¬ä¹‹å)"></a>18. æ•…éšœæ’æŸ¥ä¸éªŒè¯æ¡†æ¶çš„ä½¿ç”¨ (1.8ç‰ˆæœ¬ä¹‹å)</h2><p>é¦–å…ˆï¼Œå¦‚æœå‡ºç°äº†ä»»ä½•é—®é¢˜ï¼Œæˆ‘å»ºè®®ä½ å…ˆçœ‹ <a href="http://code.google.com/p/mockito/wiki/FAQ">Mockito FAQ</a>ã€‚</p><p>ä»»ä½•ä½ æçš„é—®é¢˜éƒ½ä¼šè¢«æäº¤åˆ° Mockito çš„<a href="http://groups.google.com/group/mockito">é‚®ä»¶åˆ—è¡¨</a>ä¸­ã€‚</p><p>ç„¶åä½ åº”è¯¥çŸ¥é“ Mockito ä¼šéªŒè¯ä½ æ˜¯å¦å§‹ç»ˆä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨å®ƒï¼Œå¯¹æ­¤æœ‰ç–‘æƒ‘çš„è¯ä¸å¦¨çœ‹çœ‹ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#validateMockitoUsage(">validateMockitoUsage()</a>) çš„æ–‡æ¡£è¯´æ˜ã€‚</p><h2 id="19-è¡Œä¸ºé©±åŠ¨å¼€å‘çš„åˆ«å-1-8ç‰ˆæœ¬ä¹‹å"><a href="#19-è¡Œä¸ºé©±åŠ¨å¼€å‘çš„åˆ«å-1-8ç‰ˆæœ¬ä¹‹å" class="headerlink" title="19. è¡Œä¸ºé©±åŠ¨å¼€å‘çš„åˆ«å (1.8ç‰ˆæœ¬ä¹‹å)"></a>19. è¡Œä¸ºé©±åŠ¨å¼€å‘çš„åˆ«å (1.8ç‰ˆæœ¬ä¹‹å)</h2><p>è¡Œä¸ºé©±åŠ¨å¼€å‘å®ç°æµ‹è¯•å•å…ƒçš„æ¨¡å¼å°† //given //when //then comments è§†ä½œæµ‹è¯•æ–¹æ³•çš„åŸºç¡€ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å®ç°å•å…ƒæµ‹è¯•æ—¶è¢«å»ºè®®åšçš„ï¼</p><p><a href="http://en.wikipedia.org/wiki/Behavior_Driven_Development">ä½ å¯ä»¥åœ¨è¿™å¼€å§‹å­¦ä¹ æœ‰å…³ BDD çš„çŸ¥è¯†</a></p><p>é—®é¢˜æ˜¯å½“ä¿¡æ¯æ²¡æœ‰å¾ˆå¥½åœ°ä¸ //given //when //then comments äº¤äº’æ—¶ï¼Œæ‰®æ¼”è§„èŒƒè§’è‰²çš„æµ‹è¯•æ¡© API å°±ä¼šå‡ºç°é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºæµ‹è¯•æ¡©å±äºç»™å®šæµ‹è¯•å•å…ƒçš„ç»„ä»¶ï¼Œè€Œä¸”ä¸æ˜¯ä»»ä½•æµ‹è¯•çš„ç»„ä»¶ã€‚å› æ­¤ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/BDDMockito.html">BDDMockito</a> ç±»ä»‹ç»äº†ä¸€ä¸ªåˆ«åï¼Œä½¿ä½ çš„æµ‹è¯•æ¡©æ–¹æ³•è°ƒç”¨ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/BDDMockito.html#given(T">BDDMockito.given(Object)</a>) æ–¹æ³•ã€‚ç°åœ¨å®ƒå¯ä»¥å¾ˆå¥½åœ°å’Œç»™å®šçš„ BDD æ¨¡å¼çš„æµ‹è¯•å•å…ƒç»„ä»¶è¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mockito.BDDMockito.*;</span><br><span class="line"></span><br><span class="line"><span class="type">Seller</span> <span class="variable">seller</span> <span class="operator">=</span> mock(Seller.class);</span><br><span class="line"><span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Shop</span>(seller);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shouldBuyBread</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  given(seller.askForBread()).willReturn(<span class="keyword">new</span> <span class="title class_">Bread</span>());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="type">Goods</span> <span class="variable">goods</span> <span class="operator">=</span> shop.buyBread();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  assertThat(goods, containBread());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="20-åºåˆ—åŒ–mockå¯¹è±¡"><a href="#20-åºåˆ—åŒ–mockå¯¹è±¡" class="headerlink" title="20. åºåˆ—åŒ–mockå¯¹è±¡"></a>20. åºåˆ—åŒ–mockå¯¹è±¡</h2><p>æ¨¡æ‹Ÿå¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚æœ‰äº†è¿™ä¸ªç‰¹æ€§ä½ å°±å¯ä»¥åœ¨ä¾èµ–è¢«åºåˆ—åŒ–çš„æƒ…å†µä¸‹ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡äº†ã€‚</p><p>è­¦å‘Šï¼šè¿™ä¸ªç‰¹æ€§å¾ˆå°‘åœ¨å•å…ƒæµ‹è¯•ä¸­è¢«ä½¿ç”¨ã€‚</p><p>To create serializable mock use <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockSettings.html#serializable(">MockSettings.serializable()</a>):</p><p>è¿™ä¸ªç‰¹æ€§é€šè¿‡ BDD æ‹¥æœ‰ä¸å¯è€ƒå¤–éƒ¨ä¾èµ–çš„ç‰¹æ€§çš„å…·ä½“ç”¨ä¾‹å®ç°ï¼Œæ¥è‡ªå¤–éƒ¨ä¾èµ–çš„ Web ç¯å¢ƒå’Œå¯¹è±¡ä¼šè¢«åºåˆ—åŒ–ï¼Œç„¶ååœ¨ä¸åŒå±‚ä¹‹é—´è¢«ä¼ é€’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">serializableMock</span> <span class="operator">=</span> mock(List.class, withSettings().serializable());</span><br></pre></td></tr></table></figure><p>The mock can be serialized assuming all the normal <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/io/Serializable.html">serialization requirements</a> are met by the class.</p><p>æ¨¡æ‹Ÿå¯¹è±¡èƒ½è¢«åºåˆ—åŒ–å‡è®¾æ‰€æœ‰æ™®é€šçš„åºåˆ—åŒ–è¦æ±‚éƒ½è¢«ç±»æ»¡è¶³äº†ã€‚</p><p>è®©ä¸€ä¸ªçœŸå®çš„ä¾¦æŸ¥å¯¹è±¡å¯åºåˆ—åŒ–éœ€è¦å¤šä¸€äº›åŠªåŠ›ï¼Œå› ä¸º spy(â€¦) æ–¹æ³•æ²¡æœ‰æ¥æ”¶ MockSettings çš„é‡è½½ç‰ˆæœ¬ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œä½ å‡ ä¹ä¸å¯èƒ½ç”¨åˆ°è¿™ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Object&gt;();</span><br><span class="line">List&lt;Object&gt; spy = mock(ArrayList.class, withSettings()</span><br><span class="line">                .spiedInstance(list)</span><br><span class="line">                .defaultAnswer(CALLS_REAL_METHODS)</span><br><span class="line">                .serializable());</span><br></pre></td></tr></table></figure><h2 id="21-æ–°çš„æ³¨è§£-Captor-Spy-InjectMocks-1-8-3ç‰ˆæœ¬ä¹‹å"><a href="#21-æ–°çš„æ³¨è§£-Captor-Spy-InjectMocks-1-8-3ç‰ˆæœ¬ä¹‹å" class="headerlink" title="21. æ–°çš„æ³¨è§£ : @Captor,@Spy,@ InjectMocks (1.8.3ç‰ˆæœ¬ä¹‹å)"></a>21. æ–°çš„æ³¨è§£ : @Captor,@Spy,@ InjectMocks (1.8.3ç‰ˆæœ¬ä¹‹å)</h2><p>V1.8.3 å¸¦æ¥çš„æ–°æ³¨è§£åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šå¾ˆå®ç”¨</p><p>@<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Captor.html">Captor</a> ç®€åŒ– <a href="http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentCaptor.html">ArgumentCaptor</a> çš„åˆ›å»º - å½“éœ€è¦æ•è·çš„å‚æ•°æ˜¯ä¸€ä¸ªä»¤äººè®¨åŒçš„é€šç”¨ç±»ï¼Œè€Œä¸”ä½ æƒ³é¿å…ç¼–è¯‘æ—¶è­¦å‘Šã€‚</p><p>@<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Spy.html">Spy</a> - ä½ å¯ä»¥ç”¨å®ƒä»£æ›¿ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#spy(T">spy(Object) æ–¹æ³•</a>)</p><p>@<a href="http://site.mockito.org/mockito/docs/current/org/mockito/InjectMocks.html">InjectMocks</a> - è‡ªåŠ¨å°†æ¨¡æ‹Ÿå¯¹è±¡æˆ–ä¾¦æŸ¥åŸŸæ³¨å…¥åˆ°è¢«æµ‹è¯•å¯¹è±¡ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ @InjectMocks ä¹Ÿèƒ½ä¸ @Spy ä¸€èµ·ä½¿ç”¨ï¼Œè¿™å°±æ„å‘³ç€ Mockito ä¼šæ³¨å…¥æ¨¡æ‹Ÿå¯¹è±¡åˆ°æµ‹è¯•çš„éƒ¨åˆ†æµ‹è¯•ä¸­ã€‚å®ƒçš„å¤æ‚åº¦ä¹Ÿæ˜¯ä½ åº”è¯¥ä½¿ç”¨éƒ¨åˆ†æµ‹è¯•åŸå› ã€‚</p><p>æ‰€æœ‰æ–°çš„æ³¨è§£ä»…ä»…åœ¨ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockitoAnnotations.html#initMocks(java.lang.Object">MockitoAnnotations.initMocks(Object)</a>) æ–¹æ³•ä¸­è¢«å¤„ç†ï¼Œå°±åƒä½ åœ¨ built-in runner ä¸­ä½¿ç”¨çš„ @<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mock.html">Mock</a> æ³¨è§£ï¼š<a href="http://site.mockito.org/mockito/docs/current/org/mockito/runners/MockitoJUnitRunner.html">MockitoJUnitRunner</a> æˆ– è§„èŒƒ: <a href="http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html">MockitoRule</a>.</p><h2 id="22-éªŒè¯è¶…æ—¶-1-8-5ç‰ˆæœ¬ä¹‹å"><a href="#22-éªŒè¯è¶…æ—¶-1-8-5ç‰ˆæœ¬ä¹‹å" class="headerlink" title="22. éªŒè¯è¶…æ—¶ (1.8.5ç‰ˆæœ¬ä¹‹å)"></a>22. éªŒè¯è¶…æ—¶ (1.8.5ç‰ˆæœ¬ä¹‹å)</h2><p>å…è®¸å¸¦æœ‰æš‚åœçš„éªŒè¯ã€‚è¿™ä½¿å¾—ä¸€ä¸ªéªŒè¯å»ç­‰å¾…ä¸€æ®µç‰¹å®šçš„æ—¶é—´ï¼Œä»¥è·å¾—æƒ³è¦çš„äº¤äº’è€Œä¸æ˜¯å¦‚æœè¿˜æ²¡æœ‰å‘ç”Ÿäº‹ä»¶å°±å¸¦æ¥çš„ç«‹å³å¤±è´¥ã€‚åœ¨å¹¶å‘æ¡ä»¶ä¸‹çš„æµ‹è¯•è¿™ä¼šå¾ˆæœ‰ç”¨ã€‚</p><p>æ„Ÿè§‰èµ·æ¥è¿™ä¸ªç‰¹æ€§åº”è¯¥å¾ˆå°‘è¢«ä½¿ç”¨ - æŒ‡å‡ºæ›´å¥½çš„æµ‹è¯•å¤šçº¿ç¨‹ç³»ç»Ÿçš„æ–¹æ³•ã€‚</p><p>è¿˜æ²¡æœ‰å®ç°å»å’Œ InOrder éªŒè¯åä½œã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//passes when someMethod() is called within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>)).someMethod();</span><br><span class="line"><span class="comment">//above is an alias to:</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).times(<span class="number">1</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//passes when someMethod() is called *exactly* 2 times within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).times(<span class="number">2</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//passes when someMethod() is called *at least* 2 times within given time span</span></span><br><span class="line">verify(mock, timeout(<span class="number">100</span>).atLeast(<span class="number">2</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">//verifies someMethod() within given time span using given verification mode</span></span><br><span class="line"><span class="comment">//useful only if you have your own custom verification modes.</span></span><br><span class="line">verify(mock, <span class="keyword">new</span> <span class="title class_">Timeout</span>(<span class="number">100</span>, yourOwnVerificationMode)).someMethod();</span><br></pre></td></tr></table></figure><h2 id="23-è‡ªåŠ¨åˆå§‹åŒ–è¢«-Spies-InjectMocksæ³¨è§£çš„å­—æ®µä»¥åŠæ„é€ å‡½æ•°æ³¨å…¥-1-9-0ç‰ˆæœ¬ä¹‹å"><a href="#23-è‡ªåŠ¨åˆå§‹åŒ–è¢«-Spies-InjectMocksæ³¨è§£çš„å­—æ®µä»¥åŠæ„é€ å‡½æ•°æ³¨å…¥-1-9-0ç‰ˆæœ¬ä¹‹å" class="headerlink" title="23. è‡ªåŠ¨åˆå§‹åŒ–è¢«@Spies, @InjectMocksæ³¨è§£çš„å­—æ®µä»¥åŠæ„é€ å‡½æ•°æ³¨å…¥ (1.9.0ç‰ˆæœ¬ä¹‹å)"></a>23. è‡ªåŠ¨åˆå§‹åŒ–è¢«@Spies, @InjectMocksæ³¨è§£çš„å­—æ®µä»¥åŠæ„é€ å‡½æ•°æ³¨å…¥ (1.9.0ç‰ˆæœ¬ä¹‹å)</h2><p>Mockito ç°åœ¨ä¼šé€šè¿‡æ³¨å…¥æ„é€ æ–¹æ³•ã€setter æˆ–åŸŸæ³¨å…¥å°½å¯èƒ½åˆå§‹åŒ–å¸¦æœ‰ @<a href="http://site.mockito.org/mockito/docs/current/org/mockito/Spy.html">Spy</a> å’Œ @<a href="http://site.mockito.org/mockito/docs/current/org/mockito/InjectMocks.html">InjectMocks</a> æ³¨è§£çš„åŸŸæˆ–æ–¹æ³•ã€‚</p><p>ä¸ºäº†åˆ©ç”¨è¿™ä¸€ç‚¹ç‰¹æ€§ï¼Œä½ éœ€è¦ä½¿ç”¨ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockitoAnnotations.html#initMocks(java.lang.Object">MockitoAnnotations.initMocks(Object)</a>), <a href="http://site.mockito.org/mockito/docs/current/org/mockito/runners/MockitoJUnitRunner.html">MockitoJUnitRunner</a> æˆ– <a href="http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html">MockitoRule</a>ã€‚</p><p>ä¸ºäº† InjectMocks è¯·åœ¨ Java æ–‡æ¡£ä¸­äº†è§£æ›´å¤šå¯ç”¨çš„æŠ€å·§å’Œæ³¨å…¥çš„è§„èŒƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//instead:</span></span><br><span class="line"><span class="meta">@Spy</span> <span class="type">BeerDrinker</span> <span class="variable">drinker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeerDrinker</span>();</span><br><span class="line"><span class="comment">//you can write:</span></span><br><span class="line"><span class="meta">@Spy</span> BeerDrinker drinker;</span><br><span class="line"></span><br><span class="line"><span class="comment">//same applies to @InjectMocks annotation:</span></span><br><span class="line"><span class="meta">@InjectMocks</span> LocalPub;</span><br></pre></td></tr></table></figure><h2 id="24-å•è¡Œæµ‹è¯•æ¡©-1-9-0ç‰ˆæœ¬ä¹‹å"><a href="#24-å•è¡Œæµ‹è¯•æ¡©-1-9-0ç‰ˆæœ¬ä¹‹å" class="headerlink" title="24. å•è¡Œæµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å)"></a>24. å•è¡Œæµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å)</h2><p>Mockito ç°åœ¨å…è®¸ä½ åœ¨ä½¿ç”¨æµ‹è¯•æ¡©æ—¶åˆ›å»ºæ¨¡æ‹Ÿå¯¹è±¡ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒå…è®¸åœ¨ä¸€è¡Œä»£ç ä¸­åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ¡©ï¼Œè¿™å¯¹ä¿æŒä»£ç çš„æ•´æ´å¾ˆæœ‰ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰äº›ä¹å‘³çš„æµ‹è¯•æ¡©ä¼šè¢«åˆ›å»ºï¼Œå¹¶åœ¨æµ‹è¯•åˆå§‹åŒ–åŸŸæ—¶è¢«æ‰“å…¥ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarTest</span> &#123;</span><br><span class="line">  <span class="type">Car</span> <span class="variable">boringStubbedCar</span> <span class="operator">=</span> when(mock(Car.class).shiftGear()).thenThrow(EngineNotStarted.class).getMock();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span> <span class="keyword">public</span> <span class="keyword">void</span> should... &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="25-éªŒè¯è¢«å¿½ç•¥çš„æµ‹è¯•æ¡©-1-9-0ç‰ˆæœ¬ä¹‹å"><a href="#25-éªŒè¯è¢«å¿½ç•¥çš„æµ‹è¯•æ¡©-1-9-0ç‰ˆæœ¬ä¹‹å" class="headerlink" title="25. éªŒè¯è¢«å¿½ç•¥çš„æµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å)"></a>25. éªŒè¯è¢«å¿½ç•¥çš„æµ‹è¯•æ¡© (1.9.0ç‰ˆæœ¬ä¹‹å)</h2><p>Mockito ç°åœ¨å…è®¸ä¸ºäº†éªŒè¯æ— è§†æµ‹è¯•æ¡©ã€‚åœ¨ä¸ verifyNoMoreInteractions() æ–¹æ³•æˆ–éªŒè¯ inOrder() æ–¹æ³•è€¦åˆæ—¶ï¼Œæœ‰äº›æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚å¸®åŠ©é¿å…ç¹ççš„æ‰“å…¥æµ‹è¯•æ¡©è°ƒç”¨éªŒè¯ - æ˜¾ç„¶æˆ‘ä»¬ä¸ä¼šå¯¹éªŒè¯æµ‹è¯•æ¡©æ„Ÿå…´è¶£ã€‚</p><p>è­¦å‘Šï¼ŒignoreStubs() å¯èƒ½ä¼šå¯¼è‡´ verifyNoMoreInteractions(ignoreStubs(â€¦)) çš„è¿‡åº¦ä½¿ç”¨ã€‚è°¨è®°åœ¨å¿ƒï¼ŒMockito æ²¡æœ‰æ¨èç”¨ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#verifyNoMoreInteractions(java.lang.Object...">verifyNoMoreInteractions()</a>) æ–¹æ³•è¿ç»­åœ°æ–½ç”¨äºæ¯ä¸€ä¸ªæµ‹è¯•ä¸­ï¼ŒåŸå› åœ¨ Java æ–‡æ¡£ä¸­æœ‰ã€‚</p><p>ä¸€äº›ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">verify(mock).foo();</span><br><span class="line">verify(mockTwo).bar();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ignores all stubbed methods:</span></span><br><span class="line">verifyNoMoreInvocations(ignoreStubs(mock, mockTwo));</span><br><span class="line"></span><br><span class="line"><span class="comment">//creates InOrder that will ignore stubbed</span></span><br><span class="line"><span class="type">InOrder</span> <span class="variable">inOrder</span> <span class="operator">=</span> inOrder(ignoreStubs(mock, mockTwo));</span><br><span class="line">inOrder.verify(mock).foo();</span><br><span class="line">inOrder.verify(mockTwo).bar();</span><br><span class="line">inOrder.verifyNoMoreInteractions();</span><br></pre></td></tr></table></figure><p>æ›´å¥½çš„ä¾‹å­å’Œæ›´å¤šçš„ç»†èŠ‚éƒ½å¯ä»¥åœ¨ Java æ–‡æ¡£çš„ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#ignoreStubs(java.lang.Object...">ignoreStubs(Objectâ€¦)</a>) éƒ¨åˆ†çœ‹åˆ°ã€‚</p><h2 id="26-mockè¯¦æƒ…-1-9-5ç‰ˆæœ¬ä¹‹å"><a href="#26-mockè¯¦æƒ…-1-9-5ç‰ˆæœ¬ä¹‹å" class="headerlink" title="26. mockè¯¦æƒ… (1.9.5ç‰ˆæœ¬ä¹‹å)"></a>26. mockè¯¦æƒ… (1.9.5ç‰ˆæœ¬ä¹‹å)</h2><p>ä¸ºäº†åŒºåˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯æ¨¡æ‹Ÿå¯¹è±¡è¿˜æ˜¯ä¾¦æŸ¥å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Mockito.mockingDetails(someObject).isMock();</span><br><span class="line">Mockito.mockingDetails(someObject).isSpy();</span><br></pre></td></tr></table></figure><p><a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockingDetails.html#isMock(">MockingDetails.isMock()</a>) å’Œ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockingDetails.html#isSpy(">MockingDetails.isSpy()</a>) æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å› ä¸ºä¸€ä¸ªä¾¦æŸ¥å¯¹è±¡åªæ˜¯æ¨¡æ‹Ÿå¯¹è±¡çš„ä¸€ç§å˜ç§ï¼Œæ‰€ä»¥ isMock() æ–¹æ³•åœ¨å¯¹è±¡æ˜¯ä¾¦æŸ¥å¯¹è±¡æ˜¯ä¼šè¿”å› trueã€‚åœ¨ä¹‹åçš„ Mockito ç‰ˆæœ¬ä¸­ MockingDetails ä¼šå˜å¾—æ›´å¥å£®ï¼Œå¹¶æä¾›å…¶ä»–ä¸æ¨¡æ‹Ÿå¯¹è±¡ç›¸å…³çš„æœ‰ç”¨ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè°ƒç”¨ï¼Œæµ‹è¯•æ¡©ä¿¡æ¯ï¼Œç­‰ç­‰â€¦â€¦</p><h2 id="27-å§”æ‰˜è°ƒç”¨çœŸå®å®ä¾‹-Since-1-9-5"><a href="#27-å§”æ‰˜è°ƒç”¨çœŸå®å®ä¾‹-Since-1-9-5" class="headerlink" title="27. å§”æ‰˜è°ƒç”¨çœŸå®å®ä¾‹ (Since 1.9.5)"></a>27. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#delegating_call_to_real_instance">å§”æ‰˜è°ƒç”¨çœŸå®å®ä¾‹</a> (Since 1.9.5)</h2><p>å½“<strong>ä½¿ç”¨å¸¸è§„çš„ spy API å» mock æˆ–è€… spy ä¸€ä¸ªå¯¹è±¡å¾ˆå›°éš¾</strong>æ—¶å¯ä»¥ç”¨ delegate æ¥ spy æˆ–è€… mock å¯¹è±¡çš„æŸä¸€éƒ¨åˆ†ã€‚<br>ä» Mockito çš„ 1.10.11 ç‰ˆæœ¬å¼€å§‹ï¼Œ delegate æœ‰å¯èƒ½å’Œ mock çš„ç±»å‹ç›¸åŒä¹Ÿå¯èƒ½ä¸åŒã€‚å¦‚æœä¸æ˜¯åŒä¸€ç±»å‹ï¼Œ<br>delegate ç±»å‹éœ€è¦æä¾›ä¸€ä¸ªåŒ¹é…æ–¹æ³•å¦åˆ™å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä¸‹é¢æ˜¯å…³äºè¿™ä¸ªç‰¹æ€§çš„ä¸€äº›ç”¨ä¾‹:</p><ul><li>å¸¦æœ‰ interface çš„ final ç±»</li><li>å·²ç»è‡ªå®šä¹‰ä»£ç†çš„å¯¹è±¡</li><li>å¸¦æœ‰ finalize æ–¹æ³•çš„ç‰¹æ®Šå¯¹è±¡ï¼Œå°±æ˜¯é¿å…é‡å¤æ‰§è¡Œã€‚</li></ul><p>å’Œå¸¸è§„ spy çš„ä¸åŒ:</p><ul><li><p>æ ‡å‡†çš„ spy <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#spy(T)">(spy(Object))</a> åŒ…å«è¢« spy å®ä¾‹çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ï¼Œæ–¹æ³•åœ¨ spy å¯¹è±¡ä¸Šè¢«è°ƒç”¨ã€‚è¢« spy çš„å¯¹è±¡åªåœ¨ mock<br>åˆ›å»ºæ—¶è¢«ç”¨æ¥æ‹·è´çŠ¶æ€ä¿¡æ¯ã€‚å¦‚æœä½ é€šè¿‡æ ‡å‡† spy è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ª spy ä¼šè°ƒç”¨å…¶å†…éƒ¨çš„å…¶ä»–æ–¹æ³•è®°å½•è¿™æ¬¡æ“ä½œï¼Œ<br>ä»¥ä¾¿åé¢éªŒè¯ä½¿ç”¨ã€‚ç­‰æ•ˆäºå­˜æ ¹ (stubbed)æ“ä½œã€‚</p></li><li><p>mock delegates åªæ˜¯ç®€å•çš„æŠŠæ‰€æœ‰æ–¹æ³•å§”æ‰˜ç»™ delegateã€‚delegate ä¸€ç›´è¢«å½“æˆå®ƒä»£ç†çš„æ–¹æ³•ä½¿ç”¨ã€‚å¦‚æœä½ <br>ä»ä¸€ä¸ª mock è°ƒç”¨å®ƒè¢«å§”æ‰˜çš„æ–¹æ³•ï¼Œå®ƒä¼šè°ƒç”¨å…¶å†…éƒ¨æ–¹æ³•ï¼Œè¿™äº›è°ƒç”¨ä¸ä¼šè¢«è®°å½•ï¼Œstubbing åœ¨è¿™é‡Œä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚<br>Mock çš„ delegates ç›¸å¯¹äºæ ‡å‡†çš„ spy æ¥è¯´åŠŸèƒ½å¼±äº†å¾ˆå¤šï¼Œä¸è¿‡åœ¨æ ‡å‡† spy ä¸èƒ½è¢«åˆ›å»ºçš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</p></li></ul><p>æ›´å¤šä¿¡æ¯å¯ä»¥çœ‹è¿™é‡Œ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/AdditionalAnswers.html#delegatesTo(java.lang.Object)">AdditionalAnswers.delegatesTo(Object)</a>.</p><hr><h2 id="28-MockMaker-API-Since-1-9-5"><a href="#28-MockMaker-API-Since-1-9-5" class="headerlink" title="28. MockMaker API (Since 1.9.5)"></a>28. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#mock_maker_plugin">MockMaker API </a>(Since 1.9.5)</h2><p>ä¸ºäº†æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚å’Œ Android å¹³å°ä½¿ç”¨ã€‚Mockito ç°åœ¨æä¾›ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œå…è®¸æ›¿æ¢ä»£ç†ç”Ÿæˆå¼•æ“ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMockito ä½¿ç”¨ cglib åˆ›å»ºåŠ¨æ€ä»£ç†ã€‚</p><p>è¿™ä¸ªæ‰©å±•ç‚¹æ˜¯ä¸ºæƒ³è¦æ‰©å±• Mockito åŠŸèƒ½çš„é«˜çº§ç”¨æˆ·å‡†å¤‡çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥åœ¨ dexmaker çš„å¸®åŠ©ä¸‹ä½¿ç”¨ Mockito<br>æµ‹è¯• Androidã€‚</p><p>æ›´å¤šçš„ç»†èŠ‚ï¼ŒåŸå› å’Œç¤ºä¾‹è¯·çœ‹ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/plugins/MockMaker.html">MockMaker</a> çš„æ–‡æ¡£ã€‚</p><hr><h2 id="29-new-BDD-é£æ ¼çš„éªŒè¯-Since-1-10-0"><a href="#29-new-BDD-é£æ ¼çš„éªŒè¯-Since-1-10-0" class="headerlink" title="29. (new) BDD é£æ ¼çš„éªŒè¯ (Since 1.10.0)"></a>29. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#BDD_behavior_verification">(new) BDD é£æ ¼çš„éªŒè¯</a> (Since 1.10.0)</h2><p>å¼€å¯ Behavior Driven Development (BDD) é£æ ¼çš„éªŒè¯å¯ä»¥é€šè¿‡ BBD çš„å…³é”®è¯ <strong>then</strong> å¼€å§‹éªŒè¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">given(dog.bark()).willReturn(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// when</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">then(person).should(times(<span class="number">2</span>)).ride(bike);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯è¯·æŸ¥é˜… <a href="http://site.mockito.org/mockito/docs/current/org/mockito/BDDMockito.html#then(T)"> BDDMockito.then(Object)</a> .</p><hr><h2 id="30-new-Spying-æˆ–-mocking-æŠ½è±¡ç±»-Since-1-10-12"><a href="#30-new-Spying-æˆ–-mocking-æŠ½è±¡ç±»-Since-1-10-12" class="headerlink" title="30. (new) Spying æˆ– mocking æŠ½è±¡ç±» (Since 1.10.12)"></a>30. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#spying_abstract_classes">(new) Spying æˆ– mocking æŠ½è±¡ç±»</a> (Since 1.10.12)</h2><p>ç°åœ¨å¯ä»¥æ–¹ä¾¿çš„ spy ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æ³¨æ„ï¼Œè¿‡åº¦ä½¿ç”¨ spy æˆ–è®¸æ„å‘³ç€ä»£ç çš„è®¾è®¡ä¸Šæœ‰é—®é¢˜ã€‚(see <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#spy(T)">spy(Object)</a>).</p><p>ä¹‹å‰ï¼Œspying åªå¯ä»¥ç”¨åœ¨å®ä¾‹å¯¹è±¡ä¸Šã€‚è€Œç°åœ¨æ–°çš„ API å¯ä»¥åœ¨åˆ›å»ºä¸€ä¸ª mock å®ä¾‹æ—¶ä½¿ç”¨æ„é€ å‡½æ•°ã€‚è¿™å¯¹ mock<br>ä¸€ä¸ªæŠ½è±¡ç±»æ¥è¯´æ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™æ ·ä½¿ç”¨è€…å°±ä¸å¿…å†æä¾›ä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹äº†ã€‚ç›®å‰çš„è¯åªæ”¯æŒæ— å‚æ„é€ å‡½æ•°ï¼Œ<br>å¦‚æœä½ è®¤ä¸ºè¿™æ ·è¿˜ä¸å¤Ÿçš„è¯æ¬¢è¿å‘æˆ‘ä»¬åé¦ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//convenience API, new overloaded spy() method:</span></span><br><span class="line"> <span class="type">SomeAbstract</span> <span class="variable">spy</span> <span class="operator">=</span> spy(SomeAbstract.class);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//Robust API, via settings builder:</span></span><br><span class="line"> <span class="type">OtherAbstract</span> <span class="variable">spy</span> <span class="operator">=</span> mock(OtherAbstract.class, withSettings()</span><br><span class="line">    .useConstructor().defaultAnswer(CALLS_REAL_METHODS));</span><br><span class="line"></span><br><span class="line"> <span class="comment">//Mocking a non-static inner abstract class:</span></span><br><span class="line"> <span class="type">InnerAbstract</span> <span class="variable">spy</span> <span class="operator">=</span> mock(InnerAbstract.class, withSettings()</span><br><span class="line">    .useConstructor().outerInstance(outerInstance).defaultAnswer(CALLS_REAL_METHODS));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯è¯·è§ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockSettings.html#useConstructor()">MockSettings.useConstructor()</a> .</p><hr><h2 id="31-new-Mockito-mocks-å¯ä»¥é€šè¿‡-classloaders-åºåˆ—åŒ–-ååºåˆ—åŒ–-Since-1-10-0"><a href="#31-new-Mockito-mocks-å¯ä»¥é€šè¿‡-classloaders-åºåˆ—åŒ–-ååºåˆ—åŒ–-Since-1-10-0" class="headerlink" title="31. (new) Mockito mocks å¯ä»¥é€šè¿‡ classloaders åºåˆ—åŒ–/ååºåˆ—åŒ– (Since 1.10.0)"></a>31. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#serilization_across_classloader">(new) Mockito mocks å¯ä»¥é€šè¿‡ classloaders åºåˆ—åŒ–/ååºåˆ—åŒ–</a> (Since 1.10.0)</h2><p> Mockito é€šè¿‡ classloader å¼•å…¥åºåˆ—åŒ–ã€‚å’Œå…¶ä»–å½¢å¼çš„åºåˆ—åŒ–ä¸€æ ·ï¼Œæ‰€æœ‰ mock å±‚çš„å¯¹è±¡éƒ½è¦è¢«åºåˆ—åŒ–ï¼Œ<br> åŒ…æ‹¬ answersã€‚å› ä¸ºåºåˆ—åŒ–æ¨¡å¼éœ€è¦å¤§é‡çš„å·¥ä½œï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¯é€‰æ‹©è®¾ç½®ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸¸è§„çš„ serialization</span></span><br><span class="line">mock(Book.class, withSettings().serializable());</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ classloaders åºåˆ—åŒ–</span></span><br><span class="line">mock(Book.class, withSettings().serializable(ACROSS_CLASSLOADERS));</span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockSettings.html#serializable(org.mockito.mock.SerializableMode)">MockSettings.serializable(SerializableMode)</a>.</p><hr><h2 id="32-new-Deep-stubs-æ›´å¥½çš„æ³›å‹æ”¯æŒ-Since-1-10-0"><a href="#32-new-Deep-stubs-æ›´å¥½çš„æ³›å‹æ”¯æŒ-Since-1-10-0" class="headerlink" title="32. (new) Deep stubs æ›´å¥½çš„æ³›å‹æ”¯æŒ (Since 1.10.0)"></a>32. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#better_generic_support_with_deep_stubs">(new) Deep stubs æ›´å¥½çš„æ³›å‹æ”¯æŒ</a> (Since 1.10.0)</h2><p> Deep stubbing ç°åœ¨å¯ä»¥æ›´å¥½çš„æŸ¥æ‰¾ç±»çš„æ³›å‹ä¿¡æ¯ã€‚è¿™å°±æ„å‘³ç€åƒè¿™æ ·çš„ç±»<br> ä¸å¿…å» mock å®ƒçš„è¡Œä¸ºå°±å¯ä»¥ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Lines</span> <span class="keyword">extends</span> <span class="title class_">List</span>&lt;Line&gt; &#123;</span><br><span class="line">     <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> lines = mock(Lines.class, RETURNS_DEEP_STUBS);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Now Mockito understand this is not an Object but a Line</span></span><br><span class="line"> <span class="type">Line</span> <span class="variable">line</span> <span class="operator">=</span> lines.iterator().next();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ mock è¿”å›ä¸€ä¸ª mock å¯¹è±¡æ˜¯é”™è¯¯çš„ã€‚</p><hr><h2 id="33-new-Mockito-JUnit-rule-Since-1-10-17"><a href="#33-new-Mockito-JUnit-rule-Since-1-10-17" class="headerlink" title="33.  (new) Mockito JUnit rule (Since 1.10.17)"></a>33.  <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#mockito_junit_rule">(new) Mockito JUnit rule</a> (Since 1.10.17)</h2><p>Mockito ç°åœ¨æä¾›ä¸€ä¸ª JUnit ruleã€‚ç›®å‰ä¸ºæ­¢ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åˆå§‹åŒ– fields ï¼Œä½¿ç”¨ Mockito æä¾›çš„æ³¨è§£æ¯”å¦‚<br><a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mock.html">@Mock</a>, <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Spy.html">@Spy</a>, <a href="http://site.mockito.org/mockito/docs/current/org/mockito/InjectMocks.html">@InjectMocks</a> ç­‰ç­‰ã€‚</p><ul><li>ç”¨ @RunWith(<a href="http://site.mockito.org/mockito/docs/current/org/mockito/runners/MockitoJUnitRunner.html">@MockitoJUnitRunner.class</a>) æ ‡æ³¨ JUnit æµ‹è¯•ç±»</li><li>åœ¨ @Before ä¹‹å‰è°ƒç”¨ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/MockitoAnnotations.html#initMocks(java.lang.Object)">MockitoAnnotations.initMocks(Object)</a></li></ul><p>ç°åœ¨ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸€ä¸ª rule:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(YetAnotherRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TheTest</span> &#123;</span><br><span class="line">    <span class="meta">@Rule</span> <span class="keyword">public</span> <span class="type">MockitoRule</span> <span class="variable">mockito</span> <span class="operator">=</span> MockitoJUnit.rule();</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šä¿¡æ¯åˆ°è¿™é‡ŒæŸ¥çœ‹ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoJUnit.html#rule()">MockitoJUnit.rule()</a>.</p><hr><h2 id="34-new-å¼€å¯å’Œå…³é—­-plugins-Since-1-10-15"><a href="#34-new-å¼€å¯å’Œå…³é—­-plugins-Since-1-10-15" class="headerlink" title="34. (new) å¼€å¯å’Œå…³é—­ plugins (Since 1.10.15)"></a>34. <a href="http://site.mockito.org/mockito/docs/current/org/mockito/plugins/PluginSwitch.html">(new) å¼€å¯å’Œå…³é—­ plugins</a> (Since 1.10.15)</h2><p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç‰¹æ€§ï¼Œå¯ä»¥æ§åˆ¶ä¸€ä¸ª mockito-plugin å¼€å¯æˆ–è€…å…³é—­ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ <a href="http://site.mockito.org/mockito/docs/current/org/mockito/plugins/PluginSwitch.html">PluginSwitch</a></p><hr><p>###35. è‡ªå®šä¹‰éªŒè¯å¤±è´¥ä¿¡æ¯ (Since 2.0.0)</p><p>å…è®¸å£°æ˜ä¸€ä¸ªåœ¨éªŒè¯å¤±è´¥æ—¶è¾“å‡ºçš„è‡ªå®šä¹‰æ¶ˆæ¯<br>ç¤ºä¾‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// will print a custom message on verification failure</span></span><br><span class="line">verify(mock, description(<span class="string">&quot;This will print on failure&quot;</span>)).someMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">// will work with any verification mode</span></span><br><span class="line">verify(mock, times(<span class="number">2</span>).description(<span class="string">&quot;someMethod should be called twice&quot;</span>)).someMethod();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://mockito.org/&quot;&gt;Mockito&lt;/a&gt; åº“èƒ½å¤Ÿ Mock å¯¹è±¡ã€éªŒè¯ç»“æœä»¥åŠæ‰“æ¡©(stubbing)ã€‚&lt;br&gt;æœ¬ä¸­æ–‡æ–‡æ¡£åŸºäº Mockito 3.6.0 ç‰ˆæœ¬çš„&lt;a href=&quot;http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ç¿»è¯‘ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ‘ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹ç¬”è®°" scheme="http://blog.fcj.one/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Java" scheme="http://blog.fcj.one/tags/Java/"/>
    
      <category term="Mockito" scheme="http://blog.fcj.one/tags/Mockito/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Let&#39;s Encrypt é…ç½® Apache SSL è¯ä¹¦</title>
    <link href="http://blog.fcj.one/apache-https.html"/>
    <id>http://blog.fcj.one/apache-https.html</id>
    <published>2019-11-19T12:58:24.000Z</published>
    <updated>2019-11-19T12:58:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>HTTPSï¼ˆå…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„ HTTP é€šé“ï¼Œç®€å•è®²æ˜¯ HTTP çš„å®‰å…¨ç‰ˆã€‚</p><p>å³ HTTP ä¸‹åŠ å…¥ SSL å±‚ï¼ŒHTTPS çš„å®‰å…¨åŸºç¡€æ˜¯ SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦ SSLã€‚</p><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Letâ€™s Encrypt ç­¾å‘å…è´¹è¯ä¹¦å®ç° Apache HTTPSã€‚</p><span id="more"></span><h2 id="Letâ€™s-Encrypt"><a href="#Letâ€™s-Encrypt" class="headerlink" title="Letâ€™s Encrypt"></a>Letâ€™s Encrypt</h2><p>Letâ€™s Encrypt æ˜¯ä¸€ä¸ªç”±éè¥åˆ©æ€§ç»„ç»‡ äº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼ˆISRGï¼‰æä¾›çš„å…è´¹ã€è‡ªåŠ¨åŒ–å’Œå¼€æ”¾çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ã€‚</p><p>ç®€å•çš„è¯´ï¼Œå€ŸåŠ© Letâ€™s Encrypt é¢å‘çš„è¯ä¹¦å¯ä»¥ä¸ºæˆ‘ä»¬çš„ç½‘ç«™å…è´¹å¯ç”¨ HTTPS(SSL/TLS)ã€‚</p><p>Letâ€™s Encrypt å…è´¹è¯ä¹¦çš„ç­¾å‘/ç»­ç­¾éƒ½æ˜¯è„šæœ¬è‡ªåŠ¨åŒ–çš„ï¼Œå®˜æ–¹æä¾›äº†å‡ ç§è¯ä¹¦çš„ç”³è¯·æ–¹å¼æ–¹æ³•ï¼Œç‚¹å‡» <a href="https://letsencrypt.org/docs/client-options/">æ­¤å¤„</a> å¿«é€Ÿæµè§ˆã€‚</p><p>å®˜æ–¹æ¨èä½¿ç”¨ Certbot å®¢æˆ·ç«¯æ¥ç­¾å‘è¯ä¹¦ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è·å–å…è´¹çš„ Letâ€™s Encrypt è¯ä¹¦ã€‚Certbot æ”¯æŒæ‰€æœ‰ Unix å†…æ ¸çš„æ“ä½œç³»ç»Ÿã€‚</p><h2 id="å®‰è£…-Certbot-å¹¶ç”Ÿæˆè¯ä¹¦"><a href="#å®‰è£…-Certbot-å¹¶ç”Ÿæˆè¯ä¹¦" class="headerlink" title="å®‰è£… Certbot å¹¶ç”Ÿæˆè¯ä¹¦"></a>å®‰è£… Certbot å¹¶ç”Ÿæˆè¯ä¹¦</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum <span class="keyword">install</span> certbot -y</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥å…ˆé€šè¿‡è¿è¡Œ certbot è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æ— é—®é¢˜åˆ™ç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p><p>æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œæœ‰å…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚ Nginx æˆ–è€… Apacheï¼‰å ç”¨äº† 80 ç«¯å£å’Œ 443 ç«¯å£ï¼Œå°±å¿…é¡»å…ˆåœæ­¢è¿™äº›æœåŠ¡ï¼Œåœ¨è¯ä¹¦ç”Ÿæˆå®Œæ¯•åå†å¯ç”¨ã€‚<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -tunlp <span class="string">| grep :443</span></span><br><span class="line">$ netstat -tunlp <span class="string">| grep :80</span></span><br></pre></td></tr></table></figure></p><p>å¦åˆ™åœ¨æ‰§è¡Œä¸‹ä¸€æ­¥ç”Ÿæˆè¯ä¹¦æ—¶ä¼šæŠ¥ <code>Problem binding to port 80: Could not bind to IPv4 or IPv6.</code>ã€‚</p><p>æ¥ç€ç»§ç»­ç”Ÿæˆè¯ä¹¦<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ certbot certonly <span class="attr">--standalone</span> -d www<span class="selector-class">.fcj</span>.one</span><br></pre></td></tr></table></figure></p><p>è¯ä¹¦ç”Ÿæˆå®Œæ¯•åï¼Œå¯ä»¥åœ¨ <code>/etc/letsencrypt/live/</code> ç›®å½•ä¸‹çœ‹åˆ°å¯¹åº”åŸŸåçš„æ–‡ä»¶å¤¹æ‰¾åˆ°è¯ä¹¦ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥ç”Ÿæˆè¯ä¹¦å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é…ç½® Apache æœåŠ¡å™¨ï¼Œå¯ç”¨ HTTPSã€‚</p><h2 id="Apache-å¯ç”¨-HTTPS"><a href="#Apache-å¯ç”¨-HTTPS" class="headerlink" title="Apache å¯ç”¨ HTTPS"></a>Apache å¯ç”¨ HTTPS</h2><p>æ‰“å¼€ Apache å®‰è£…ç›®å½•ä¸‹ conf ç›®å½•ä¸­çš„ httpd.conf æ–‡ä»¶ï¼Œæ‰¾åˆ°ä»¥ä¸‹å†…å®¹å¹¶å»æ‰ â€˜#â€™ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LoadModule</span> ssl_module modules/mod_ssl.so</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸å­˜åœ¨å¯æ‰‹åŠ¨æ·»åŠ ï¼Œå‰ææ˜¯å·²ç»å®‰è£… ssl æ¨¡å—ï¼š<code>yum install mod_ssl</code>ã€‚</p><p>ç„¶ååœ¨ <code>/etc/httpd/conf/httpd.conf</code> æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:<span class="number">443</span>&gt;</span><br><span class="line">    DocumentRoot <span class="string">&quot;/var/www/html&quot;</span></span><br><span class="line">    ServerName www.fcj.one</span><br><span class="line">    SSLEngine on</span><br><span class="line">    SSLCertificateFile <span class="regexp">/etc/</span>letsencrypt<span class="regexp">/live/</span>www.fcj.one/cert.pem</span><br><span class="line">    SSLCertificateKeyFile <span class="regexp">/etc/</span>letsencrypt<span class="regexp">/live/</span>www.fcj.one/privkey.pem</span><br><span class="line">    SSLCertificateChainFile <span class="regexp">/etc/</span>letsencrypt<span class="regexp">/live/</span>www.fcj.one/chain.pem</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><p>é‡å¯ Apache æœåŠ¡å™¨ï¼š<code>service httpd restart</code></p><h2 id="è¯ä¹¦ç»­çº¦"><a href="#è¯ä¹¦ç»­çº¦" class="headerlink" title="è¯ä¹¦ç»­çº¦"></a>è¯ä¹¦ç»­çº¦</h2><p>Letâ€™s Encrypt æä¾›çš„å…è´¹è¯ä¹¦åªæœ‰ 90 å¤©çš„æœ‰æ•ˆæœŸï¼Œå¿…é¡»åœ¨è¯ä¹¦åˆ°æœŸä¹‹å‰ï¼Œé‡æ–°è·å–è¿™äº›è¯ä¹¦ï¼Œ</p><p>certbot ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å‘½ä»¤ <code>certbot renew</code>ã€‚ é€šè¿‡è¿™ä¸ªå‘½ä»¤ï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥ç³»ç»Ÿå†…çš„è¯ä¹¦ï¼Œå¹¶ä¸”è‡ªåŠ¨æ›´æ–°è¿™äº›è¯ä¹¦ã€‚</p><p>è¿™é‡Œç›´æ¥ç”¨ crontab è®¾ç½®æ¯æœˆå®šæ—¶æ›´æ–°å³å¯ã€‚<a href="http://blog.fcj.one/centos-crontab.html">crontab ç”¨æ³•å‚è€ƒ</a></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">4</span> * */<span class="number">2</span> * certbot renew --pre-hook <span class="string">&quot;systemctl stop httpd&quot;</span> --post-hook <span class="string">&quot;systemctl start httpd&quot;</span></span><br></pre></td></tr></table></figure><p>æ¯éš”ä¸¤ä¸ªæœˆå‡Œæ™¨å››ç‚¹è¿›è¡Œè¯ä¹¦æ›´æ–°ï¼Œå¹¶å…ˆè¡Œåœæ­¢ httpd æœåŠ¡ï¼Œä¹‹åå†å¼€å¯ã€‚</p><h2 id="é˜²ç«å¢™å¼€æ”¾-443-ç«¯å£"><a href="#é˜²ç«å¢™å¼€æ”¾-443-ç«¯å£" class="headerlink" title="é˜²ç«å¢™å¼€æ”¾ 443 ç«¯å£"></a>é˜²ç«å¢™å¼€æ”¾ 443 ç«¯å£</h2><p>å¦‚æœä½ è®¾ç½®äº†é˜²ç«å¢™ï¼Œè¯·åœ¨é˜²ç«å¢™ä¸­å¼€å¯ 443 ç«¯å£ã€‚</p><p>å¦‚æœæ˜¯ firewalld çš„å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd <span class="attribute">--add-service</span>=http</span><br><span class="line">sudo firewall-cmd <span class="attribute">--add-service</span>=https</span><br><span class="line">sudo firewall-cmd --runtime-to-permanent</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæ˜¯iptablesçš„å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -<span class="selector-tag">I</span> <span class="selector-tag">INPUT</span> -<span class="selector-tag">p</span> tcp -m tcp <span class="attr">--dport</span> <span class="number">80</span> -j ACCEPT</span><br><span class="line">sudo iptables -<span class="selector-tag">I</span> <span class="selector-tag">INPUT</span> -<span class="selector-tag">p</span> tcp -m tcp <span class="attr">--dport</span> <span class="number">443</span> -j ACCEPT</span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://www.jianshu.com/p/3aa5cb957d9f">https://www.jianshu.com/p/3aa5cb957d9f</a></li><li><a href="https://blog.csdn.net/qq_20240999/article/details/87618667">https://blog.csdn.net/qq_20240999/article/details/87618667</a></li><li><a href="http://www.cnblogs.com/hi-bazinga/archive/2012/04/23/2466605.html">http://www.cnblogs.com/hi-bazinga/archive/2012/04/23/2466605.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;HTTPSï¼ˆå…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„ HTTP é€šé“ï¼Œç®€å•è®²æ˜¯ HTTP çš„å®‰å…¨ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;å³ HTTP ä¸‹åŠ å…¥ SSL å±‚ï¼ŒHTTPS çš„å®‰å…¨åŸºç¡€æ˜¯ SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦ SSLã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Letâ€™s Encrypt ç­¾å‘å…è´¹è¯ä¹¦å®ç° Apache HTTPSã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="apache" scheme="http://blog.fcj.one/tags/apache/"/>
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
      <category term="vps" scheme="http://blog.fcj.one/tags/vps/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Travis CI è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢æœ€ä½³å®è·µ</title>
    <link href="http://blog.fcj.one/hexo-travis.html"/>
    <id>http://blog.fcj.one/hexo-travis.html</id>
    <published>2019-10-22T20:16:01.000Z</published>
    <updated>2019-10-22T20:16:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>.<br><span id="more"></span></p><h2 id="Travis-CI-ä»‹ç»"><a href="#Travis-CI-ä»‹ç»" class="headerlink" title="Travis-CI ä»‹ç»"></a>Travis-CI ä»‹ç»</h2><p>ã€€ã€€CI å³ Continuous Integrationï¼Œè¯‘ä¸ºæŒç»­é›†æˆã€‚æŒç»­é›†æˆæŒ‡çš„æ˜¯åªè¦ä»£ç æœ‰å˜æ›´ï¼Œéƒ½ä¼šè§¦å‘ CI æœåŠ¡å™¨è‡ªåŠ¨å¯¹é¡¹ç›®è¿è¡Œæ„å»ºå’Œæµ‹è¯•ï¼Œåé¦ˆç»“æœï¼Œæœ€ç»ˆç”šè‡³è‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•æˆ–ç”Ÿäº§ç¯å¢ƒã€‚</p><p>ã€€ã€€Travis CI æ˜¯ä¸€ä¸ªæä¾›æŒç»­é›†æˆåŠŸèƒ½çš„å¹³å°ï¼Œåœ¨ Github ä¸Šï¼Œå¯ä»¥æ·»åŠ  Travis CIã€€åº”ç”¨ï¼Œå½“æœ‰ code push æ—¶å€™ï¼Œä¼šæ¨é€é€šçŸ¥åˆ° Travisï¼Œæ ¹æ®è®¾ç½®çš„è„šæœ¬è¿è¡ŒæŒ‡å®šä»»åŠ¡ã€‚å’Œ Jenkins ä¸åŒï¼ŒTravis CI æ˜¯ç”±å®˜æ–¹è¿œç«¯æä¾›æœåŠ¡å™¨è€Œæ— éœ€è‡ªå·±æ­å»ºï¼Œä¸”åªæ”¯æŒ Githubï¼Œä¸æ”¯æŒå…¶ä»–ä»£ç æ‰˜ç®¡æœåŠ¡ã€‚</p><p>ç›®å‰æœ‰ä¸¤ä¸ªç«™ç‚¹:</p><ol><li><a href="https://travis-ci.org">travis-ci.org</a> å¯¹äºæ‰€æœ‰ public é¡¹ç›®å®Œå…¨å…è´¹</li><li><a href="https://travis-ci.com">travis-ci.com</a> åªé’ˆå¯¹ private é¡¹ç›®ï¼Œæä¾›æ›´å¤šä¸€äº›é¢å¤–åŠŸèƒ½ï¼Œå¦‚ cacheï¼Œå¹¶è¡Œ build ä¸ªæ•°</li></ol><blockquote><p>ä¸¤ä¸ªç«™ç‚¹åªèƒ½çœ‹åˆ°å„è‡ªçš„é¡¹ç›®ï¼Œä¸èƒ½é€šç”¨ã€‚</p></blockquote><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>é€šå¸¸æ›´æ–°ä¸€ç¯‡ Hexo åšå®¢æ–‡ç« ï¼ŒåŸºæœ¬æµç¨‹æ˜¯ï¼š</p><ol><li>æœ¬åœ°æ–°å»º post é¡µé¢</li><li>åœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œç”¨ Markdown è¯­æ³•ç¼–è¾‘æ–°å»ºé¡µé¢</li><li>æœ¬åœ°ç”Ÿæˆ public æ–‡ä»¶ï¼š<code>hexo g &amp;&amp; gulp</code></li><li>å¯åŠ¨æœ¬åœ°æµ‹è¯•web serverï¼š<code>hexo s --debug</code></li><li>æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:4000/</code>, æµè§ˆç”Ÿæˆæ–‡ç« </li><li>å¦‚æœæ»¡æ„ï¼Œå³å¯éƒ¨ç½²åˆ°Github pageä»“åº“æˆ–è€… VPS ä¸Šï¼š<code>hexo d</code></li></ol><p>ä¸‹é¢ä¸»è¦ä»‹ç»å¦‚ä½•åˆ©ç”¨ Travis CI è‡ªåŠ¨å®Œæˆç¬¬ 3-6 æ­¥.</p><h3 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h3><ul><li>ç”Ÿæˆ SSH key</li><li>æ‰˜ç®¡ Hexo åšå®¢çš„ Githubä»“åº“ï¼Œhexo åˆ†æ”¯ä¸ºæºä»£ç ï¼Œmaster åˆ†æ”¯å­˜æ”¾ç”Ÿæˆçš„é™æ€åšå®¢æ–‡ä»¶ã€‚<a href="http://blog.fcj.one/hexo-multi-snyc.html">å‚è€ƒ</a></li><li>å‘å¸ƒåšå®¢çš„ VPSï¼Œå¹¶å¯ä»¥é€šè¿‡ hexo-deployer-git å‘å¸ƒã€‚<a href="http://blog.fcj.one/hexo-git-vps.html">å‚è€ƒ</a></li><li>å·²ç»é…ç½®å¥½ gulp å®ç°åšæ–‡å‹ç¼©ã€‚<a href="http://blog.fcj.one/hexo-gulp-post.html">å‚è€ƒ</a></li></ul><h3 id="å¼€å¯-Travis-CI"><a href="#å¼€å¯-Travis-CI" class="headerlink" title="å¼€å¯ Travis CI"></a>å¼€å¯ Travis CI</h3><p>ç›´æ¥è¿›å…¥ <a href="https://travis-ci.org">travis-ci.org</a> å®˜ç½‘ï¼Œç”¨ Github è´¦å·æˆæƒç™»å½•ã€‚åœ¨å³ä¸Šè§’è´¦æˆ·å¤´åƒå¤„ç‚¹å‡»è¿›å…¥ Settingsï¼Œåœ¨ Repositories Tab é¡µç‚¹å‡» Sync now åŒæ­¥ä½ çš„ Github é¡¹ç›®ã€‚é€‰ä¸­ Hexo åšå®¢é¡¹ç›®å°†é»˜è®¤çš„ off æ”¹å˜ä¸º on å¼€å¯é¡¹ç›®çš„æŒç»­é›†æˆã€‚<br><img src="https://changingfond.oss-cn-hangzhou.aliyuncs.com/19-10-22/QQ%E6%88%AA%E5%9B%BE20191023193143.jpg" alt=""></p><h3 id="åŠ å¯†-SSH-ç§é’¥"><a href="#åŠ å¯†-SSH-ç§é’¥" class="headerlink" title="åŠ å¯† SSH ç§é’¥"></a>åŠ å¯† SSH ç§é’¥</h3><p>ã€€ã€€å½“ push åˆ° github ä»“åº“æ—¶ travis è‡ªåŠ¨è¯»å–ä¸€ä¸ªåä¸º <code>.travis.yml</code> é…ç½®æ–‡ä»¶æ¥å®Œæˆ hexo çš„ generate å’Œ deployï¼Œä½†æ˜¯ deploy éœ€è¦ VPS å’Œ Github çš„ ssh å†™æƒé™ï¼Œæ‰€ä»¥éœ€è¦å°† ssh key ä¸Šä¼ åˆ°é¡¹ç›®ä¸­ï¼Œä¸ºæ–¹ä¾¿è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæœ¬åœ°ç³»ç»Ÿã€Github å’Œ VPS ä¸Šéƒ½ä½¿ç”¨åŒä¸€å¥— ssh å…¬é’¥å’Œç§˜é’¥ ï¼ˆä¸‹æ–‡çš„ id_rsa å’Œ id_rsa.pubï¼‰ã€‚å› ä¸º github çš„é¡¹ç›®æ˜¯å…¬å¼€çš„ï¼Œéœ€è¦å°† ssh key åŠ å¯†æ”¾åˆ°é¡¹ç›®ä¸­ï¼Œtravis è¿è¡Œæ—¶å†è§£å¯†ç”Ÿæˆ keyï¼Œä¿è¯ç§˜é’¥å®‰å…¨æ€§ã€‚<br>ã€€ã€€travis åŠ å¯†å‘½ä»¤æ˜¯è¦é€šè¿‡ gem å®‰è£…çš„ï¼Œgem ä¾èµ– ruby ç¯å¢ƒï¼Œè¯·ç¡®ä¿ ruby å·²ç»å®‰è£…ã€‚gem åœ¨å›½å†…ä¸å¤ªå¥½è®¿é—®ï¼Œå»ºè®®åœ¨ vps ä¸Šåšå®¢çš„é¡¹ç›®ç›®å½•é‡Œï¼ˆæ²¡æœ‰å°± cloneä¸€ä¸ªï¼Œå› ä¸ºä¸‹é¢çš„ â€“add ä¼šä¿®æ”¹ .travis.yml ï¼‰å®‰è£…æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gem install travis</span><br><span class="line">travis login                        <span class="comment"># ä½¿ç”¨ github å¸å·å’Œå¯†ç ç™»å½•</span></span><br><span class="line">travis encrypt-file id_rsa  --add   <span class="comment"># åŠ å¯† id_rsa ç§é’¥ï¼Œ--add å°†è§£å¯†å‘½ä»¤æ·»åŠ åˆ° .travis.yml</span></span><br></pre></td></tr></table></figure><h3 id="é›†æˆ-build-å›¾æ ‡"><a href="#é›†æˆ-build-å›¾æ ‡" class="headerlink" title="é›†æˆ build å›¾æ ‡"></a>é›†æˆ build å›¾æ ‡</h3><p>åœ¨ Travis CI æ§åˆ¶å°é‡Œï¼Œç‚¹å‡» build:passing å›¾æ ‡ï¼Œé€‰æ‹© Markdown æ ·å¼ï¼Œç²˜è´´åˆ°é¡¹ç›® Readme é‡Œå³å¯ã€‚</p><h3 id="travis-yml"><a href="#travis-yml" class="headerlink" title=".travis.yml"></a>.travis.yml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">language: node_js</span><br><span class="line">node_js: 8</span><br><span class="line">install:</span><br><span class="line">- npm install -g hexo-cli</span><br><span class="line">- npm install -g hexo-deployer-git</span><br><span class="line">- npm install -g gulp</span><br><span class="line">- npm install</span><br><span class="line">addons:</span><br><span class="line">  ssh_known_hosts: host-ip:ssh-port</span><br><span class="line">script:</span><br><span class="line">- hexo g</span><br><span class="line">- gulp</span><br><span class="line">- hexo d</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">  - hexo</span><br><span class="line">before_install:</span><br><span class="line">- openssl aes-256-cbc -K <span class="variable">$encrypted_34f58abb81d6_key</span> -iv <span class="variable">$encrypted_34f58abb81d6_iv</span></span><br><span class="line">  -<span class="keyword">in</span> id_rsa.enc -out ~/.ssh/id_rsa -d</span><br><span class="line">- <span class="built_in">chmod</span> 600 ~/.ssh/id_rsa</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåï¼Œä»¥åå½“ä½ æœ¬åœ°ç¼–è¾‘å®Œ md æ–‡ä»¶åï¼Œåªéœ€è¦è¿è¡Œ git pushï¼Œæ¨é€ä»£ç åˆ° Github å°±ä¼šè§¦å‘ Travis CI è‡ªåŠ¨ç”Ÿæˆ buildï¼Œéƒ¨ç½²æ–°çš„åšå®¢å†…å®¹ã€‚</p><h2 id="travis-yml-å­—æ®µè§£æ"><a href="#travis-yml-å­—æ®µè§£æ" class="headerlink" title=".travis.yml å­—æ®µè§£æ"></a>.travis.yml å­—æ®µè§£æ</h2><h3 id="ssh-known-hosts"><a href="#ssh-known-hosts" class="headerlink" title="ssh known_hosts"></a>ssh known_hosts</h3><p>ã€€ã€€å› ä¸º travis-ci é»˜è®¤åªæ·»åŠ äº† github.com, gist.github.com å’Œ ssh.github.com ä¸º known_hostsï¼Œhexo d æ‰§è¡Œæ—¶ä¼šæç¤ºæ˜¯å¦æ·»åŠ åœ°å€åˆ° known_hostsï¼Œä½†æ˜¯ travis-ci é‡Œä¸èƒ½è¾“å…¥ç¡®è®¤ï¼Œæ‰€ä»¥éœ€è¦å°†æœåŠ¡å™¨çš„ IP å’Œç«¯å£æ·»åŠ åˆ° known_hosts<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addons:</span><br><span class="line">  ssh_known_hosts: ssh_known_hosts: host-ip:ssh-port</span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.karlzhou.com/2016/05/28/travis-ci-deploy-blog/">https://www.karlzhou.com/2016/05/28/travis-ci-deploy-blog/</a></li><li><a href="https://blog.csdn.net/u012373815/article/details/53574002">https://blog.csdn.net/u012373815/article/details/53574002</a></li><li><a href="https://blog.csdn.net/qq_23079443/article/details/79015225">https://blog.csdn.net/qq_23079443/article/details/79015225</a></li><li><a href="https://segmentfault.com/a/1190000005687985">https://segmentfault.com/a/1190000005687985</a></li><li><a href="http://blog.acwong.org/2016/03/20/auto-deploy-hexo-with-travis-CI/">http://blog.acwong.org/2016/03/20/auto-deploy-hexo-with-travis-CI/</a></li><li><a href="http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html">http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;.&lt;br&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="vps" scheme="http://blog.fcj.one/tags/vps/"/>
    
      <category term="hexo" scheme="http://blog.fcj.one/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo åšå®¢é™æ€èµ„æºå‹ç¼©</title>
    <link href="http://blog.fcj.one/hexo-gulp-post.html"/>
    <id>http://blog.fcj.one/hexo-gulp-post.html</id>
    <published>2019-07-17T14:32:12.000Z</published>
    <updated>2022-04-29T07:03:48.310Z</updated>
    
    <content type="html"><![CDATA[<p>é™æ€èµ„æºå‹ç¼©å¯ä»¥ä¼˜åŒ–ç½‘é¡µçš„è®¿é—®é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p><span id="more"></span><ol><li>åœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> gulp -g</span><br><span class="line">$ npm <span class="keyword">install</span> gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save</span><br></pre></td></tr></table></figure></li><li>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹æ–°å»º gulpfile.jsï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&#x27;gulp-minify-css&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlmin&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line"><span class="comment">// å‹ç¼© public ç›®å½• css</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-css&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.css&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">minifycss</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å‹ç¼© public ç›®å½• html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-html&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">         <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">         <span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line">         <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line">         <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å‹ç¼© public/js ç›®å½• js</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;minify-js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;./public/**/*.js&#x27;</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ‰§è¡Œ gulp å‘½ä»¤æ—¶æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;minify-html&#x27;</span>,<span class="string">&#x27;minify-css&#x27;</span>,<span class="string">&#x27;minify-js&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure></li><li>æ‰§è¡Œ hexo clean &amp; hexo g &amp;&amp; gulp å°±ä¼šæ ¹æ® gulpfile.js ä¸­çš„é…ç½®ï¼Œå¯¹ public ç›®å½•ä¸­çš„é™æ€èµ„æºæ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é™æ€èµ„æºå‹ç¼©å¯ä»¥ä¼˜åŒ–ç½‘é¡µçš„è®¿é—®é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="hexo" scheme="http://blog.fcj.one/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>åç«¯ä¹¦å•</title>
    <link href="http://blog.fcj.one/backend-book.html"/>
    <id>http://blog.fcj.one/backend-book.html</id>
    <published>2019-05-30T20:58:51.000Z</published>
    <updated>2022-04-29T07:03:48.307Z</updated>
    
    <content type="html"><![CDATA[<p>è¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ã€‚</p><span id="more"></span><ul><li>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ å·Iï¼šåŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬10ç‰ˆï¼‰ã€‹</li><li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</li><li>ã€ŠJavaé«˜å¹¶å‘ç¼–ç¨‹è¯¦è§£ï¼šå¤šçº¿ç¨‹ä¸æ¶æ„è®¾è®¡ã€‹</li><li>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼šJVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</li><li>ã€ŠSpringå®æˆ˜ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹</li><li>ã€Šæ·±å…¥æµ…å‡ºSpring Boot 2.xã€‹</li><li>ã€ŠSpring Cloudå¾®æœåŠ¡å®æˆ˜ã€‹</li><li>ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹</li><li>ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹</li><li>ã€Šé«˜æ€§èƒ½MySQLï¼ˆç¬¬3ç‰ˆï¼‰ã€‹</li><li>ã€ŠMySQLæŠ€æœ¯å†…å¹•ï¼šInnoDBå­˜å‚¨å¼•æ“ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</li><li>ã€Šå¤§å‹ç½‘ç«™ç³»ç»Ÿä¸Javaä¸­é—´ä»¶å®è·µã€‹</li><li>ã€Šä»Paxosåˆ°Zookeeperï¼šåˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µã€‹</li><li>ã€ŠTomcatæ¶æ„è§£æã€‹</li><li>ã€ŠNettyæƒå¨æŒ‡å—ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</li><li>ã€Šæ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹•ï¼ˆä¿®è®¢ç‰ˆï¼‰ã€‹</li><li>ã€Šäº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯â€”â€”è·Ÿå¼€æ¶›å­¦æ­å»ºé«˜å¯ç”¨é«˜å¹¶å‘ç³»ç»Ÿã€‹</li><li>ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</li><li>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æï¼šJavaè¯­è¨€æè¿°ï¼ˆåŸä¹¦ç¬¬3ç‰ˆï¼‰ã€‹</li><li>ã€Šå‰‘æŒ‡Offerï¼šåä¼é¢è¯•å®˜ç²¾è®²å…¸å‹ç¼–ç¨‹é¢˜ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹ç¬”è®°" scheme="http://blog.fcj.one/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Java" scheme="http://blog.fcj.one/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Git å¸¸ç”¨å‘½ä»¤æŒ‡å—</title>
    <link href="http://blog.fcj.one/git-tutorial.html"/>
    <id>http://blog.fcj.one/git-tutorial.html</id>
    <published>2019-03-25T18:12:20.000Z</published>
    <updated>2020-09-25T17:57:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>*<br><span id="more"></span></p><h2 id="é¦–æ¬¡æäº¤ä»£ç è‡³è¿œç¨‹ä»“åº“"><a href="#é¦–æ¬¡æäº¤ä»£ç è‡³è¿œç¨‹ä»“åº“" class="headerlink" title="é¦–æ¬¡æäº¤ä»£ç è‡³è¿œç¨‹ä»“åº“"></a>é¦–æ¬¡æäº¤ä»£ç è‡³è¿œç¨‹ä»“åº“</h2><h3 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> repository_url</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> project_folder</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">touch</span> README.md</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add README.md</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;add README&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push -u origin master</span></span><br></pre></td></tr></table></figure><h3 id="æœ¬åœ°ä»“åº“ç›®å½•å·²å­˜åœ¨"><a href="#æœ¬åœ°ä»“åº“ç›®å½•å·²å­˜åœ¨" class="headerlink" title="æœ¬åœ°ä»“åº“ç›®å½•å·²å­˜åœ¨"></a>æœ¬åœ°ä»“åº“ç›®å½•å·²å­˜åœ¨</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> existing_folder</span><br><span class="line"><span class="variable">$</span> git init</span><br><span class="line"><span class="variable">$</span> git remote add origin repository_url</span><br><span class="line"><span class="variable">$</span> git add .</span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line"><span class="variable">$</span> git push <span class="literal">-u</span> origin master</span><br></pre></td></tr></table></figure><h2 id="Git-åˆ†æ”¯å‘½ä»¤"><a href="#Git-åˆ†æ”¯å‘½ä»¤" class="headerlink" title="Git åˆ†æ”¯å‘½ä»¤"></a>Git åˆ†æ”¯å‘½ä»¤</h2><ul><li><p>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git branch          <span class="comment">#  æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª * å·</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ–°åˆ†æ”¯</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git checkout -b dev <span class="comment">#  ç›¸å½“äºä»¥ä¸‹ä¸¤æ¡å‘½ä»¤</span></span><br><span class="line"><span class="variable">$ </span>git branch dev      <span class="comment">#  æ–°å»º dev åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git checkout dev    <span class="comment">#  åˆ‡æ¢åˆ° dev åˆ†æ”¯</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ‡æ¢åˆ†æ”¯</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git checkout dev    <span class="comment">#  åˆ‡æ¢åˆ° dev åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git add .</span><br><span class="line"><span class="variable">$ </span>git commit -m <span class="string">&quot;dev&quot;</span> <span class="comment">#  åœ¨ dev åˆ†æ”¯ä¸Šæäº¤</span></span><br></pre></td></tr></table></figure></li><li><p>åˆå¹¶åˆ†æ”¯</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git checkout master <span class="comment">#  åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git merge dev       <span class="comment">#  å°† dev åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼ˆä¸»åˆ†æ”¯ï¼‰</span></span><br><span class="line"><span class="variable">$ </span>git push            <span class="comment">#  å‘è¿œç¨‹ä»“åº“æäº¤ master åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git checkout dev    <span class="comment">#  åˆ‡æ¢å› dev åˆ†æ”¯</span></span><br></pre></td></tr></table></figure></li><li><p>æ¨é€åˆ†æ”¯</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">push</span> origin dev <span class="meta">#  å‘è¿œç¨‹ä»“åº“æ¨é€ dev åˆ†æ”¯</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤åˆ†æ”¯</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git brach -d dev    <span class="comment">#  åˆ é™¤æœ¬åœ° dev åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git push orgin <span class="symbol">:dev</span> <span class="comment">#  åˆ é™¤è¿œç¨‹ dev åˆ†æ”¯</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="fork-é¡¹ç›®åä¸æºé¡¹ç›®åŒæ­¥æ›´æ–°"><a href="#fork-é¡¹ç›®åä¸æºé¡¹ç›®åŒæ­¥æ›´æ–°" class="headerlink" title="fork é¡¹ç›®åä¸æºé¡¹ç›®åŒæ­¥æ›´æ–°"></a>fork é¡¹ç›®åä¸æºé¡¹ç›®åŒæ­¥æ›´æ–°</h2><ol><li><p>é…ç½®ä¸Šæ¸¸é¡¹ç›®åœ°å€ã€‚å°†ä½  fork çš„é¡¹ç›®åœ°å€é…ç½®åˆ°è‡ªå·±çš„é¡¹ç›®ä¸Šã€‚æ¯”å¦‚æˆ‘ fork äº†ä¸€ä¸ªé¡¹ç›®ï¼ŒåŸé¡¹ç›®æ˜¯ theme-next/hexo-theme-next.gitï¼Œæˆ‘çš„é¡¹ç›®å°±æ˜¯ ChangingFond/hexo-theme-next.gitã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥é…ç½®ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add upstream https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span>.git</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹ä¸€ä¸‹é…ç½®çŠ¶å†µï¼Œä¸Šæ¸¸é¡¹ç›®çš„åœ°å€å·²ç»è¢«åŠ è¿›æ¥äº†ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">origin  git@github.com:ChangingFond/hexo-theme-<span class="keyword">next</span>.git.git (fetch)</span><br><span class="line">origin  git@github.com:ChangingFond/hexo-theme-<span class="keyword">next</span>.git.git (push)</span><br><span class="line">upstream    https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span>.git (fetch)</span><br><span class="line">upstream    https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span>.git (push)</span><br></pre></td></tr></table></figure></li><li><p>è·å–ä¸Šæ¸¸é¡¹ç›®æ›´æ–°ã€‚ä½¿ç”¨ fetch å‘½ä»¤æ›´æ–°ï¼Œfetch åä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ upstream/master ä¸Šã€‚</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git fetch upstream</span><br></pre></td></tr></table></figure></li><li><p>åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ã€‚åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œåˆå¹¶ upstream/master åˆ†æ”¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge upstream/master</span></span><br></pre></td></tr></table></figure></li><li><p>æäº¤æ¨é€ã€‚æ ¹æ®è‡ªå·±æƒ…å†µæäº¤æ¨é€è‡ªå·±é¡¹ç›®çš„ä»£ç ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">push</span> <span class="built_in">origin</span> master</span><br></pre></td></tr></table></figure></li><li><p>ç”±äºé¡¹ç›®å·²ç»é…ç½®äº†ä¸Šæ¸¸é¡¹ç›®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœ fork çš„é¡¹ç›®å†æ¬¡æ›´æ–°ï¼Œé‡å¤æ­¥éª¤ 3ã€4ã€5å³å¯ã€‚</p></li></ol><h2 id="Git-è¿œç¨‹åˆ†æ”¯è¦†ç›–æœ¬åœ°åˆ†æ”¯"><a href="#Git-è¿œç¨‹åˆ†æ”¯è¦†ç›–æœ¬åœ°åˆ†æ”¯" class="headerlink" title="Git è¿œç¨‹åˆ†æ”¯è¦†ç›–æœ¬åœ°åˆ†æ”¯"></a>Git è¿œç¨‹åˆ†æ”¯è¦†ç›–æœ¬åœ°åˆ†æ”¯</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> git fetch --<span class="keyword">all</span></span><br><span class="line"><span class="symbol">$</span> git reset --hard origin/master (master ä¸ºè¦æ‹‰å–çš„è¿œç¨‹åˆ†æ”¯å)</span><br><span class="line"><span class="symbol">$</span> git pull</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;*&lt;br&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹ç¬”è®°" scheme="http://blog.fcj.one/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Git" scheme="http://blog.fcj.one/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Elasticsearché…ç½®æ–‡ä»¶è¯¦è§£</title>
    <link href="http://blog.fcj.one/es-config.html"/>
    <id>http://blog.fcj.one/es-config.html</id>
    <published>2019-02-19T14:16:23.000Z</published>
    <updated>2022-04-29T07:03:48.308Z</updated>
    
    <content type="html"><![CDATA[<p>Elasticsearchçš„é…ç½®æ–‡ä»¶ä½äº/es-path/conf/elasticsearch.ymlï¼Œæœ¬æ–‡åŸºäºelasticsearch 6.xç‰ˆæœ¬å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚<br>å¯¹äºæœªæåŠçš„é…ç½®å‚æ•°å¯æŸ¥é˜… <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/modules.html</a></p><span id="more"></span><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      Before you <span class="built_in">set</span> out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">the most important settings you may want to configure <span class="keyword">for</span> a production cluster.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Use a descriptive name for your cluster:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®esçš„é›†ç¾¤åç§°ï¼Œé»˜è®¤ä¸ºelasticsearchã€‚esä¼šè‡ªåŠ¨å‘ç°åœ¨åŒä¸€ç½‘æ®µä¸‹çš„esé›†ç¾¤ï¼Œå¦‚æœåœ¨åŒä¸€ç½‘æ®µä¸‹æœ‰å¤šä¸ªé›†ç¾¤ï¼Œå¯ä»¥ç”¨æ­¤å±æ€§æ¥åŒºåˆ†ä¸åŒçš„é›†ç¾¤ã€‚</span></span><br><span class="line">cluster.name: elasticsearch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Use a descriptive name for the node:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŠ‚ç‚¹åç§°</span></span><br><span class="line">node.name: node-master</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># æŒ‡å®šè¯¥èŠ‚ç‚¹æ˜¯å¦æœ‰èµ„æ ¼è¢«é€‰ä¸¾æˆä¸ºmasterï¼Œé»˜è®¤æ˜¯trueï¼Œesé»˜è®¤é›†ç¾¤ä¸­çš„ç¬¬ä¸€å°æœºå™¨ä¸ºmasterï¼Œå¦‚æœè¿™å°æœºå™¨å®•æœºå°±ä¼šé‡æ–°é€‰ä¸¾masterã€‚</span></span></span><br><span class="line">node.master: true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># æŒ‡å®šè¯¥èŠ‚ç‚¹æ˜¯å¦å­˜å‚¨ç´¢å¼•æ•°æ®ï¼Œé»˜è®¤ä¸ºtrueã€‚</span></span></span><br><span class="line">node.data: true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªèŠ‚ç‚¹å¯ä»¥åœ¨åŒä¸€ä¸ªå®‰è£…è·¯å¾„å¯åŠ¨ï¼Œå¦‚æœæƒ³è®©esåªå¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹è®¾ç½®</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">node.max_local_storage_nodes: 1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Add custom attributes to the node:</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># æŒ‡å®šèŠ‚ç‚¹çš„éƒ¨è½å±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”é›†ç¾¤æ›´å¤§çš„èŒƒå›´ã€‚</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">node.attr.rack: r1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ----------------------------------- Index ------------------------------------</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ç´¢å¼•çš„åˆ†ç‰‡æ•°,é»˜è®¤ä¸º5</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.number_of_shards: 5</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ç´¢å¼•çš„å‰¯æœ¬æ•°,é»˜è®¤ä¸º1:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.number_of_replicas: 1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®æ–‡ä»¶ä¸­æåˆ°çš„æœ€ä½³å®è·µæ˜¯,å¦‚æœæœåŠ¡å™¨å¤Ÿå¤š,å¯ä»¥å°†åˆ†ç‰‡æé«˜,å°½é‡å°†æ•°æ®å¹³å‡åˆ†å¸ƒåˆ°å¤§é›†ç¾¤ä¸­å»</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ—¶,å¦‚æœå¢åŠ å‰¯æœ¬æ•°é‡å¯ä»¥æœ‰æ•ˆçš„æé«˜æœç´¢æ€§èƒ½</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éœ€è¦æ³¨æ„çš„æ˜¯,<span class="string">&quot;number_of_shards&quot;</span> æ˜¯ç´¢å¼•åˆ›å»ºåä¸€æ¬¡ç”Ÿæˆçš„,åç»­ä¸å¯æ›´æ”¹è®¾ç½®</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&quot;number_of_replicas&quot;</span> æ˜¯å¯ä»¥é€šè¿‡APIå»å®æ—¶ä¿®æ”¹è®¾ç½®çš„</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ç´¢å¼•æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„dataæ–‡ä»¶å¤¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå­˜å‚¨è·¯å¾„ï¼Œç”¨é€—å·éš”å¼€ï¼Œå¦‚ path.data: /path/to/data1,/path/to/data2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">path.data: /path/to/data</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Path to conf files:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®é…ç½®æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">path.conf: /path/to/conf</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Path to log files:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">path.logs: /path/to/logs</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Path to temp files:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ä¸´æ—¶æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„workæ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">path.work: /path/to/work</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Path to plugin files:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ’ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„pluginsæ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">path.plugins: /path/to/plugins</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Lock the memory on startup:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ä¸º<span class="literal">true</span>æ¥é”ä½å†…å­˜ã€‚å› ä¸ºå½“jvmå¼€å§‹swappingæ—¶esçš„æ•ˆç‡ä¼šé™ä½ï¼Œæ‰€ä»¥è¦ä¿è¯å®ƒä¸swapã€‚</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥æŠŠES_MIN_MEMå’ŒES_MAX_MEMä¸¤ä¸ªç¯å¢ƒå˜é‡è®¾ç½®æˆåŒä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ä¿è¯æœºå™¨æœ‰è¶³å¤Ÿçš„å†…å­˜åˆ†é…ç»™esã€‚</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ—¶ä¹Ÿè¦å…è®¸elasticsearchçš„è¿›ç¨‹å¯ä»¥é”ä½å†…å­˜ï¼Œlinuxä¸‹å¯ä»¥é€šè¿‡`<span class="built_in">ulimit</span> -l unlimited`å‘½ä»¤ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">bootstrap.memory_lock: <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">limit</span>.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Cacheéƒ¨åˆ†:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">esæœ‰å¾ˆå¤šç§æ–¹å¼æ¥ç¼“å­˜å…¶å†…éƒ¨ä¸ç´¢å¼•æœ‰å…³çš„æ•°æ®.å…¶ä¸­åŒ…æ‹¬filter cache</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">filter cacheéƒ¨åˆ†:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">filter cacheæ˜¯ç”¨æ¥ç¼“å­˜filtersçš„ç»“æœçš„.é»˜è®¤çš„cache <span class="built_in">type</span>æ˜¯node <span class="built_in">type</span>.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">node <span class="built_in">type</span>çš„æœºåˆ¶æ˜¯æ‰€æœ‰çš„ç´¢å¼•å†…éƒ¨çš„åˆ†ç‰‡å…±äº«filter cache.node <span class="built_in">type</span>é‡‡ç”¨çš„æ–¹å¼æ˜¯LRUæ–¹å¼.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å³:å½“ç¼“å­˜è¾¾åˆ°äº†æŸä¸ªä¸´ç•Œå€¼ä¹‹åï¼Œesä¼šå°†æœ€è¿‘æ²¡æœ‰ä½¿ç”¨çš„æ•°æ®æ¸…é™¤å‡ºfilter cache.ä½¿è®©æ–°çš„æ•°æ®è¿›å…¥es.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™ä¸ªä¸´ç•Œå€¼çš„è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼šindices.cache.filter.size å€¼ç±»å‹ï¼šeg.:512mb 20%ã€‚é»˜è®¤çš„å€¼æ˜¯10%ã€‚</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">out of memoryé”™è¯¯é¿å…è¿‡äºé¢‘ç¹çš„æŸ¥è¯¢æ—¶é›†ç¾¤å‡æ­»</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.è®¾ç½®esçš„ç¼“å­˜ç±»å‹ä¸ºSoft Reference,å®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯æ®æœ‰è¾ƒå¼ºçš„å¼•ç”¨åŠŸèƒ½.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªæœ‰å½“å†…å­˜ä¸å¤Ÿçš„æ—¶å€™,æ‰è¿›è¡Œå›æ”¶è¿™ç±»å†…å­˜,å› æ­¤åœ¨å†…å­˜è¶³å¤Ÿçš„æ—¶å€™,å®ƒä»¬é€šå¸¸ä¸è¢«å›æ”¶.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦å¤–,è¿™äº›å¼•ç”¨å¯¹è±¡è¿˜èƒ½ä¿è¯åœ¨JavaæŠ›å‡ºOutOfMemoryå¼‚å¸¸ä¹‹å‰,è¢«è®¾ç½®ä¸ºnull.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ƒå¯ä»¥ç”¨äºå®ç°ä¸€äº›å¸¸ç”¨å›¾ç‰‡çš„ç¼“å­˜,å®ç°Cacheçš„åŠŸèƒ½,ä¿è¯æœ€å¤§é™åº¦çš„ä½¿ç”¨å†…å­˜è€Œä¸å¼•èµ·OutOfMemory.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨esçš„é…ç½®æ–‡ä»¶åŠ ä¸Šindex.cache.field.type: softå³å¯.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.è®¾ç½®esæœ€å¤§ç¼“å­˜æ•°æ®æ¡æ•°å’Œç¼“å­˜å¤±æ•ˆæ—¶é—´,é€šè¿‡è®¾ç½®index.cache.field.max_size: 50000æŠŠç¼“å­˜fieldçš„æœ€å¤§å€¼è®¾ç½®ä¸º50000,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®index.cache.field.expire: 10mæŠŠè¿‡æœŸæ—¶é—´è®¾ç½®æˆ10åˆ†é’Ÿ.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">index.cache.field.max_size: 50000</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">index.cache.field.expire: 10m</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">index.cache.field.type: soft</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">field dataéƒ¨åˆ†&amp;&amp;circuit breakeréƒ¨åˆ†ï¼š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”¨äºfielddataç¼“å­˜çš„å†…å­˜æ•°é‡,ä¸»è¦ç”¨äºå½“ä½¿ç”¨æ’åº,facetingæ“ä½œæ—¶,elasticsearchä¼šå°†ä¸€äº›çƒ­ç‚¹æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­æ¥æä¾›ç»™å®¢æˆ·ç«¯è®¿é—®,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½†æ˜¯è¿™ç§ç¼“å­˜æ˜¯æ¯”è¾ƒçè´µçš„,æ‰€ä»¥å¯¹å®ƒè¿›è¡Œåˆç†çš„è®¾ç½®.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥ä½¿ç”¨å€¼ï¼šeg:50mb æˆ–è€… 30ï¼…(èŠ‚ç‚¹ node heapå†…å­˜é‡),é»˜è®¤æ˜¯ï¼šunbounded <span class="comment">#indices.fielddata.cache.sizeï¼š unbounded</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">fieldçš„è¶…æ—¶æ—¶é—´.é»˜è®¤æ˜¯-1,å¯ä»¥è®¾ç½®çš„å€¼ç±»å‹: 5m <span class="comment">#indices.fielddata.cache.expire: -1</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">circuit breakeréƒ¨åˆ†:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–­è·¯å™¨æ˜¯elasticsearchä¸ºäº†é˜²æ­¢å†…å­˜æº¢å‡ºçš„ä¸€ç§æ“ä½œ,æ¯ä¸€ç§circuit breakeréƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªå†…å­˜ç•Œé™è§¦å‘æ­¤æ“ä½œ,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™ç§circuit breakerçš„è®¾å®šæœ‰ä¸€ä¸ªæœ€é«˜çº§åˆ«çš„è®¾å®š:indices.breaker.total.limit é»˜è®¤å€¼æ˜¯JVM heapçš„70%.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“å†…å­˜è¾¾åˆ°è¿™ä¸ªæ•°é‡çš„æ—¶å€™ä¼šè§¦å‘å†…å­˜å›æ”¶ã€‚</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦å¤–è¿˜æœ‰ä¸¤ç»„å­è®¾ç½®ï¼š</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">indices.breaker.fielddata.limit:å½“ç³»ç»Ÿå‘ç°fielddataçš„æ•°é‡è¾¾åˆ°ä¸€å®šæ•°é‡æ—¶ä¼šè§¦å‘å†…å­˜å›æ”¶.é»˜è®¤å€¼æ˜¯JVM heapçš„70%</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">indices.breaker.fielddata.overhead:åœ¨ç³»ç»Ÿè¦åŠ è½½fielddataæ—¶ä¼šé¢„ä¼°,å‘ç°è¦åŠ è½½è¿›å†…å­˜çš„å€¼è¶…è¿‡<span class="built_in">limit</span> * overheadæ—¶ä¼šè¿›è¡Œè¿›è¡Œå†…å­˜å›æ”¶.é»˜è®¤æ˜¯1.03</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">indices.breaker.request.limit:è¿™ç§æ–­è·¯å™¨æ˜¯elasticsearchä¸ºäº†é˜²æ­¢OOM(å†…å­˜æº¢å‡º),åœ¨æ¯æ¬¡è¯·æ±‚æ•°æ®æ—¶è®¾å®šäº†ä¸€ä¸ªå›ºå®šçš„å†…å­˜æ•°é‡.é»˜è®¤å€¼æ˜¯40%</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">indices.breaker.request.overhead:åŒä¸Š,ä¹Ÿæ˜¯elasticsearchåœ¨å‘é€è¯·æ±‚æ—¶è®¾å®šçš„ä¸€ä¸ªé¢„ä¼°ç³»æ•°,ç”¨æ¥é˜²æ­¢å†…å­˜æº¢å‡º.é»˜è®¤å€¼æ˜¯1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Translogéƒ¨åˆ†:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¯ä¸€ä¸ªåˆ†ç‰‡(shard)éƒ½æœ‰ä¸€ä¸ªtransaction <span class="built_in">log</span>æˆ–è€…æ˜¯ä¸å®ƒæœ‰å…³çš„é¢„å†™æ—¥å¿—,(write <span class="built_in">log</span>),</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨esè¿›è¡Œç´¢å¼•(index)æˆ–è€…åˆ é™¤(delete)æ“ä½œæ—¶ä¼šå°†æ²¡æœ‰æäº¤çš„æ•°æ®è®°å½•åœ¨translogä¹‹ä¸­,</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“è¿›è¡Œflush æ“ä½œçš„æ—¶å€™ä¼šå°†tranlogä¸­çš„æ•°æ®å‘é€ç»™Luceneè¿›è¡Œç›¸å…³çš„æ“ä½œ.ä¸€æ¬¡flushæ“ä½œçš„å‘ç”ŸåŸºäºå¦‚ä¸‹çš„å‡ ä¸ªé…ç½®</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.translog.flush_threshold_ops:å½“å‘ç”Ÿå¤šå°‘æ¬¡æ“ä½œæ—¶è¿›è¡Œä¸€æ¬¡flush.é»˜è®¤æ˜¯ unlimited <span class="comment">#index.translog.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flush_threshold_size:å½“translogçš„å¤§å°è¾¾åˆ°æ­¤å€¼æ—¶ä¼šè¿›è¡Œä¸€æ¬¡flushæ“ä½œ.é»˜è®¤æ˜¯512mb</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.translog.flush_threshold_period:åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å¦‚æœæ²¡æœ‰è¿›è¡Œflushæ“ä½œ,ä¼šè¿›è¡Œä¸€æ¬¡å¼ºåˆ¶flushæ“ä½œ.é»˜è®¤æ˜¯30m</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.translog.interval:å¤šå°‘æ—¶é—´é—´éš”å†…ä¼šæ£€æŸ¥ä¸€æ¬¡translog,æ¥è¿›è¡Œä¸€æ¬¡flushæ“ä½œ.esä¼šéšæœºçš„åœ¨è¿™ä¸ªå€¼åˆ°è¿™ä¸ªå€¼çš„2å€å¤§å°ä¹‹é—´è¿›è¡Œä¸€æ¬¡æ“ä½œ,é»˜è®¤æ˜¯5s</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">index.gateway.local.sync:å¤šå°‘æ—¶é—´è¿›è¡Œä¸€æ¬¡çš„å†™ç£ç›˜æ“ä½œ,é»˜è®¤æ˜¯5s</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥ä¸Šçš„translogé…ç½®éƒ½å¯ä»¥é€šè¿‡APIè¿›è¡ŒåŠ¨æ€çš„è®¾ç½®</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Set the bind address to a specific IP (IPv4 or IPv6):</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æœ¬æœºå™¨ç»‘å®šçš„ç›‘å¬ipåœ°å€ï¼Œé»˜è®¤ä¸º0.0.0.0ã€‚</span></span><br><span class="line">network.host: 127.0.0.1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Set a custom port for HTTP:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®å¯¹å¤–æœåŠ¡çš„httpç«¯å£ï¼Œé»˜è®¤ä¸º9200ã€‚</span></span><br><span class="line">http.port: 9200</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®å†…å®¹çš„æœ€å¤§å®¹é‡ï¼Œé»˜è®¤100mb</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">http.max_content_length: 100mb</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># æ˜¯å¦ä½¿ç”¨httpåè®®å¯¹å¤–æä¾›æœåŠ¡ï¼Œé»˜è®¤ä¸ºtrueï¼Œå¼€å¯ã€‚</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">http.enabled: <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®èŠ‚ç‚¹é—´äº¤äº’çš„tcpç«¯å£ï¼Œé»˜è®¤æ˜¯9300ã€‚</span></span></span><br><span class="line">transport.tcp.port: 9300</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®æ˜¯å¦å‹ç¼©tcpä¼ è¾“æ—¶çš„æ•°æ®ï¼Œé»˜è®¤ä¸ºfalseï¼Œä¸å‹ç¼©ã€‚</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">transport.tcp.compress: <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># For more information, consult the network module documentation.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Pass an initial list of hosts to perform discovery when new node is started:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The default list of hosts is [<span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;[::1]&quot;</span>]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®é›†ç¾¤ä¸­masterèŠ‚ç‚¹çš„åˆå§‹åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡è¿™äº›èŠ‚ç‚¹æ¥è‡ªåŠ¨å‘ç°æ–°åŠ å…¥é›†ç¾¤çš„èŠ‚ç‚¹ï¼Œé»˜è®¤çš„é€šè®¯ç«¯å£æ˜¯9300ã€‚</span></span><br><span class="line">discovery.zen.ping.unicast.hosts: [&quot;host1&quot;, &quot;host2:port&quot;, &quot;host3[portX-portY]&quot;]</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Prevent the &quot;split brain&quot; by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®è¿™ä¸ªå‚æ•°æ¥ä¿è¯é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å¯ä»¥çŸ¥é“å…¶å®ƒNä¸ªæœ‰masterèµ„æ ¼çš„èŠ‚ç‚¹ã€‚é»˜è®¤ä¸º1ï¼Œå¯¹äºå¤§çš„é›†ç¾¤æ¥è¯´ï¼Œå¯ä»¥è®¾ç½®å¤§ä¸€ç‚¹çš„å€¼ï¼ˆ2-4ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">discovery.zen.minimum_master_nodes: 1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®é›†ç¾¤ä¸­è‡ªåŠ¨å‘ç°å…¶å®ƒèŠ‚ç‚¹æ—¶pingè¿æ¥è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º3ç§’ï¼Œå¯¹äºæ¯”è¾ƒå·®çš„ç½‘ç»œç¯å¢ƒå¯ä»¥é«˜ç‚¹çš„å€¼æ¥é˜²æ­¢è‡ªåŠ¨å‘ç°æ—¶å‡ºé”™(è„‘è£‚)ã€‚</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">discovery.zen.ping.timeout: 3s</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®æ˜¯å¦æ‰“å¼€å¤šæ’­å‘ç°èŠ‚ç‚¹ï¼Œé»˜è®¤æ˜¯trueã€‚å½“å¤šæ’­ä¸å¯ç”¨æˆ–è€…é›†ç¾¤è·¨ç½‘æ®µçš„æ—¶å€™é›†ç¾¤é€šä¿¡å»ºè®®ç”¨å•æ’­ã€‚</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">discovery.zen.ping.multicast.enabled: <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># For more information, consult the zen discovery module documentation.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ---------------------------------- Gateway -----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Block initial recovery after a full cluster restart until N nodes are started:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®é›†ç¾¤ä¸­Nä¸ªèŠ‚ç‚¹å¯åŠ¨æ—¶è¿›è¡Œæ•°æ®æ¢å¤ï¼Œé»˜è®¤ä¸º3ã€‚</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">gateway.recover_after_nodes: 3</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># gatewayçš„ç±»å‹ï¼Œé»˜è®¤ä¸ºlocalå³ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥è®¾ç½®ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œhadoopçš„HDFSï¼Œå’Œamazonçš„s3æœåŠ¡å™¨ç­‰</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">gateway.type: <span class="built_in">local</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®åˆå§‹åŒ–æ•°æ®æ¢å¤è¿›ç¨‹çš„è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶æ—¶é—´ä»ä¸Šä¸€ä¸ªé…ç½®ä¸­é…ç½®çš„Nä¸ªèŠ‚ç‚¹å¯åŠ¨åç®—èµ·ï¼Œé»˜è®¤æ˜¯5åˆ†é’Ÿã€‚</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">gateway.recover_after_time: 5m</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># è®¾ç½®è¿™ä¸ªé›†ç¾¤ä¸­èŠ‚ç‚¹çš„æ•°é‡ï¼Œé»˜è®¤ä¸º2ï¼Œä¸€æ—¦è¿™Nä¸ªèŠ‚ç‚¹å¯åŠ¨ï¼Œå°±ä¼šç«‹å³è¿›è¡Œæ•°æ®æ¢å¤ã€‚</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">gateway.expected_nodes: 2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># For more information, consult the gateway module documentation.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ---------------------------- Recovery Throttling -----------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ä¸‹é¢è¿™äº›é…ç½®å…è®¸åœ¨åˆå§‹åŒ–æ¢å¤,å‰¯æœ¬åˆ†é…,å†å¹³è¡¡,æˆ–è€…æ·»åŠ å’Œåˆ é™¤èŠ‚ç‚¹æ—¶æ§åˆ¶èŠ‚ç‚¹é—´çš„åˆ†ç‰‡åˆ†é…</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹çš„å¹¶è¡Œæ¢å¤æ•°</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.åˆå§‹åŒ–æ•°æ®æ¢å¤æ—¶,å¹¶å‘æ¢å¤çº¿ç¨‹çš„ä¸ªæ•°,é»˜è®¤ä¸º4</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cluster.routing.allocation.node_initial_primaries_recoveries: 4</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.æ·»åŠ åˆ é™¤èŠ‚ç‚¹æˆ–è´Ÿè½½å‡è¡¡æ—¶å¹¶å‘æ¢å¤çº¿ç¨‹çš„ä¸ªæ•°,é»˜è®¤ä¸º2</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cluster.routing.allocation.node_concurrent_recoveries: 2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ¢å¤æ—¶çš„ååé‡(ä¾‹å¦‚:100mb,é»˜è®¤ä¸º0æ— é™åˆ¶.å¦‚æœæœºå™¨è¿˜æœ‰å…¶ä»–ä¸šåŠ¡åœ¨è·‘çš„è¯è¿˜æ˜¯é™åˆ¶ä¸€ä¸‹çš„å¥½)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">indices.recovery.max_bytes_per_sec: 20mb</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ¥é™åˆ¶ä»å…¶å®ƒåˆ†ç‰‡æ¢å¤æ•°æ®æ—¶æœ€å¤§åŒæ—¶æ‰“å¼€å¹¶å‘æµçš„ä¸ªæ•°,é»˜è®¤ä¸º5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">indices.recovery.concurrent_streams: 5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨æ„: åˆç†çš„è®¾ç½®ä»¥ä¸Šå‚æ•°èƒ½æœ‰æ•ˆçš„æé«˜é›†ç¾¤èŠ‚ç‚¹çš„æ•°æ®æ¢å¤ä»¥åŠåˆå§‹åŒ–é€Ÿåº¦</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Require explicit names when deleting indices:</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#action.destructive_requires_name: true</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœå¯ç”¨äº† HTTP ç«¯å£ï¼Œå¼€å¯è·¨åŸŸè®¿é—®æ”¯æŒï¼Œé»˜è®¤ä¸º<span class="literal">false</span></span></span><br><span class="line">http.cors.enabled: true</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœ http.cors.enabled çš„å€¼ä¸º <span class="literal">true</span>ï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¼šæŒ‡å®šè®¿é—®å…è®¸çš„åŸŸååœ°å€ï¼Œ(å…è®¸æ‰€æœ‰åŸŸå)ä»¥ä¸Šä½¿ç”¨æ­£åˆ™</span></span><br><span class="line">http.cors.allow-origin: /.*/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="http://www.cnblogs.com/xiaochina/p/6855591.html">http://www.cnblogs.com/xiaochina/p/6855591.html</a></li><li><a href="https://www.cnblogs.com/sunxucool/p/3799190.html">https://www.cnblogs.com/sunxucool/p/3799190.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Elasticsearchçš„é…ç½®æ–‡ä»¶ä½äº/es-path/conf/elasticsearch.ymlï¼Œæœ¬æ–‡åŸºäºelasticsearch 6.xç‰ˆæœ¬å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚&lt;br&gt;å¯¹äºæœªæåŠçš„é…ç½®å‚æ•°å¯æŸ¥é˜… &lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/modules.html&quot;&gt;https://www.elastic.co/guide/en/elasticsearch/reference/current/modules.html&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Elasticsearch" scheme="http://blog.fcj.one/tags/Elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 7 ä½¿ç”¨ cron æ‰§è¡Œè®¡åˆ’ä»»åŠ¡</title>
    <link href="http://blog.fcj.one/centos-crontab.html"/>
    <id>http://blog.fcj.one/centos-crontab.html</id>
    <published>2018-09-08T12:26:13.000Z</published>
    <updated>2022-04-29T07:03:48.307Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Linuxä¸­ï¼Œå‘¨æœŸæ‰§è¡Œçš„ä»»åŠ¡ä¸€èˆ¬ç”±cronè¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹æ¥å¤„ç†<code>ps -ef|grep cron</code>ã€‚cronè¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å‘½ä»¤è¡ŒåŠå…¶è°ƒç”¨æ—¶é—´ã€‚cronçš„é…ç½®æ–‡ä»¶ç§°ä¸º crontabï¼Œæ˜¯ cron table çš„ç®€å†™ã€‚</p><span id="more"></span><h2 id="cronæœåŠ¡"><a href="#cronæœåŠ¡" class="headerlink" title="cronæœåŠ¡"></a>cronæœåŠ¡</h2><p>CentOS 7ä¸‹å®‰è£…<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> vixie-cron</span><br><span class="line">yum <span class="keyword">install</span> crontabs</span><br></pre></td></tr></table></figure><br>å¯åŠ¨æœåŠ¡<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond <span class="literal">start</span></span><br></pre></td></tr></table></figure></p><p>å¼€æœºè‡ªåŠ¨å¯åŠ¨<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> --level <span class="number">35</span> crond <span class="literal">on</span></span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹æ˜¯å¦å·²åŠ å…¥å¼€æœºè‡ªå¯åŠ¨ï¼šä½¿ç”¨ <code>chkconfig | grep crond</code> çœ‹åœ¨2 3 4 5çº§åˆ«æ˜¯ä¸æ˜¯on<br>crontabé»˜è®¤å°±æ˜¯å¼€æœºå¯åŠ¨çš„ï¼Œæ™®é€šç”¨æˆ·è¦æœ‰sudoçš„æƒé™æ‰èƒ½è®¾ç½®å¼€æœºå¯åŠ¨</p><p>å…¶ä»–å‘½ä»¤<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€service crond stop     <span class="regexp">//</span>å…³é—­æœåŠ¡</span><br><span class="line">ã€€ã€€service crond restart  <span class="regexp">//</span>é‡å¯æœåŠ¡</span><br><span class="line">ã€€ã€€service crond reload   <span class="regexp">//</span>é‡æ–°è½½å…¥é…ç½®</span><br><span class="line">ã€€ã€€service crond status   <span class="regexp">//</span>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span><br></pre></td></tr></table></figure></p><h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><p>crontabæƒé™é—®é¢˜åˆ°<code>/var/adm/cron/</code>ä¸‹æŸ¥çœ‹æ–‡ä»¶cron.allowå’Œcron.denyæ˜¯å¦å­˜åœ¨<br>ç”¨æ³•å¦‚ä¸‹ï¼š<br>1ã€å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œåˆ™åªæœ‰rootç”¨æˆ·æ‰èƒ½ä½¿ç”¨crontabå‘½ä»¤ã€‚<br>2ã€å¦‚æœcron.allowå­˜åœ¨ä½†cron.denyä¸å­˜åœ¨ï¼Œåˆ™åªæœ‰åˆ—åœ¨cron.allowæ–‡ä»¶é‡Œçš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨crontabå‘½ä»¤ï¼Œå¦‚æœrootç”¨æˆ·ä¹Ÿä¸åœ¨é‡Œé¢ï¼Œåˆ™rootç”¨æˆ·ä¹Ÿä¸èƒ½ä½¿ç”¨crontabã€‚<br>3ã€å¦‚æœcron.allowä¸å­˜åœ¨, cron.denyå­˜åœ¨ï¼Œåˆ™åªæœ‰åˆ—åœ¨cron.denyæ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¸èƒ½ä½¿ç”¨crontabå‘½ä»¤ï¼Œå…¶å®ƒç”¨æˆ·éƒ½èƒ½ä½¿ç”¨ã€‚<br>4ã€å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ï¼Œåˆ™åˆ—åœ¨cron.allowæ–‡ä»¶ä¸­è€Œä¸”æ²¡æœ‰åˆ—åœ¨cron.denyä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨crontabï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶ä¸­éƒ½æœ‰åŒä¸€ä¸ªç”¨æˆ·ï¼Œä»¥cron.allowæ–‡ä»¶é‡Œé¢æ˜¯å¦æœ‰è¯¥ç”¨æˆ·ä¸ºå‡†ï¼Œå¦‚æœcron.allowä¸­æœ‰è¯¥ç”¨æˆ·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨crontabå‘½ä»¤ã€‚</p><p>CentOS 7 ä¸­é»˜è®¤æ™®é€šç”¨æˆ·æ²¡æœ‰ crontab æƒé™ ï¼Œè¦æƒ³æ”¾å¼€æ™®é€šç”¨æˆ·çš„ crontab æƒé™å¯ä»¥ç¼–è¾‘/var/adm/cron/cron.deny</p><h2 id="crontabç”¨æ³•"><a href="#crontabç”¨æ³•" class="headerlink" title="crontabç”¨æ³•"></a>crontabç”¨æ³•</h2><p>crontabå‘½ä»¤ç”¨äºå®‰è£…ã€åˆ é™¤æˆ–è€…åˆ—å‡ºç”¨äºé©±åŠ¨cronåå°è¿›ç¨‹çš„è¡¨æ ¼ã€‚ç”¨æˆ·æŠŠéœ€è¦æ‰§è¡Œçš„å‘½ä»¤åºåˆ—æ”¾åˆ°crontabæ–‡ä»¶ä¸­ä»¥è·å¾—æ‰§è¡Œã€‚æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥æœ‰è‡ªå·±çš„crontabæ–‡ä»¶ã€‚<code>/var/spool/cron</code>ä¸‹çš„crontabæ–‡ä»¶ä¸å¯ä»¥ç›´æ¥åˆ›å»ºæˆ–è€…ç›´æ¥ä¿®æ”¹ã€‚è¯¥crontabæ–‡ä»¶æ˜¯é€šè¿‡crontabå‘½ä»¤åˆ›å»ºçš„ã€‚</p><h3 id="ç³»ç»Ÿçº§crontab"><a href="#ç³»ç»Ÿçº§crontab" class="headerlink" title="ç³»ç»Ÿçº§crontab"></a>ç³»ç»Ÿçº§crontab</h3><p>ç”¨<code>ls /etc/cron</code>ç„¶åæ•²ä¸¤ä¸‹TABï¼Œå¯ä»¥çœ‹åˆ°ç›¸å…³æ–‡ä»¶åŠç›®å½•ã€‚<br>cron.d/     cron.daily/   cron.hourly/  cron.monthly/ crontab   cron.weekly/</p><h3 id="cronæ–‡ä»¶ç›®å½•è§£è¯»"><a href="#cronæ–‡ä»¶ç›®å½•è§£è¯»" class="headerlink" title="cronæ–‡ä»¶ç›®å½•è§£è¯»"></a>cronæ–‡ä»¶ç›®å½•è§£è¯»</h3><p>å¯ä»¥ç¼–è¾‘crontabæ–‡ä»¶ï¼Œæ¥åˆ›å»ºè®¡åˆ’ä»»åŠ¡ã€‚<br>è€Œä»¥dailyï¼Œhourlyï¼Œweeklyï¼Œmonthlyåç¼€çš„ç›®å½•ä¸‹åˆ†åˆ«å­˜æ”¾æ¯å¤©ï¼Œæ¯æœˆï¼Œæ¯å‘¨ï¼Œæ¯æœˆæ‰§è¡Œçš„ä»»åŠ¡ã€‚<br>å…¶ä¸­å­˜æ”¾çš„å°±æ˜¯Shellè„šæœ¬æ–‡ä»¶ï¼Œæƒé™755ã€‚æˆ‘ä»¬æŠŠè¦æ‰§è¡Œçš„ä»»åŠ¡å†™æˆShellè„šæœ¬ä¸¢è¿›è¡Œç›¸åº”çš„ç›®å½•å°±å¯ä»¥äº†ã€‚<br>è€Œä¸è§„åˆ™å‘¨æœŸçš„è®¡åˆ’ä»»åŠ¡æ”¾åœ¨corn.dç›®å½•ä¸‹é¢ï¼Œå¯ä»¥çœ‹åšæ˜¯crontabæ–‡ä»¶çš„è¡¥å……ã€‚</p><h3 id="ç¼–è¾‘crontab"><a href="#ç¼–è¾‘crontab" class="headerlink" title="ç¼–è¾‘crontab"></a>ç¼–è¾‘crontab</h3><p>æ³¨æ„ crontab æ˜¯åˆ†ç”¨æˆ·çš„ï¼Œä»¥è°ç™»å½•å°±ä¼šç¼–è¾‘åˆ°å“ªä¸ªç”¨æˆ·çš„ crontabï¼Œå¿…é¡»åœ¨æ‹¥æœ‰ cron æƒé™çš„ç”¨æˆ·ä¸‹ç¼–è¾‘ crontabã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">crontab -e : ç¼–è¾‘æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºç¼–è¾‘å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶</span><br><span class="line">åŸºæœ¬æ ¼å¼ï¼š *ã€€ã€€*ã€€ã€€*ã€€ã€€*ã€€ã€€*ã€€ã€€command</span><br><span class="line">å¯¹åº”å‚æ•°ï¼š åˆ†ã€€ æ—¶ã€€ æ—¥ã€€ æœˆã€€ å‘¨ã€€  å‘½ä»¤</span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼š <span class="number">00</span>ã€€<span class="number">00</span>ã€€  *    *    *ã€€  <span class="regexp">/usr/</span>bin<span class="regexp">/php /</span>xxx/Timer.php  <span class="comment"># æ¯å¤©å‡Œæ™¨æ‰§è¡ŒPHPè„šæœ¬</span></span><br><span class="line"></span><br><span class="line">crontab -r : ä»<span class="regexp">/var/</span>spool/cronç›®å½•ä¸­åˆ é™¤æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™é»˜è®¤åˆ é™¤å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">crontab -l : æ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹</span><br><span class="line"></span><br><span class="line">crontab -i : ä¼šå’Œ-r é…åˆä½¿ç”¨ï¼Œåœ¨åˆ é™¤å½“å‰çš„crontabæ—¶è¯¢é—®ï¼Œè¾“å…¥ y åˆ™åˆ é™¤</span><br><span class="line"></span><br><span class="line">tail -f <span class="regexp">/var/</span>log/cron : æŸ¥çœ‹cronæ—¥å¿—</span><br></pre></td></tr></table></figure><p><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-9-8/3612810444.png" alt=""></p><h3 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h3><p>â€œ*â€ä»£è¡¨æ‰€æœ‰çš„å–å€¼èŒƒå›´å†…çš„æ•°å­—ã€‚ç‰¹åˆ«è¦æ³¨æ„å“¦ï¼</p><p>â€œ/â€œä»£è¡¨æ¯çš„æ„æ€ï¼Œå¦‚â€*/5â€è¡¨ç¤ºæ¯5ä¸ªå•ä½</p><p>â€œ-â€œä»£è¡¨ä»æŸä¸ªæ•°å­—åˆ°æŸä¸ªæ•°å­—</p><p>â€œ,â€åˆ†æ•£çš„æ•°å­—</p><h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">æ¯æ™š21ï¼š30é‡å¯apache</span><br><span class="line">30 21 <span class="emphasis">* *</span> <span class="emphasis">*  service httpd restart</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">æ¯æœˆçš„1, 10, 22æ—¥çš„4:55åˆ†é‡å¯apache, ç”¨ï¼Œå·åˆ†å‰²</span></span><br><span class="line"><span class="emphasis">55 4 1,10,22 *</span> <span class="emphasis">* service httpd restart</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">æ¯æœˆçš„1åˆ°10æ—¥é‡å¯apacheï¼Œ ç”¨-å·è¡¨ç¤ºåŒºé—´</span></span><br><span class="line"><span class="emphasis">*</span> <span class="emphasis">* 1-10 *</span> <span class="emphasis">* service httpd restart</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">æ¯éš”2åˆ†é’Ÿé‡å¯apache ï¼Œ è¿™é‡Œçš„ *</span>/2 å· è¡¨ç¤ºä»0.0ç§’å¼€å§‹æ¯éš”2åˆ†é’Ÿæ‰§è¡Œ</span><br><span class="line"><span class="emphasis">*/2 *</span> <span class="emphasis">* *</span> <span class="emphasis">* service httpd restart</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">æ¯æ™š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹æ¯éš”1å°æ—¶é‡å¯æœåŠ¡å™¨, æ³¨æ„åˆ†é’Ÿæ˜¯ç”¨0è€Œä¸æ˜¯*</span> å‡å¦‚æ˜¯<span class="emphasis">*åˆ™ä»£è¡¨æ¯åˆ†é’Ÿéƒ½åœ¨æ‰§è¡Œ</span></span><br><span class="line"><span class="emphasis">0 23-7/1 *</span> <span class="emphasis">* *</span> service httpd restart</span><br><span class="line"></span><br><span class="line">æ¯å¤©18ç‚¹åˆ°23ç‚¹æ¯éš”30åˆ†é’Ÿé‡å¯æœåŠ¡å™¨, ä¸¤ç§å†™æ³•éƒ½å¯ä»¥</span><br><span class="line"><span class="emphasis">*/30 18-23 *</span> <span class="emphasis">* *</span> service httpd restart</span><br><span class="line">0,30 18-23 <span class="emphasis">* *</span> <span class="emphasis">* service httpd restart</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">æ¯å¤©0ç‚¹æ‰§è¡Œpython3è„šæœ¬ï¼ˆäº²æµ‹CentOS 7ä¸‹åœ¨8ç‚¹æ‰§è¡Œï¼Œç”±äºé»˜è®¤biosæ—¶é—´æ˜¯utcæ—¶é—´ï¼Œæ‰€ä»¥ç›¸å·®äº†8å°æ—¶ï¼‰</span></span><br><span class="line"><span class="emphasis">00 00 *</span> <span class="emphasis">* *</span> /usr/local/bin/python3 /root/time.py</span><br><span class="line"></span><br><span class="line">æ¯å¤©0ç‚¹æ‰§è¡Œphpè„šæœ¬</span><br><span class="line">00 00 <span class="emphasis">* *</span> <span class="emphasis">* /usr/bin/php /xxx/Timer.php  # æ¯å¤©å‡Œæ™¨æ‰§è¡ŒPHPè„šæœ¬</span></span><br><span class="line"><span class="emphasis"></span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://www.kancloud.cn/digest/yunwei/212799">https://www.kancloud.cn/digest/yunwei/212799</a></li><li><a href="https://segmentfault.com/a/1190000008560453">https://segmentfault.com/a/1190000008560453</a></li><li><a href="https://blog.csdn.net/zd147896325/article/details/80763908">https://blog.csdn.net/zd147896325/article/details/80763908</a></li><li><a href="https://www.cnblogs.com/longjshz/p/5779215.html">https://www.cnblogs.com/longjshz/p/5779215.html</a></li><li><a href="https://www.cnblogs.com/intval/p/5763929.html">https://www.cnblogs.com/intval/p/5763929.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨Linuxä¸­ï¼Œå‘¨æœŸæ‰§è¡Œçš„ä»»åŠ¡ä¸€èˆ¬ç”±cronè¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹æ¥å¤„ç†&lt;code&gt;ps -ef|grep cron&lt;/code&gt;ã€‚cronè¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å‘½ä»¤è¡ŒåŠå…¶è°ƒç”¨æ—¶é—´ã€‚cronçš„é…ç½®æ–‡ä»¶ç§°ä¸º crontabï¼Œæ˜¯ cron table çš„ç®€å†™ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Apache 2 é…ç½®äºŒçº§åŸŸå</title>
    <link href="http://blog.fcj.one/apache-domain.html"/>
    <id>http://blog.fcj.one/apache-domain.html</id>
    <published>2018-08-24T14:01:50.000Z</published>
    <updated>2022-04-29T07:03:48.306Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç»å¦‚ä½•å®šä¹‰äºŒçº§åŸŸåï¼Œå¹¶åœ¨vpsçš„ApacheæœåŠ¡å™¨ä¸­å°†åŸŸåæ˜ å°„åˆ°ç½‘ç«™ç›®å½•ä¸‹ã€‚</p><span id="more"></span><h2 id="äºŒçº§åŸŸå"><a href="#äºŒçº§åŸŸå" class="headerlink" title="äºŒçº§åŸŸå"></a>äºŒçº§åŸŸå</h2><p>ä¸€çº§åŸŸåï¼ˆabc.cnï¼‰ä¹Ÿç§°ä½œé¡¶çº§åŸŸåï¼Œç”³è¯·ä¸€çº§åŸŸåä¸€èˆ¬éƒ½éœ€è¦æ”¶è´¹ã€‚äºŒçº§åŸŸåï¼ˆblog.abc.cnï¼‰æ˜¯å¯¹ä¸€çº§åŸŸåçš„å»¶ä¼¸ï¼Œwwwå…¶å®ä¹Ÿæ˜¯äºŒçº§åŸŸåçš„ä¸€ç§ï¼Œåªä¸è¿‡å¤§å®¶å¹³æ—¶ä¹ æƒ¯ç”¨ www ä½œä¸ºç½‘ç«™çš„ä¸»åŸŸåã€‚é€šè¿‡DNSè§£ææœåŠ¡å•†ï¼Œå¯ä»¥åœ¨åŸŸåç®¡ç†é¡µé¢ä¸ºä¸»åŸŸåæ·»åŠ ä¸€æ¡è§£æè®°å½•ï¼Œæ¯”å¦‚è¦æ·»åŠ ä¸€ä¸ª blog å¼€å¤´çš„äºŒçº§åŸŸåã€‚</p><table><thead><tr><th>ä¸»æœºè®°å½•</th><th>è®°å½•ç±»å‹</th><th style="text-align:center">çº¿è·¯ç±»å‹</th><th style="text-align:center">è®°å½•å€¼</th><th style="text-align:center">MXä¼˜å…ˆçº§</th><th style="text-align:center">TTL</th></tr></thead><tbody><tr><td>blog</td><td>A</td><td style="text-align:center">é»˜è®¤</td><td style="text-align:center">45.54.23.1</td><td style="text-align:center">-</td><td style="text-align:center">600</td></tr></tbody></table><p>è®¾ç½®å®Œæˆåï¼Œping blog.abc.com,å¦‚æœè¿”å›çš„ipåœ°å€éƒ½æ˜¯æœåŠ¡å™¨IPï¼Œè¯´æ˜åŸŸåè§£æå·²ç»æˆåŠŸã€‚</p><h2 id="Apacheé…ç½®"><a href="#Apacheé…ç½®" class="headerlink" title="Apacheé…ç½®"></a>Apacheé…ç½®</h2><p>æ–¹æ³•ä¸€ï¼š<br>ç°å°†åˆ›å»ºçš„äºŒçº§åŸŸåæ˜ å°„åˆ°æœåŠ¡å™¨çš„æŸä¸ªç½‘ç«™ç›®å½•ä¸‹ï¼Œéœ€è¦é…ç½®apacheçš„http.confæ–‡ä»¶ï¼Œ<code>vi /etc/httpd/conf/httpd.conf</code>ï¼Œåœ¨æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š<br>æ¯ä¸€ä¸ªäºŒçº§åŸŸåå¯¹åº”ä¸€ä¸ª VirtualHost æ ‡ç­¾ï¼Œæœ‰å¤šå°‘äºŒçº§åŸŸåï¼Œå°±éœ€è¦å¤šå°‘ä¸ª VirtualHost æ ‡ç­¾ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">NameVirtualHost</span> *:<span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># www</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost *<span class="number">:80</span>&gt;</span></span><br><span class="line">    <span class="attribute">ServerAdmin</span> <span class="number">782773117</span>@qq.com</span><br><span class="line">    <span class="attribute">DocumentRoot</span> /var/www/html/www</span><br><span class="line">    <span class="attribute">ServerName</span> www.abc.cn</span><br><span class="line">    <span class="attribute">ErrorLog</span> logs/www-error_log</span><br><span class="line">    <span class="attribute">CustomLog</span> logs/www-access_log common</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># blog</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost *<span class="number">:80</span>&gt;</span></span><br><span class="line">    <span class="attribute">ServerAdmin</span> <span class="number">782773117</span>@qq.com</span><br><span class="line">    <span class="attribute">DocumentRoot</span> /var/www/html/blog</span><br><span class="line">    <span class="attribute">ServerName</span> blog.abc.cn</span><br><span class="line">    <span class="attribute">ErrorLog</span> logs/blog-error_log</span><br><span class="line">    <span class="attribute">CustomLog</span> logs/blog-access_log common</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼š</p><p>1.å°†httpd.confé…ç½®æ–‡ä»¶çš„ä¸¤è¡Œå–æ¶ˆæ³¨é‡Šï¼›<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot &quot;/<span class="selector-tag">var</span>/www/<span class="selector-tag">html</span>&quot;</span><br><span class="line">ServerAdmin you<span class="keyword">@example</span>.com</span><br></pre></td></tr></table></figure></p><p>2.ç„¶åå–æ¶ˆVirtual hostsä¸‹é¢çš„Includeæ³¨é‡Šï¼Œå¼•å…¥è™šæ‹ŸæœåŠ¡å™¨é…ç½®æ–‡ä»¶ï¼›<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Virtual hosts</span></span><br><span class="line">Include conf<span class="regexp">/extra/</span>httpd-vhosts.conf</span><br></pre></td></tr></table></figure></p><p>3.åœ¨é…ç½®æ–‡ä»¶<code>conf/extra/httpd-vhosts.conf</code>ï¼ˆè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰åŒæ ·åŠ å…¥ä¸Šè¿°é…ç½®å†…å®¹</p><p>æœ€åé‡å¯apacheæœåŠ¡å™¨ï¼Œ<code>service httpd restart</code></p><h2 id="å‚æ•°å«ä¹‰"><a href="#å‚æ•°å«ä¹‰" class="headerlink" title="å‚æ•°å«ä¹‰"></a>å‚æ•°å«ä¹‰</h2><p>é…ç½®è™šæ‹Ÿä¸»æœºçš„é€‰é¡¹é‡Œé¢ï¼Œå¯ä»¥å‡ºç°çš„å‚æ•°å¾ˆå¤šï¼Œä½†æœ€å°‘å¿…é¡»å®šä¹‰DocumentRootå’ŒServerNameã€‚é™„å„ä¸ªå‚æ•°å«ä¹‰è¯´æ˜<br>ServerAdmin  ç®¡ç†å‘˜é‚®ç®±<br>DocumentRoot æ‰€éœ€æŒ‡å‘è·¯å¾„<br>ServerName   åŸŸååç§°<br>ServerAlias  åŸŸååˆ«å å¯è¦å¯ä¸è¦<br>ErrorLog     é”™è¯¯æ—¥å¿—<br>CustomLog    è®¿é—®æ—¥å¿—</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="http://blog.sina.com.cn/s/blog_5375d76b01014fnt.html">http://blog.sina.com.cn/s/blog_5375d76b01014fnt.html</a></li><li><a href="https://segmentfault.com/a/1190000007512622">https://segmentfault.com/a/1190000007512622</a></li><li><a href="http://www.cnblogs.com/hi-bazinga/archive/2012/04/23/2466605.html">http://www.cnblogs.com/hi-bazinga/archive/2012/04/23/2466605.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»å¦‚ä½•å®šä¹‰äºŒçº§åŸŸåï¼Œå¹¶åœ¨vpsçš„ApacheæœåŠ¡å™¨ä¸­å°†åŸŸåæ˜ å°„åˆ°ç½‘ç«™ç›®å½•ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="apache" scheme="http://blog.fcj.one/tags/apache/"/>
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
      <category term="vps" scheme="http://blog.fcj.one/tags/vps/"/>
    
  </entry>
  
  <entry>
    <title>Hexoåšå®¢è·³è¿‡æ¸²æŸ“ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç½‘é¡µ</title>
    <link href="http://blog.fcj.one/hexo-custom-page.html"/>
    <id>http://blog.fcj.one/hexo-custom-page.html</id>
    <published>2018-08-07T12:59:50.000Z</published>
    <updated>2022-04-29T07:03:48.309Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo åšå®¢ä¸­æ‰€è§æ–‡ç« éƒ½æ˜¯ç»ç”±æ¸²æŸ“çš„é™æ€ç½‘é¡µï¼Œè€Œé™æ€ç½‘é¡µçš„æ ·å¼éƒ½ç›´æ¥ç”± Hexo çš„ä¸»é¢˜æ§åˆ¶ï¼Œæ‰€ä»¥ Hexo åšå®¢å¤§éƒ¨åˆ†éƒ½å‘ˆç°å‡ºä¸€ç§é«˜åº¦çš„ç»Ÿä¸€åŒ–ä¸è§„èŒƒåŒ–ã€‚ä¸è¿‡ Hexo æä¾›äº†è·³è¿‡æ¸²æŸ“åŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åšå®¢ä¸­æ”¾å…¥è‡ªå®šä¹‰ç½‘é¡µã€‚æ¯”å¦‚åœ¨åšå®¢ä¸­æ”¾å…¥å›¾ç‰‡ã€è‡ªå®šä¹‰ 404.html ã€è‡ªå®šä¹‰ About é¡µé¢ç­‰ã€‚</p><span id="more"></span><h2 id="è‡ªå®šä¹‰ç½‘é¡µ"><a href="#è‡ªå®šä¹‰ç½‘é¡µ" class="headerlink" title="è‡ªå®šä¹‰ç½‘é¡µ"></a>è‡ªå®šä¹‰ç½‘é¡µ</h2><p>ç½‘é¡µå¯ä»¥æ˜¯è‡ªå·±ç¼–å†™çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«äººç°æˆçš„æºç ã€‚<br>ç½‘é¡µç¼–å†™å®Œæˆåï¼Œåœ¨ Hexo\source ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹åç§°ä»»æ„ï¼Œå°† Html æ–‡ä»¶æ”¾ç½®äºæ­¤æ–‡ä»¶å¤¹ï¼Œå¹¶é‡å‘½åä¸º index.html ã€‚</p><h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><p>åœ¨htmlæ–‡ä»¶ä¸­æ·»åŠ è·³è¿‡æ¸²æŸ“æŒ‡ä»¤ï¼š</p><p>ç”¨ç¼–è¾‘å™¨æ‰“å¼€ Hexo\source åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­çš„ index.html æ–‡ä»¶ï¼Œåœ¨å¼€å¤´æ·»åŠ å¦‚ä¸‹ä»£ç å³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">layout:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ è¯¥æŒ‡ä»¤åï¼Œæ‰§è¡Œ hexo g å‘½ä»¤æ—¶ä¾¿ä¼šè·³è¿‡è¯¥ index.html æ–‡ä»¶ï¼Œä½¿å¾— index.html ä¸å—å½“å‰ hexo ä¸»é¢˜å½±å“ï¼Œå®Œå…¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç½‘é¡µã€‚</p><p>å¦‚æœç½‘é¡µå¼•ç”¨äº† css æˆ– js ï¼Œè¿™äº› css å’Œ js å¿…é¡»ä½¿ç”¨å¤–é“¾ã€‚</p><p>å¦‚æœå¼•ç”¨å›¾ç‰‡ï¼Œå¯ä»¥åœ¨ç½‘é¡µç›®å½•ä¸‹å»ºç«‹ img æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å›¾ç‰‡ï¼Œä¸å¿…å†å»åˆ›å»ºå¤–é“¾ã€‚</p><h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><p>ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€ Hexo ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ï¼Œæ‰¾åˆ° skip_render</p><p>skip_render ä¸€èˆ¬æœ‰ä»¥ä¸‹å››ç§å¸¸ç”¨å‚æ•°ï¼š</p><ol><li><p>è·³è¿‡sourceç›®å½•ä¸‹çš„ test.html: skip_render: test.html</p></li><li><p>è·³è¿‡sourceç›®å½•ä¸‹ test æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶ï¼šskip_render: test/*</p></li><li><p>è·³è¿‡sourceç›®å½•ä¸‹ test æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬å­æ–‡ä»¶å¤¹ä»¥åŠå­æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶ï¼šskip_render: test/**</p></li><li><p>è·³è¿‡å¤šä¸ªè·¯å¾„ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">skip_render</span><span class="punctuation">:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">test.html</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">test/*</span></span><br></pre></td></tr></table></figure></li></ol><p>å¯¹æ ¼å¼è¦æ±‚ä¸¥æ ¼ï¼Œæ³¨æ„å¡«å†™å‚æ•°æ—¶çš„æ ¼å¼ï¼Œæ·»åŠ å®Œæˆåä¾¿ä¸ä¼šæ¸²æŸ“æŒ‡å®šæ–‡ä»¶/æ–‡ä»¶å¤¹ã€‚</p><p>å¦‚æœç½‘é¡µå¼•ç”¨äº† css æˆ– js ï¼Œå¹¶å°†æ•´ä¸ªç½‘é¡µç›®å½•è®¾ç½®ä¸ºè·³è¿‡æ¸²æŸ“ï¼Œåˆ™ä¸å¿…å†ä¸º css å’Œ js åˆ›å»ºå¤–é“¾ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo åšå®¢ä¸­æ‰€è§æ–‡ç« éƒ½æ˜¯ç»ç”±æ¸²æŸ“çš„é™æ€ç½‘é¡µï¼Œè€Œé™æ€ç½‘é¡µçš„æ ·å¼éƒ½ç›´æ¥ç”± Hexo çš„ä¸»é¢˜æ§åˆ¶ï¼Œæ‰€ä»¥ Hexo åšå®¢å¤§éƒ¨åˆ†éƒ½å‘ˆç°å‡ºä¸€ç§é«˜åº¦çš„ç»Ÿä¸€åŒ–ä¸è§„èŒƒåŒ–ã€‚ä¸è¿‡ Hexo æä¾›äº†è·³è¿‡æ¸²æŸ“åŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åšå®¢ä¸­æ”¾å…¥è‡ªå®šä¹‰ç½‘é¡µã€‚æ¯”å¦‚åœ¨åšå®¢ä¸­æ”¾å…¥å›¾ç‰‡ã€è‡ªå®šä¹‰ 404.html ã€è‡ªå®šä¹‰ About é¡µé¢ç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="hexo" scheme="http://blog.fcj.one/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>è¡Œäººé‡è¯†åˆ«Person Re-identificationæ€»ç»“</title>
    <link href="http://blog.fcj.one/reid-overview.html"/>
    <id>http://blog.fcj.one/reid-overview.html</id>
    <published>2018-07-14T01:10:22.000Z</published>
    <updated>2022-04-29T07:03:48.314Z</updated>
    
    <content type="html"><![CDATA[<p>ã€€ã€€Person re-identification, also known as person retrieval, is to match pedestrian images observed from non-overlapping camera views based on appearance.It receives increasing attentions in video surveillance for its important applications in threat detection, human retrieval, and multi-camera tracking. It saves a lot of human labor in exhaustively searching for a person of interest from large amounts of video sequences.</p><span id="more"></span><p>Last Updated: Apr 26, 2019</p><!-- START doctoc generated TOC please keep comment here to allow auto update --><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a><strong>Table of Contents</strong></h2><p><em>generated with <a href="https://github.com/thlorenz/doctoc">DocToc</a></em></p><ul><li><a href="#Leaderboard">Leaderboard</a></li><li><a href="#Person-Re-identification-Person-Retrieval">Person Re-identification / Person Retrieval</a></li><li><a href="#Person-Search">Person Search</a></li><li><a href="#Pose-View-for-Re-ID">Pose/View for Re-ID</a></li><li><a href="#GAN-for-Re-ID">GAN for Re-ID</a></li><li><a href="#Human-Parsing-for-Re-ID">Human Parsing for Re-ID</a></li><li><a href="#Partial-Person-Re-ID">Partial Person Re-ID</a></li><li><a href="#RGB-IR-Re-ID">RGB-IR Re-ID</a></li><li><a href="#Depth-Based-Re-ID">Depth-Based Re-ID</a></li><li><a href="#Low-Resolution-Re-ID">Low Resolution Re-ID</a></li><li><a href="#Reinforcement-Learning-for-Re-ID">Reinforcement Learning for Re-ID</a></li><li><a href="#Attributes-Prediction-for-Re-ID">Attributes Prediction for Re-ID</a></li><li><a href="#Video-Person-Re-Identification">Video Person Re-Identification</a></li><li><a href="#Re-ranking">Re-ranking</a></li><li><a href="#Unsupervised-Re-ID">Unsupervised Re-ID</a></li><li><a href="#Weakly-Supervised-Person-Re-identification">Weakly Supervised Person Re-identification</a></li><li><a href="#Vehicle-Re-ID">Vehicle Re-ID</a></li><li><a href="#Deep-Metric-Learning">Deep Metric Learning</a></li><li><a href="#Projects">Projects</a></li><li><a href="#Evaluation">Evaluation</a></li><li><a href="#Datasets">Datasets</a></li><li><a href="#Tutorials">Tutorials</a></li><li><a href="#Experts">Experts</a></li><li><a href="#Resources">Resources</a></li></ul><!-- END doctoc generated TOC please keep comment here to allow auto update --><h2 id="Leaderboard"><a href="#Leaderboard" class="headerlink" title="Leaderboard"></a>Leaderboard</h2><table><thead><tr><th style="text-align:center">Method</th><th style="text-align:center">backbone</th><th style="text-align:center">test size</th><th style="text-align:center">Market1501</th><th style="text-align:center">CUHK03 (detected)</th><th style="text-align:center">CUHK03 (detected/new)</th><th style="text-align:center">CUHK03 (labeled/new)</th><th style="text-align:center">CUHK-SYSU</th><th style="text-align:center">DukeMTMC-reID</th><th style="text-align:center">MARS</th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">rank1 / mAP</td><td style="text-align:center">rank1/  5   / 10</td><td style="text-align:center">rank1 / mAP</td><td style="text-align:center">rank1 / mAP</td><td style="text-align:center">rank1 / mAP</td><td style="text-align:center"></td><td style="text-align:center">rank1 / mAP</td></tr><tr><td style="text-align:center">AlignedReID</td><td style="text-align:center">ResNet50-X</td><td style="text-align:center"></td><td style="text-align:center">92.6 / 82.3</td><td style="text-align:center">91.9 / 98.7 / 99.4</td><td style="text-align:center"></td><td style="text-align:center">86.8 / 79.1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">95.3 / 93.7</td></tr><tr><td style="text-align:center">AlignedReID (RK)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">94.0 / 91.2</td><td style="text-align:center">96.1 / 99.5 / 99.6</td><td style="text-align:center"></td><td style="text-align:center">87.5 / 85.6</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">Deep-Person(SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">256Ã—128</td><td style="text-align:center">92.31 / 79.58</td><td style="text-align:center">89.4 / 98.2 / 99.1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">80.90 / 64.80</td></tr><tr><td style="text-align:center">Deep-Person(MQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">256Ã—128</td><td style="text-align:center">94.48 / 85.09</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">PCB(SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">384x128</td><td style="text-align:center">92.4 / 77.3</td><td style="text-align:center"></td><td style="text-align:center">61.3 / 54.2</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">81.9 / 65.3</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">PCB+RPP(SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">384x128</td><td style="text-align:center">93.8 / 81.6</td><td style="text-align:center"></td><td style="text-align:center">63.7 / 57.5</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">83.3 / 69.2</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">PN-GAN (SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">89.43 / 72.58</td><td style="text-align:center">79.76/ 96.24/ 98.56</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">73.58 / 53.20</td></tr><tr><td style="text-align:center">PN-GAN (MQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">95.90 / 91.37</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">MGN (SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">95.7 /  86.9</td><td style="text-align:center"></td><td style="text-align:center">66.8 / 66.0</td><td style="text-align:center">68.0 / 67.4</td><td style="text-align:center"></td><td style="text-align:center">88.7 / 78.4</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">MGN (MQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">96.9 /  90.7</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">MGN (SQ+RK)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">96.6 /  94.2</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">MGN (MQ+RK)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center"></td><td style="text-align:center">97.1 /  95.9</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">HPM(SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">384x128</td><td style="text-align:center">94.2 /  82.7</td><td style="text-align:center"></td><td style="text-align:center">63.1 / 57.5</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">86.6 / 74.3</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">HPM+HRE(SQ)</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">384x128</td><td style="text-align:center">93.9 /  83.1</td><td style="text-align:center"></td><td style="text-align:center">63.2 / 59.7</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">86.3 / 74.5</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">SphereReID</td><td style="text-align:center">ResNet-50</td><td style="text-align:center">288Ã—144</td><td style="text-align:center">94.4 /  83.6</td><td style="text-align:center">93.1 / 98.7 / 99.4</td><td style="text-align:center">63.2 / 59.7</td><td style="text-align:center"></td><td style="text-align:center">95.4 / 93.9</td><td style="text-align:center">83.9 / 68.5</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">Auto-ReID</td><td style="text-align:center"></td><td style="text-align:center">384x128</td><td style="text-align:center">94.5 /  85.1</td><td style="text-align:center"></td><td style="text-align:center">73.3 / 69.3</td><td style="text-align:center">77.9 / 73.0</td><td style="text-align:center"></td><td style="text-align:center">88.5 / 75.1</td><td style="text-align:center">-</td></tr></tbody></table><h2 id="Person-Re-identification-Person-Retrieval"><a href="#Person-Re-identification-Person-Retrieval" class="headerlink" title="Person Re-identification / Person Retrieval"></a>Person Re-identification / Person Retrieval</h2><p><strong>DeepReID: Deep Filter Pairing Neural Network for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2014<br>ã€€ã€€paper: <a href="http://www.cv-foundation.org/openaccess/content_cvpr_2014/papers/Li_DeepReID_Deep_Filter_2014_CVPR_paper.pdf">http://www.cv-foundation.org/openaccess/content_cvpr_2014/papers/Li_DeepReID_Deep_Filter_2014_CVPR_paper.pdf</a></p><p><strong>An Improved Deep Learning Architecture for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2015<br>ã€€ã€€paper: <a href="http://www.cv-foundation.org/openaccess/content_cvpr_2015/papers/Ahmed_An_Improved_Deep_2015_CVPR_paper.pdf">http://www.cv-foundation.org/openaccess/content_cvpr_2015/papers/Ahmed_An_Improved_Deep_2015_CVPR_paper.pdf</a><br>ã€€ã€€github: <a href="https://github.com/Ning-Ding/Implementation-CVPR2015-CNN-for-ReID">https://github.com/Ning-Ding/Implementation-CVPR2015-CNN-for-ReID</a></p><p><strong>Deep Ranking for Person Re-identification via Joint Representation Learning</strong><br>ã€€ã€€intro: IEEE Transactions on Image Processing (TIP), 2016<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1505.06821">https://arxiv.org/abs/1505.06821</a></p><p><strong>PersonNet: Person Re-identification with Deep Convolutional Neural Networks</strong><br>ã€€ã€€arxiv: <a href="http://arxiv.org/abs/1601.07255">http://arxiv.org/abs/1601.07255</a></p><p><strong>Learning Deep Feature Representations with Domain Guided Dropout for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2016<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1604.07528">https://arxiv.org/abs/1604.07528</a><br>ã€€ã€€github: <a href="https://github.com/Cysu/dgd_person_reid">https://github.com/Cysu/dgd_person_reid</a></p><p><strong>Person Re-Identification by Multi-Channel Parts-Based CNN with Improved Triplet Loss Function</strong><br>ã€€ã€€intro: CVPR 2016<br>ã€€ã€€paper: <a href="http://www.cv-foundation.org/openaccess/content_cvpr_2016/papers/Cheng_Person_Re-Identification_by_CVPR_2016_paper.pdf">http://www.cv-foundation.org/openaccess/content_cvpr_2016/papers/Cheng_Person_Re-Identification_by_CVPR_2016_paper.pdf</a></p><p><strong>Joint Learning of Single-image and Cross-image Representations for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2016<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2016/papers/Wang_Joint_Learning_of_CVPR_2016_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2016/papers/Wang_Joint_Learning_of_CVPR_2016_paper.pdf</a></p><p><strong>End-to-End Comparative Attention Networks for Person Re-identification</strong><br>ã€€ã€€paper: <a href="https://arxiv.org/abs/1606.04404">https://arxiv.org/abs/1606.04404</a></p><p><strong>A Multi-task Deep Network for Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2017<br>ã€€ã€€arxiv: <a href="http://arxiv.org/abs/1607.05369">http://arxiv.org/abs/1607.05369</a></p><p><strong>A Siamese Long Short-Term Memory Architecture for Human Re-Identification</strong><br>ã€€ã€€arxiv: <a href="http://arxiv.org/abs/1607.08381">http://arxiv.org/abs/1607.08381</a></p><p><strong>Gated Siamese Convolutional Neural Network Architecture for Human Re-Identification</strong><br>ã€€ã€€intro: ECCV 2016<br>ã€€ã€€keywords: Market1501 rank1 = 65.9%<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1607.08378">https://arxiv.org/abs/1607.08378</a></p><p><strong>Deep Neural Networks with Inexact Matching for Person Re-Identification</strong><br>ã€€ã€€intro: NIPS 2016<br>ã€€ã€€keywords: Normalized correlation layer, CUHK03/CUHK01/QMULGRID<br>ã€€ã€€paper: <a href="https://papers.nips.cc/paper/6367-deep-neural-networks-with-inexact-matching-for-person-re-identification">https://papers.nips.cc/paper/6367-deep-neural-networks-with-inexact-matching-for-person-re-identification</a><br>ã€€ã€€github: <a href="https://github.com/InnovArul/personreid_normxcorr">https://github.com/InnovArul/personreid_normxcorr</a></p><p><strong>Person Re-identification: Past, Present and Future</strong><br>ã€€ã€€paper: <a href="https://arxiv.org/abs/1610.02984">https://arxiv.org/abs/1610.02984</a><br>ã€€ã€€note: <a href="https://blog.csdn.net/zdh2010xyz/article/details/53741682">https://blog.csdn.net/zdh2010xyz/article/details/53741682</a></p><p><strong>Deep Learning Prototype Domains for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1610.05047">https://arxiv.org/abs/1610.05047</a></p><p><strong>Deep Transfer Learning for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1611.05244">https://arxiv.org/abs/1611.05244</a><br>ã€€ã€€note: <a href="https://blog.csdn.net/shenxiaolu1984/article/details/53607268">https://blog.csdn.net/shenxiaolu1984/article/details/53607268</a></p><p><strong>A Discriminatively Learned CNN Embedding for Person Re-identification</strong><br>ã€€ã€€intro: TOMM 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1611.05666">https://arxiv.org/abs/1611.05666</a><br>ã€€ã€€github(official, MatConvnet): <a href="https://github.com/layumi/2016_person_re-ID">https://github.com/layumi/2016_person_re-ID</a><br>ã€€ã€€github: <a href="https://github.com/D-X-Y/caffe-reid">https://github.com/D-X-Y/caffe-reid</a></p><p><strong>Person Re-Identification via Recurrent Feature Aggregation</strong><br>ã€€ã€€intro: ECCV 2016<br>ã€€ã€€keywords: recurrent feature aggregation network (RFA-Net)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1701.06351">https://arxiv.org/abs/1701.06351</a><br>ã€€ã€€code: <a href="https://sites.google.com/site/yanyichao91sjtu/">https://sites.google.com/site/yanyichao91sjtu/</a><br>ã€€ã€€github(official): <a href="https://github.com/daodaofr/caffe-re-id">https://github.com/daodaofr/caffe-re-id</a></p><p><strong>Structured Deep Hashing with Convolutional Neural Networks for Fast Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1702.04179">https://arxiv.org/abs/1702.04179</a></p><p><strong>SVDNet for Pedestrian Retrieval</strong><br>ã€€ã€€intro: ICCV 2017 spotlight<br>ã€€ã€€intro: On the Market-1501 dataset, rank-1 accuracy is improved from 55.2% to 80.5% for CaffeNet,<br>and from 73.8% to 83.1% for ResNet-50<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1703.05693">https://arxiv.org/abs/1703.05693</a><br>ã€€ã€€github: <a href="https://github.com/syfafterzy/SVDNet-for-Pedestrian-Retrieval">https://github.com/syfafterzy/SVDNet-for-Pedestrian-Retrieval</a></p><p><strong>In Defense of the Triplet Loss for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1703.07737">https://arxiv.org/abs/1703.07737</a><br>ã€€ã€€github(Theano): <a href="https://github.com/VisualComputingInstitute/triplet-reid">https://github.com/VisualComputingInstitute/triplet-reid</a></p><p><strong>Beyond triplet loss: a deep quadruplet network for person re-identification</strong><br>ã€€ã€€intro: CVPR 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1704.01719">https://arxiv.org/abs/1704.01719</a><br>ã€€ã€€ppaper: <a href="http://cvip.computing.dundee.ac.uk/papers/Chen_CVPR_2017_paper.pdf">http://cvip.computing.dundee.ac.uk/papers/Chen_CVPR_2017_paper.pdf</a></p><p><strong>Quality Aware Network for Set to Set Recognition</strong><br>ã€€ã€€intro: CVPR 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1704.03373">https://arxiv.org/abs/1704.03373</a><br>ã€€ã€€github: <a href="https://github.com/sciencefans/Quality-Aware-Network">https://github.com/sciencefans/Quality-Aware-Network</a></p><p><strong>Learning Deep Context-aware Features over Body and Latent Parts for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2017. CASIA<br>ã€€ã€€keywords: Multi-Scale Context-Aware Network (MSCAN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1710.06555">https://arxiv.org/abs/1710.06555</a><br>ã€€ã€€supplemental: <a href="http://openaccess.thecvf.com/content_cvpr_2017/supplemental/Li_Learning_Deep_Context-Aware_2017_CVPR_supplemental.pdf">Li_Learning_Deep_Context-Aware_2017_CVPR_supplemental.pdf</a></p><p><strong>Point to Set Similarity Based Deep Feature Learning for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2017<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2017/papers/Zhou_Point_to_Set_CVPR_2017_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2017/papers/Zhou_Point_to_Set_CVPR_2017_paper.pdf</a><br>ã€€ã€€github(stay tuned): <a href="https://github.com/samaonline/Point-to-Set-Similarity-Based-Deep-Feature-Learning-for-Person-Re-identification">https://github.com/samaonline/Point-to-Set-Similarity-Based-Deep-Feature-Learning-for-Person-Re-identification</a></p><p><strong>Scalable Person Re-identification on Supervised Smoothed Manifold</strong><br>ã€€ã€€intro: CVPR 2017 spotlight<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1703.08359">https://arxiv.org/abs/1703.08359</a><br>ã€€ã€€youtube: <a href="https://www.youtube.com/watch?v=bESdJgalQrg">https://www.youtube.com/watch?v=bESdJgalQrg</a></p><p><strong>Attention-based Natural Language Person Retrieval</strong><br>ã€€ã€€intro: CVPR 2017 Workshop (vision meets cognition)<br>ã€€ã€€keywords: Bidirectional Long Shortã€€ã€€Term Memory (BLSTM)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.08923">https://arxiv.org/abs/1705.08923</a></p><p><strong>Part-based Deep Hashing for Large-scale Person Re-identification</strong><br>ã€€ã€€intro: IEEE Transactions on Image Processing, 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.02145">https://arxiv.org/abs/1705.02145</a></p><p><strong>Deep Person Re-Identification with Improved Embedding and Efficient Training</strong><br>ã€€ã€€intro: IJCB 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.03332">https://arxiv.org/abs/1705.03332</a></p><p><strong>Towards a Principled Integration of Multi-Camera Re-Identification and Tracking through Optimal Bayes Filters</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.04608">https://arxiv.org/abs/1705.04608</a><br>ã€€ã€€github: <a href="https://github.com/VisualComputingInstitute/towards-reid-tracking">https://github.com/VisualComputingInstitute/towards-reid-tracking</a></p><p><strong>Person Re-Identification by Deep Joint Learning of Multi-Loss Classification</strong><br>ã€€ã€€intro: IJCAI 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.04724">https://arxiv.org/abs/1705.04724</a></p><p><strong>Deep Representation Learning with Part Loss for Person Re-Identification</strong><br>ã€€ã€€keywords: Part Loss Networks<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.00798">https://arxiv.org/abs/1707.00798</a></p><p><strong>Pedestrian Alignment Network for Large-scale Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.00408">https://arxiv.org/abs/1707.00408</a><br>ã€€ã€€github: <a href="https://github.com/layumi/Pedestrian_Alignment">https://github.com/layumi/Pedestrian_Alignment</a></p><p><strong>Learning Efficient Image Representation for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.02319">https://arxiv.org/abs/1707.02319</a></p><p><strong>Person Re-identification Using Visual Attention</strong><br>ã€€ã€€intro: ICIP 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.07336">https://arxiv.org/abs/1707.07336</a></p><p><strong>What-and-Where to Match: Deep Spatially Multiplicative Integration Networks for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.07074">https://arxiv.org/abs/1707.07074</a></p><p><strong>Deep Feature Learning via Structured Graph Laplacian Embedding for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.07791">https://arxiv.org/abs/1707.07791</a></p><p><strong>Large Margin Learning in Set to Set Similarity Comparison for Person Re-identification</strong><br>ã€€ã€€intro: IEEE Transactions on Multimedia<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1708.05512">https://arxiv.org/abs/1708.05512</a></p><p><strong>Multi-scale Deep Learning Architectures for Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1709.05165">https://arxiv.org/abs/1709.05165</a></p><p><strong>Person Re-Identification by Deep Learning Multi-Scale Representations</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€keywords: Deep Pyramid Feature Learning (DPFL)<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_ICCV_2017_workshops/papers/w37/Chen_Person_Re-Identification_by_ICCV_2017_paper.pdf">Chen_Person_Re-Identification_by_ICCV_2017_paper.pdf</a><br>ã€€ã€€paper: <a href="http://www.eecs.qmul.ac.uk/~sgg/papers/ChenEtAl_ICCV2017WK_CHI.pdf">http://www.eecs.qmul.ac.uk/~sgg/papers/ChenEtAl_ICCV2017WK_CHI.pdf</a></p><p><strong>HydraPlus-Net: Attentive Deep Features for Pedestrian Analysis</strong><br>ã€€ã€€intro: ICCV 2017. CUHK &amp; SenseTime,<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1709.09930">https://arxiv.org/abs/1709.09930</a><br>ã€€ã€€github: <a href="https://github.com/xh-liu/HydraPlus-Net">https://github.com/xh-liu/HydraPlus-Net</a></p><p><strong>Person Re-Identification with Vision and Language</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1710.01202">https://arxiv.org/abs/1710.01202</a></p><p><strong>Margin Sample Mining Loss: A Deep Learning Based Method for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1710.00478">https://arxiv.org/abs/1710.00478</a></p><p><strong>Pseudo-positive regularization for deep person re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.06500">https://arxiv.org/abs/1711.06500</a></p><p><strong>Let Features Decide for Themselves: Feature Mask Network for Person Re-identification</strong><br>ã€€ã€€keywords: Feature Mask Network (FMN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.07155">https://arxiv.org/abs/1711.07155</a></p><p><strong>AlignedReID: Surpassing Human-Level Performance in Person Re-Identification</strong><br>ã€€ã€€intro: Megvii Inc &amp; Zhejiang University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.08184">https://arxiv.org/abs/1711.08184</a><br>ã€€ã€€evaluation website: (Market1501): <a href="http://reid-challenge.megvii.com/">http://reid-challenge.megvii.com/</a><br>ã€€ã€€evaluation website: (CUHK03): <a href="http://reid-challenge.megvii.com/cuhk03">http://reid-challenge.megvii.com/cuhk03</a><br>ã€€ã€€github: <a href="https://github.com/huanghoujing/AlignedReID-Re-Production-Pytorch">https://github.com/huanghoujing/AlignedReID-Re-Production-Pytorch</a></p><p><strong>Region-based Quality Estimation Network for Large-scale Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.08766">https://arxiv.org/abs/1711.08766</a></p><p><strong>Beyond Part Models: Person Retrieval with Refined Part Pooling</strong><br>ã€€ã€€keywords: Part-based Convolutional Baseline (PCB), Refined Part Pooling (RPP)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.09349">https://arxiv.org/abs/1711.09349</a></p><p><strong>Deep-Person: Learning Discriminative Deep Features for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.10658">https://arxiv.org/abs/1711.10658</a></p><p><strong>Hierarchical Cross Network for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.06820">https://arxiv.org/abs/1712.06820</a></p><p><strong>Re-ID done right: towards good practices for person re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1801.05339">https://arxiv.org/abs/1801.05339</a></p><p><strong>Triplet-based Deep Similarity Learning for Person Re-Identification</strong><br>ã€€ã€€intro: ICCV Workshops 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1802.03254">https://arxiv.org/abs/1802.03254</a></p><p><strong>Group Consistent Similarity Learning via Deep CRFs for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018 oral<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Chen_Group_Consistent_Similarity_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Chen_Group_Consistent_Similarity_CVPR_2018_paper.pdf</a></p><p><strong>Image-Image Domain Adaptation with Preserved Self-Similarity and Domain-Dissimilarity for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€keywords: similarity preserving generative adversarial network (SPGAN), Siamese network, CycleGAN, domain adaptation<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.07027">https://arxiv.org/abs/1711.07027</a></p><p><strong>Harmonious Attention Network for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€keywords: Harmonious Attention CNN (HA-CNN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1802.08122">https://arxiv.org/abs/1802.08122</a></p><p><strong>Camera Style Adaptation for Person Re-identfication</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.10295">https://arxiv.org/abs/1711.10295</a><br>ã€€ã€€github: <a href="https://github.com/zhunzhong07/CamStyle">https://github.com/zhunzhong07/CamStyle</a></p><p><strong>Image-Image Domain Adaptation with Preserved Self-Similarity and Domain-Dissimilarity for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.07027">https://arxiv.org/abs/1711.07027</a></p><p><strong>Dual Attention Matching Network for Context-Aware Feature Sequence based Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.09937">https://arxiv.org/abs/1803.09937</a></p><p><strong>Multi-Level Factorisation Net for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€keywords: Multi-Level Factorisation Net (MLFN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.09132">https://arxiv.org/abs/1803.09132</a></p><p><strong>Features for Multi-Target Multi-Camera Tracking and Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.10859">https://arxiv.org/abs/1803.10859</a></p><p><strong>Good Appearance Features for Multi-Target Multi-Camera Tracking</strong><br>ã€€ã€€intro: CVPR 2018 spotlight. Duke University<br>ã€€ã€€keywords: adaptive weighted triplet loss, hard-identity mining<br>ã€€ã€€project page: <a href="http://vision.cs.duke.edu/DukeMTMC/">http://vision.cs.duke.edu/DukeMTMC/</a><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.10859">https://arxiv.org/abs/1803.10859</a></p><p><strong>Mask-guided Contrastive Attention Model for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Song_Mask-Guided_Contrastive_Attention_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Song_Mask-Guided_Contrastive_Attention_CVPR_2018_paper.pdf</a></p><p><strong>Efficient and Deep Person Re-Identification using Multi-Level Similarity</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.11353">https://arxiv.org/abs/1803.11353</a></p><p><strong>Person Re-identification with Cascaded Pairwise Convolutions</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Wang_Person_Re-Identification_With_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Wang_Person_Re-Identification_With_CVPR_2018_paper.pdf</a></p><p><strong>Attention-Aware Compositional Network for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€intro: Sensets Technology Limited &amp; University of Sydney<br>ã€€ã€€keywords: Attention-Aware Compositional Network (AACN), Pose-guided Part Attention (PPA), Attention-aware Feature Composition (AFC)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1805.03344">https://arxiv.org/abs/1805.03344</a></p><p><strong>Deep Group-shuffling Random Walk for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Shen_Deep_Group-Shuffling_Random_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Shen_Deep_Group-Shuffling_Random_CVPR_2018_paper.pdf</a></p><p><strong>Adversarially Occluded Samples for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Huang_Adversarially_Occluded_Samples_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Huang_Adversarially_Occluded_Samples_CVPR_2018_paper.pdf</a></p><p><strong>Easy Identification from Better Constraints: Multi-Shot Person Re-Identification from Reference Constraints</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Zhou_Easy_Identification_From_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Zhou_Easy_Identification_From_CVPR_2018_paper.pdf</a></p><p><strong>Eliminating Background-bias for Robust Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Tian_Eliminating_Background-Bias_for_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Tian_Eliminating_Background-Bias_for_CVPR_2018_paper.pdf</a></p><p><strong>End-to-End Deep Kronecker-Product Matching for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Shen_End-to-End_Deep_Kronecker-Product_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Shen_End-to-End_Deep_Kronecker-Product_CVPR_2018_paper.pdf</a></p><p><strong>Exploiting Transitivity for Learning Person Re-identification Models on a Budget</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Roy_Exploiting_Transitivity_for_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Roy_Exploiting_Transitivity_for_CVPR_2018_paper.pdf</a></p><p><strong>Resource Aware Person Re-identification across Multiple Resolutions</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Wang_Resource_Aware_Person_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Wang_Resource_Aware_Person_CVPR_2018_paper.pdf</a></p><p><strong>Multi-Channel Pyramid Person Matching Network for Person Re-Identification</strong><br>ã€€ã€€intro: 32nd AAAI Conference on Artificial Intelligence<br>ã€€ã€€keywords: Multi-Channel deep convolutional Pyramid Person Matching Network (MC-PPMN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.02558">https://arxiv.org/abs/1803.02558</a></p><p><strong>Pyramid Person Matching Network for Person Re-identification</strong><br>ã€€ã€€intro: 9th Asian Conference on Machine Learning (ACML2017) JMLR Workshop and Conference Proceedings<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.02547">https://arxiv.org/abs/1803.02547</a></p><p><strong>Virtual CNN Branching: Efficient Feature Ensemble for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.05872">https://arxiv.org/abs/1803.05872</a></p><p><strong>Adversarial Binary Coding for Efficient Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.10914">https://arxiv.org/abs/1803.10914</a></p><p><strong>Learning View-Specific Deep Networks for Person Re-Identification</strong><br>ã€€ã€€intro: IEEE Transactions on image processing. Sun Yat-Sen University<br>ã€€ã€€keywords: cross-view Euclidean constraint (CV-EC), cross-view center loss (CV-CL)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.11333">https://arxiv.org/abs/1803.11333</a></p><p><strong>Learning Discriminative Features with Multiple Granularities for Person Re-Identification</strong><br>ã€€ã€€intro: Shanghai Jiao Tong University &amp; CloudWalk<br>ã€€ã€€keywords: Multiple Granularity Network (MGN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.01438">https://arxiv.org/abs/1804.01438</a></p><p><strong>Recurrent Neural Networks for Person Re-identification Revisited</strong><br>ã€€ã€€intro: Stanford University &amp; Google AI<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.03281">https://arxiv.org/abs/1804.03281</a></p><p><strong>MaskReID: A Mask Based Deep Ranking Neural Network for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.03864">https://arxiv.org/abs/1804.03864</a></p><p><strong>Horizontal Pyramid Matching for Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€intro: UIUC &amp; IBM Research &amp; Cornell University &amp; Stevens Institute of Technology &amp;CloudWalk Technology<br>ã€€ã€€keywords: Horizontal Pyramid Matching (HPM), Horizontal Pyramid Pooling (HPP), horizontal random erasing (HRE)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.05275">https://arxiv.org/abs/1804.05275</a><br>ã€€ã€€github: <a href="https://github.com/OasisYang/HPM">https://github.com/OasisYang/HPM</a></p><p><strong>Part-Aligned Bilinear Representations for Person Re-identification</strong><br>ã€€ã€€intro: Seoul National University &amp; Microsoft Research &amp; Max Planck Institute &amp; University of Tubingen &amp; JD.COM<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.07094">https://arxiv.org/abs/1804.07094</a></p><p><strong>Deep Co-attention based Comparators For Relative Representation Learning in Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.11027">https://arxiv.org/abs/1804.11027</a></p><p><strong>Feature Affinity based Pseudo Labeling for Semi-supervised Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1805.06118">https://arxiv.org/abs/1805.06118</a></p><p><strong>Resource Aware Person Re-identification across Multiple Resolutions</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1805.08805">https://arxiv.org/abs/1805.08805</a></p><p><strong>Semantically Selective Augmentation for Deep Compact Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1806.04074">https://arxiv.org/abs/1806.04074</a></p><p><strong>SphereReID: Deep Hypersphere Manifold Embedding for Person Re-Identification</strong><br>ã€€ã€€intro: it achieves 94.4% rank-1 accuracy on Market-1501 and 83.9% rank-1 accuracy on DukeMTMC-reID<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.00537">https://arxiv.org/abs/1807.00537</a></p><p><strong>Multi-task Mid-level Feature Alignment Network for Unsupervised Cross-Dataset Person Re-Identification</strong><br>ã€€ã€€intro: BMVC 2018. University of Warwick &amp; Nanyang Technological University &amp; Charles Sturt University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.01440">https://arxiv.org/abs/1807.01440</a></p><p><strong>Discriminative Feature Learning with Foreground Attention for Person Re-Identification</strong><br>    arxiv: <a href="https://arxiv.org/abs/1807.01455">https://arxiv.org/abs/1807.01455</a></p><p><strong>Part-Aligned Bilinear Representations for Person Re-identification</strong><br>ã€€ã€€intro: ECCV 2018<br>ã€€ã€€intro: Seoul National University &amp; Microsoft Research &amp; Max Planck Institute &amp; University of Tubingen &amp; JD.COM<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.07094">https://arxiv.org/abs/1804.07094</a><br>ã€€ã€€github: <a href="https://github.com/yuminsuh/part_bilinear_reid">https://github.com/yuminsuh/part_bilinear_reid</a></p><p><strong>Mancs: A Multi-task Attentional Network with Curriculum Sampling for Person Re-identification</strong><br>ã€€ã€€intro: ECCV 2018. Huazhong University of Science and Technology &amp; Horizon Robotics Inc.</p><p><strong>Improving Deep Visual Representation for Person Re-identification by Global and Local Image-language Association</strong><br>ã€€ã€€intro: ECCV 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1808.01571">https://arxiv.org/abs/1808.01571</a></p><p><strong>Deep Sequential Multi-camera Feature Fusion for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.07295">https://arxiv.org/abs/1807.07295</a></p><p><strong>Improving Deep Models of Person Re-identification for Cross-Dataset Usage</strong><br>ã€€ã€€intro: AIAI 2018 (14th International Conference on Artificial Intelligence Applications and Innovations) proceeding<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.08526">https://arxiv.org/abs/1807.08526</a></p><p><strong>Measuring the Temporal Behavior of Real-World Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1808.05499">https://arxiv.org/abs/1808.05499</a></p><p><strong>Alignedreidï¼‹+: Dynamically Matching Local Information for Person Re-Identification</strong><br>ã€€ã€€github: <a href="https://github.com/michuanhaohao/AlignedReID">https://github.com/michuanhaohao/AlignedReID</a></p><p><strong>Sparse Label Smoothing for Semi-supervised Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1809.04976">https://arxiv.org/abs/1809.04976</a><br>ã€€ã€€github: <a href="https://github.com/jpainam/SLS_ReID">https://github.com/jpainam/SLS_ReID</a></p><p><strong>In Defense of the Classification Loss for Person Re-Identification</strong><br>ã€€ã€€intro: University of Science and Technology of China &amp; Microsoft Research Asia<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1809.05864">https://arxiv.org/abs/1809.05864</a></p><p><strong>FD-GAN: Pose-guided Feature Distilling GAN for Robust Person Re-identification</strong><br>ã€€ã€€intro: NIPS 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.02936">https://arxiv.org/abs/1810.02936</a><br>ã€€ã€€github(Pytorch, official): <a href="https://github.com/yxgeee/FD-GAN">https://github.com/yxgeee/FD-GAN</a></p><p><strong>Image-to-Video Person Re-Identification by Reusing Cross-modal Embeddings</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.03989">https://arxiv.org/abs/1810.03989</a></p><p><strong>Attention Driven Person Re-identification</strong><br>ã€€ã€€intro: Pattern Recognition (PR)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.05866">https://arxiv.org/abs/1810.05866</a></p><p><strong>A Coarse-to-fine Pyramidal Model for Person Re-identification via Multi-Loss Dynamic Training</strong><br>ã€€ã€€intro: YouTu Lab, Tencent<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.12193">https://arxiv.org/abs/1810.12193</a></p><p><strong>M2M-GAN: Many-to-Many Generative Adversarial Transfer Learning for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.03768">https://arxiv.org/abs/1811.03768</a></p><p><strong>Batch Feature Erasing for Person Re-identification and Beyond</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.07130">https://arxiv.org/abs/1811.07130</a><br>ã€€ã€€github(official, Pytorch): <a href="https://github.com/daizuozhuo/batch-feature-erasing-network">https://github.com/daizuozhuo/batch-feature-erasing-network</a></p><p><strong>Re-Identification with Consistent Attentive Siamese Networks</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.07487">https://arxiv.org/abs/1811.07487</a></p><p><strong>One Shot Domain Adaptation for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.10144">https://arxiv.org/abs/1811.10144</a></p><p><strong>Parameter-Free Spatial Attention Network for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.12150">https://arxiv.org/abs/1811.12150</a></p><p><strong>Spectral Feature Transformation for Person Re-identification</strong><br>ã€€ã€€intro: University of Chinese Academy of Sciences &amp; TuSimple<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.11405">https://arxiv.org/abs/1811.11405</a></p><p><strong>Identity Preserving Generative Adversarial Network for Cross-Domain Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.11510">https://arxiv.org/abs/1811.11510</a></p><p><strong>Dissecting Person Re-identification from the Viewpoint of Viewpoint</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.02162">https://arxiv.org/abs/1812.02162</a></p><p><strong>Fast and Accurate Person Re-Identification with RMNet</strong><br>ã€€ã€€intro: IOTG Computer Vision (ICV), Intel<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.02465">https://arxiv.org/abs/1812.02465</a></p><p><strong>Spatial-Temporal Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€intro: Sun Yat-sen University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.03282">https://arxiv.org/abs/1812.03282</a><br>ã€€ã€€github: <a href="https://github.com/Wanggcong/Spatial-Temporal-Re-identification">https://github.com/Wanggcong/Spatial-Temporal-Re-identification</a></p><p><strong>Omni-directional Feature Learning for Person Re-identification</strong><br>ã€€ã€€intro: Tongji University<br>ã€€ã€€keywords: OIM loss<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.05319">https://arxiv.org/abs/1812.05319</a></p><p><strong>Learning Incremental Triplet Margin for Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2019 spotlight<br>ã€€ã€€intro: Hikvision Research Institute<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.06576">https://arxiv.org/abs/1812.06576</a></p><p><strong>Densely Semantically Aligned Person Re-Identification</strong><br>ã€€ã€€intro: USTC &amp; MSRA<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.08967">https://arxiv.org/abs/1812.08967</a></p><p><strong>EANet: Enhancing Alignment for Cross-Domain Person Re-identification</strong><br>ã€€ã€€intro: CRISE &amp; CASIA &amp; Horizon Robotics<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.11369">https://arxiv.org/abs/1812.11369</a><br>ã€€ã€€github(official, Pytorch): <a href="https://github.com/huanghoujing/EANet">https://github.com/huanghoujing/EANet</a><br>ã€€ã€€blog: <a href="https://zhuanlan.zhihu.com/p/53660395">https://zhuanlan.zhihu.com/p/53660395</a></p><p><strong>Backbone Can Not be Trained at Once: Rolling Back to Pre-trained Network for Person Re-Identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€intro: Seoul National University &amp; Samsung SDS<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.06140">https://arxiv.org/abs/1901.06140</a></p><p><strong>Ensemble Feature for Person Re-Identification</strong><br>ã€€ã€€keywords: EnsembleNet<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.05798">https://arxiv.org/abs/1901.05798</a></p><p><strong>Adversarial Metric Attack for Person Re-identification</strong><br>ã€€ã€€intro: University of Oxford &amp; Johns Hopkins University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.10650">https://arxiv.org/abs/1901.10650</a></p><p><strong>Discovering Underlying Person Structure Pattern with Relative Local Distance for Person Re-identification</strong><br>ã€€ã€€intro: SYSU<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.10100">https://arxiv.org/abs/1901.10100</a><br>ã€€ã€€github: <a href="https://github.com/Wanggcong/RLD_codes">https://github.com/Wanggcong/RLD_codes</a></p><p><strong>Attributes-aided Part Detection and Refinement for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1902.10528">https://arxiv.org/abs/1902.10528</a></p><p><strong>Bags of Tricks and A Strong Baseline for Deep Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.07071">https://arxiv.org/abs/1903.07071</a><br>ã€€ã€€github: <a href="https://github.com/michuanhaohao/reid-strong-baseline">https://github.com/michuanhaohao/reid-strong-baseline</a></p><p><strong>Auto-ReID: Searching for a Part-aware ConvNet for Person Re-Identification</strong><br>ã€€ã€€keywords: NAS<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.09776">https://arxiv.org/abs/1903.09776</a></p><p><strong>Perceive Where to Focus: Learning Visibility-aware Part-level Features for Partial Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2019<br>ã€€ã€€intro: Tsinghua University &amp; Megvii Technology<br>ã€€ã€€keywords: Visibility-aware Part Model (VPM)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.00537">https://arxiv.org/abs/1904.00537</a></p><p><strong>Pedestrian re-identification based on Tree branch network with local and global learning</strong><br>ã€€ã€€intro: ICME 2019 oral<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.00355">https://arxiv.org/abs/1904.00355</a></p><p><strong>Invariance Matters: Exemplar Memory for Domain Adaptive Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.01990">https://arxiv.org/abs/1904.01990</a><br>ã€€ã€€github: <a href="https://github.com/zhunzhong07/ECN">https://github.com/zhunzhong07/ECN</a></p><p><strong>Person Re-identification with Bias-controlled Adversarial Training</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.00244">https://arxiv.org/abs/1904.00244</a></p><p><strong>Person Re-identification with Metric Learning using Privileged Information</strong><br>ã€€ã€€intro: IEEE TIP<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.05005">https://arxiv.org/abs/1904.05005</a></p><p><strong>Joint Discriminative and Generative Learning for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2019 oral<br>ã€€ã€€intro: NVIDIA &amp; University of Technology Sydney &amp; Australian National University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.07223">https://arxiv.org/abs/1904.07223</a></p><h2 id="Person-Search"><a href="#Person-Search" class="headerlink" title="Person Search"></a>Person Search</h2><p><strong>Joint Detection and Identification Feature Learning for Person Search</strong><br>ã€€ã€€intro: CVPR 2017 Spotlight<br>ã€€ã€€keywords: Online Instance Matching (OIM) loss function<br>ã€€ã€€homepage(dataset+code):<a href="http://www.ee.cuhk.edu.hk/~xgwang/PS/dataset.html">http://www.ee.cuhk.edu.hk/~xgwang/PS/dataset.html</a><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1604.01850">https://arxiv.org/abs/1604.01850</a><br>ã€€ã€€paper: <a href="http://www.ee.cuhk.edu.hk/~xgwang/PS/paper.pdf">http://www.ee.cuhk.edu.hk/~xgwang/PS/paper.pdf</a><br>ã€€ã€€github(official. Caffe): <a href="https://github.com/ShuangLI59/person_search">https://github.com/ShuangLI59/person_search</a></p><p><strong>Person Re-identification in the Wild</strong><br>ã€€ã€€intro: CVPR 2017 spotlight<br>ã€€ã€€keywords: PRW dataset<br>ã€€ã€€project page: <a href="http://www.liangzheng.com.cn/Project/project_prw.html">http://www.liangzheng.com.cn/Project/project_prw.html</a><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1604.02531">https://arxiv.org/abs/1604.02531</a><br>ã€€ã€€github: <a href="https://github.com/liangzheng06/PRW-baseline">https://github.com/liangzheng06/PRW-baseline</a><br>ã€€ã€€youtube: <a href="https://www.youtube.com/watch?v=dbOGwBITJqo">https://www.youtube.com/watch?v=dbOGwBITJqo</a></p><p><strong>IAN: The Individual Aggregation Network for Person Search</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.05552">https://arxiv.org/abs/1705.05552</a></p><p><strong>Neural Person Search Machines</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.06777">https://arxiv.org/abs/1707.06777</a></p><p><strong>End-to-End Detection and Re-identification Integrated Net for Person Search</strong><br>ã€€ã€€keywords: I-Net<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.00376">https://arxiv.org/abs/1804.00376</a></p><p><strong>Person Search via A Mask-guided Two-stream CNN Model</strong><br>ã€€ã€€intro: ECCV 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.08107">https://arxiv.org/abs/1807.08107</a></p><p><strong>Person Search by Multi-Scale Matching</strong><br>ã€€ã€€intro: ECCV 2018<br>ã€€ã€€keywords: Cross-Level Semantic Alignment (CLSA)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.08582">https://arxiv.org/abs/1807.08582</a></p><p><strong>Learning Context Graph for Person Search</strong><br>ã€€ã€€intro: CVPR 2019<br>ã€€ã€€intro: Shanghai Jiao Tong University &amp; Tencent YouTu Lab &amp; Inception Institute of Artificial Intelligence, UAE<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.01830">https://arxiv.org/abs/1904.01830</a></p><h2 id="Pose-View-for-Re-ID"><a href="#Pose-View-for-Re-ID" class="headerlink" title="Pose/View for Re-ID"></a>Pose/View for Re-ID</h2><p><strong>Pose Invariant Embedding for Deep Person Re-identification</strong><br>ã€€ã€€keywords: pose invariant embedding (PIE), PoseBox fusion (PBF) CNN<br>ã€€ã€€arixv: <a href="https://arxiv.org/abs/1701.07732">https://arxiv.org/abs/1701.07732</a></p><p><strong>Deeply-Learned Part-Aligned Representations for Person Re-Identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.07256">https://arxiv.org/abs/1707.07256</a><br>ã€€ã€€github(official, Caffe): <a href="https://github.com/zlmzju/part_reid">https://github.com/zlmzju/part_reid</a></p><p><strong>Spindle Net: Person Re-identification with Human Body Region Guided Feature Decomposition and Fusion</strong><br>ã€€ã€€intro: CVPR 2017<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2017/papers/Zhao_Spindle_Net_Person_CVPR_2017_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2017/papers/Zhao_Spindle_Net_Person_CVPR_2017_paper.pdf</a><br>ã€€ã€€github: <a href="https://github.com/yokattame/SpindleNet">https://github.com/yokattame/SpindleNet</a></p><p><strong>Pose-driven Deep Convolutional Model for Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1709.08325">https://arxiv.org/abs/1709.08325</a></p><p><strong>A Pose-Sensitive Embedding for Person Re-Identification with Expanded Cross Neighborhood Re-Ranking</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.10378">https://arxiv.org/abs/1711.10378</a><br>ã€€ã€€github(official): <a href="https://github.com/pse-ecn/pose-sensitive-embedding">https://github.com/pse-ecn/pose-sensitive-embedding</a></p><p><strong>Pose-Driven Deep Models for Person Re-Identification</strong><br>ã€€ã€€intro: Masters thesis<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.08709">https://arxiv.org/abs/1803.08709</a></p><p><strong>Pose Transferrable Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Liu_Pose_Transferrable_Person_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Liu_Pose_Transferrable_Person_CVPR_2018_paper.pdf</a></p><p><strong>Person re-identification with fusion of hand-crafted and deep pose-based body region features</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.10630">https://arxiv.org/abs/1803.10630</a></p><h2 id="GAN-for-Re-ID"><a href="#GAN-for-Re-ID" class="headerlink" title="GAN for Re-ID"></a>GAN for Re-ID</h2><p><strong>Unlabeled Samples Generated by GAN Improve the Person Re-identification Baseline in vitro</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1701.07717">https://arxiv.org/abs/1701.07717</a><br>ã€€ã€€github(official, Matlab): <a href="https://github.com/layumi/Person-reID_GAN">https://github.com/layumi/Person-reID_GAN</a><br>ã€€ã€€github: <a href="https://github.com/qiaoguan/Person-reid-GAN-pytorch">https://github.com/qiaoguan/Person-reid-GAN-pytorch</a></p><p><strong>Person Transfer GAN to Bridge Domain Gap for Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018 spotlight<br>ã€€ã€€intro: PTGAN<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.08565">https://arxiv.org/abs/1711.08565</a><br>ã€€ã€€github: <a href="https://github.com/JoinWei-PKU/PTGAN">https://github.com/JoinWei-PKU/PTGAN</a></p><p><strong>Pose-Normalized Image Generation for Person Re-identification</strong><br>ã€€ã€€keywords: PN-GAN<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.02225">https://arxiv.org/abs/1712.02225</a><br>ã€€ã€€github: <a href="https://github.com/naiq/PN_GAN">https://github.com/naiq/PN_GAN</a></p><p><strong>Multi-pseudo Regularized Label for Generated Samples in Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1801.06742">https://arxiv.org/abs/1801.06742</a></p><h2 id="Human-Parsing-for-Re-ID"><a href="#Human-Parsing-for-Re-ID" class="headerlink" title="Human Parsing for Re-ID"></a>Human Parsing for Re-ID</h2><p><strong>Human Semantic Parsing for Person Re-identification</strong><br>ã€€ã€€intro: CVPR 2018. SPReID<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.00216">https://arxiv.org/abs/1804.00216</a></p><p><strong>Improved Person Re-Identification Based on Saliency and Semantic Parsing with Deep Neural Network Models</strong><br>ã€€ã€€keywords: Saliency-Semantic Parsing Re-Identification (SSP-ReID)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.05618">https://arxiv.org/abs/1807.05618</a></p><h2 id="Partial-Person-Re-ID"><a href="#Partial-Person-Re-ID" class="headerlink" title="Partial Person Re-ID"></a>Partial Person Re-ID</h2><p><strong>Partial Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2015<br>ã€€ã€€arxiv: <a href="https://www.cv-foundation.org/openaccess/content_iccv_2015/papers/Zheng_Partial_Person_Re-Identification_ICCV_2015_paper.pdf">https://www.cv-foundation.org/openaccess/content_iccv_2015/papers/Zheng_Partial_Person_Re-Identification_ICCV_2015_paper.pdf</a></p><p><strong>Deep Spatial Feature Reconstruction for Partial Person Re-identification: Alignment-Free Approach</strong><br>ã€€ã€€intro: CVPR 2018.<br>ã€€ã€€keywords: Market1501 rank1=83.58%<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1801.00881">https://arxiv.org/abs/1801.00881</a></p><p><strong>Occluded Person Re-identification</strong><br>ã€€ã€€intro: ICME 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.02792">https://arxiv.org/abs/1804.02792</a></p><p><strong>Partial Person Re-identification with Alignment and Hallucination</strong><br>ã€€ã€€intro: Imperial College London<br>ã€€ã€€keywords: Partial Matching Net (PMN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.09162">https://arxiv.org/abs/1807.09162</a></p><p><strong>SCPNet: Spatial-Channel Parallelism Network for Joint Holistic and Partial Person Re-Identification</strong><br>ã€€ã€€intro: ACCV 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.06996">https://arxiv.org/abs/1810.06996</a></p><p><strong>STNReID : Deep Convolutional Networks with Pairwise Spatial Transformer Networks for Partial Person Re-identification</strong><br>ã€€ã€€intro: Zhejiang University &amp; Megvii Inc<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.07072">https://arxiv.org/abs/1903.07072</a></p><p><strong>Foreground-aware Pyramid Reconstruction for Alignment-free Occluded Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.04975">https://arxiv.org/abs/1904.04975</a></p><h2 id="RGB-IR-Re-ID"><a href="#RGB-IR-Re-ID" class="headerlink" title="RGB-IR Re-ID"></a>RGB-IR Re-ID</h2><p><strong>RGB-Infrared Cross-Modality Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="http://openaccess.thecvf.com/content_ICCV_2017/papers/Wu_RGB-Infrared_Cross-Modality_Person_ICCV_2017_paper.pdf">Wu_RGB-Infrared_Cross-Modality_Person_ICCV_2017_paper.pdf</a></p><h2 id="Depth-Based-Re-ID"><a href="#Depth-Based-Re-ID" class="headerlink" title="Depth-Based Re-ID"></a>Depth-Based Re-ID</h2><p><strong>Reinforced Temporal Attention and Split-Rate Transfer for Depth-Based Person Re-Identification</strong><br>ã€€ã€€intro: ECCV 2018<br>ã€€ã€€arxiv: <a href="http://openaccess.thecvf.com/content_ECCV_2018/papers/Nikolaos_Karianakis_Reinforced_Temporal_Attention_ECCV_2018_paper.pdf">Nikolaos_Karianakis_Reinforced_Temporal_Attention_ECCV_2018_paper.pdf</a></p><p><strong>A Cross-Modal Distillation Network for Person Re-identification in RGB-Depth</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1810.11641">https://arxiv.org/abs/1810.11641</a></p><h2 id="Low-Resolution-Re-ID"><a href="#Low-Resolution-Re-ID" class="headerlink" title="Low Resolution Re-ID"></a>Low Resolution Re-ID</h2><p><strong>Multi-scale Learning for Low-resolution Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2015<br>ã€€ã€€arxiv: <a href="https://www.cv-foundation.org/openaccess/content_iccv_2015/papers/Li_Multi-Scale_Learning_for_ICCV_2015_paper.pdf">https://www.cv-foundation.org/openaccess/content_iccv_2015/papers/Li_Multi-Scale_Learning_for_ICCV_2015_paper.pdf</a></p><p><strong>Cascaded SR-GAN for Scale-Adaptive Low Resolution Person Re-identification</strong><br>ã€€ã€€intro: IJCAI 2018<br>ã€€ã€€arxiv: <a href="https://www.ijcai.org/proceedings/2018/0541.pdf">https://www.ijcai.org/proceedings/2018/0541.pdf</a></p><p><strong>Deep Low-Resolution Person Re-Identification</strong><br>ã€€ã€€intro: AAAI 2018<br>ã€€ã€€keywords: Super resolution and Identity joiNt learninG (SING)<br>ã€€ã€€paper: <a href="http://www.eecs.qmul.ac.uk/~xiatian/papers/JiaoEtAl_2018AAAI.pdf">http://www.eecs.qmul.ac.uk/~xiatian/papers/JiaoEtAl_2018AAAI.pdf</a></p><h2 id="Reinforcement-Learning-for-Re-ID"><a href="#Reinforcement-Learning-for-Re-ID" class="headerlink" title="Reinforcement Learning for Re-ID"></a>Reinforcement Learning for Re-ID</h2><p><strong>Deep Reinforcement Learning Attention Selection for Person Re-Identification</strong><br><strong>Identity Alignment by Noisy Pixel Removal</strong><br>ã€€ã€€intro: BMVC 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.02785">https://arxiv.org/abs/1707.02785</a><br>ã€€ã€€paper: <a href="http://www.eecs.qmul.ac.uk/~sgg/papers/LanEtAl_2017BMVC.pdf">http://www.eecs.qmul.ac.uk/~sgg/papers/LanEtAl_2017BMVC.pdf</a></p><h2 id="Attributes-Prediction-for-Re-ID"><a href="#Attributes-Prediction-for-Re-ID" class="headerlink" title="Attributes Prediction for Re-ID"></a>Attributes Prediction for Re-ID</h2><p><strong>Multi-Task Learning with Low Rank Attribute Embedding for Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2015<br>ã€€ã€€paper: <a href="http://legacydirs.umiacs.umd.edu/~fyang/papers/iccv15.pdf">http://legacydirs.umiacs.umd.edu/~fyang/papers/iccv15.pdf</a></p><p><strong>Deep Attributes Driven Multi-Camera Person Re-identification</strong><br>ã€€ã€€intro: ECCV 2016<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1605.03259">https://arxiv.org/abs/1605.03259</a></p><p><strong>Improving Person Re-identification by Attribute and Identity Learning</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1703.07220">https://arxiv.org/abs/1703.07220</a></p><p><strong>Person Re-identification by Deep Learning Attribute-Complementary Information</strong><br>ã€€ã€€intro: CVPR 2017 workshop<br>ã€€ã€€paper: <a href="https://sci-hub.tw/10.1109/CVPRW.2017.186">https://sci-hub.tw/10.1109/CVPRW.2017.186</a></p><p><strong>CA3Net: Contextual-Attentional Attribute-Appearance Network for Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.07544">https://arxiv.org/abs/1811.07544</a></p><h2 id="Video-Person-Re-Identification"><a href="#Video-Person-Re-Identification" class="headerlink" title="Video Person Re-Identification"></a>Video Person Re-Identification</h2><p><strong>Recurrent Convolutional Network for Video-based Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2016<br>ã€€ã€€paper: <a href="http://www.cv-foundation.org/openaccess/content_cvpr_2016/papers/McLaughlin_Recurrent_Convolutional_Network_CVPR_2016_paper.pdf">McLaughlin_Recurrent_Convolutional_Network_CVPR_2016_paper.pdf</a><br>ã€€ã€€github: <a href="https://github.com/niallmcl/Recurrent-Convolutional-Video-ReID">https://github.com/niallmcl/Recurrent-Convolutional-Video-ReID</a></p><p><strong>Deep Recurrent Convolutional Networks for Video-based Person Re-identification: An End-to-End Approach</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1606.01609">https://arxiv.org/abs/1606.01609</a></p><p><strong>Jointly Attentive Spatial-Temporal Pooling Networks for Video-based Person Re-Identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1708.02286">https://arxiv.org/abs/1708.02286</a></p><p><strong>Three-Stream Convolutional Networks for Video-based Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.01652">https://arxiv.org/abs/1712.01652</a></p><p><strong>LVreID: Person Re-Identification with Long Sequence Videos</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.07286">https://arxiv.org/abs/1712.07286</a></p><p><strong>Multi-shot Pedestrian Re-identification via Sequential Decision Making</strong><br>ã€€ã€€intro: CVPR 2018. TuSimple<br>ã€€ã€€keywords: reinforcement learning<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.07257">https://arxiv.org/abs/1712.07257</a><br>ã€€ã€€github: <a href="https://github.com/TuSimple/rl-multishot-reid">https://github.com/TuSimple/rl-multishot-reid</a></p><p><strong>LVreID: Person Re-Identification with Long Sequence Videos</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1712.07286">https://arxiv.org/abs/1712.07286</a></p><p><strong>Diversity Regularized Spatiotemporal Attention for Video-based Person Re-identification</strong><br>ã€€ã€€intro: CUHK-SenseTime &amp; Argo AI<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.09882">https://arxiv.org/abs/1803.09882</a></p><p><strong>Video Person Re-identification with Competitive Snippet-similarity Aggregation and Co-attentive Snippet Embedding</strong><br>ã€€ã€€intro: CVPR 2018 Poster<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Chen_Video_Person_Re-Identification_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Chen_Video_Person_Re-Identification_CVPR_2018_paper.pdf</a></p><p><strong>Exploit the Unknown Gradually: One-Shot Video-Based Person Re-Identification by Stepwise Learning</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Wu_Exploit_the_Unknown_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Wu_Exploit_the_Unknown_CVPR_2018_paper.pdf</a></p><p><strong>Revisiting Temporal Modeling for Video-based Person ReID</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1805.02104">https://arxiv.org/abs/1805.02104</a><br>ã€€ã€€github: <a href="https://github.com/jiyanggao/Video-Person-ReID">https://github.com/jiyanggao/Video-Person-ReID</a></p><p><strong>Video Person Re-identification by Temporal Residual Learning</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1802.07918">https://arxiv.org/abs/1802.07918</a></p><p><strong>A Spatial and Temporal Features Mixture Model with Body Parts for Video-based Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.00975">https://arxiv.org/abs/1807.00975</a></p><p><strong>Video-based Person Re-identification via 3D Convolutional Networks and Non-local Attention</strong><br>ã€€ã€€intro: University of Science and Technology of China &amp; University of Chinese Academy of Sciences<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.05073">https://arxiv.org/abs/1807.05073</a></p><p><strong>Spatial-Temporal Synergic Residual Learning for Video Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.05799">https://arxiv.org/abs/1807.05799</a></p><p><strong>Where-and-When to Look: Deep Siamese Attention Networks for Video-based Person Re-identification</strong><br>ã€€ã€€intro: IEEE Transactions on Multimedia<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1808.01911">https://arxiv.org/abs/1808.01911</a></p><p><strong>STA: Spatial-Temporal Attention for Large-Scale Video-based Person Re-Identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.04129">https://arxiv.org/abs/1811.04129</a></p><p><strong>Multi-scale 3D Convolution Network for Video Based Person Re-Identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.07468">https://arxiv.org/abs/1811.07468</a></p><p><strong>Deep Active Learning for Video-based Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.05785">https://arxiv.org/abs/1812.05785</a></p><p><strong>Spatial and Temporal Mutual Promotion for Video-based Person Re-identification</strong><br>ã€€ã€€intro: AAAI 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.10305">https://arxiv.org/abs/1812.10305</a></p><p><strong>3D PersonVLAD: Learning Deep Global Representations for Video-based Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.10222">https://arxiv.org/abs/1812.10222</a></p><p><strong>SCAN: Self-and-Collaborative Attention Network for Video Person Re-identification</strong><br>ã€€ã€€intro: TIP 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1807.05688">https://arxiv.org/abs/1807.05688</a></p><p><strong>GAN-based Pose-aware Regulation for Video-based Person Re-identification</strong><br>ã€€ã€€intro: Heriot-Watt University &amp; University of Edinburgh &amp; Queenâ€™s University Belfast &amp; Anyvision<br>ã€€ã€€keywords: Weighted Fusion (WF) &amp; Weighted-Pose Regulation (WPR)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.11552">https://arxiv.org/abs/1903.11552</a></p><p><strong>Convolutional Temporal Attention Model for Video-based Person Re-identification</strong><br>ã€€ã€€intro: ICME 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.04492">https://arxiv.org/abs/1904.04492</a></p><h2 id="Re-ranking"><a href="#Re-ranking" class="headerlink" title="Re-ranking"></a>Re-ranking</h2><p><strong>Divide and Fuse: A Re-ranking Approach for Person Re-identification</strong><br>ã€€ã€€intro: BMVC 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1708.04169">https://arxiv.org/abs/1708.04169</a></p><p><strong>Re-ranking Person Re-identification with k-reciprocal Encoding</strong><br>ã€€ã€€intro: CVPR 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1701.08398">https://arxiv.org/abs/1701.08398</a><br>ã€€ã€€github: <a href="https://github.com/zhunzhong07/person-re-ranking">https://github.com/zhunzhong07/person-re-ranking</a></p><p><strong>A Pose-Sensitive Embedding for Person Re-Identification with Expanded Cross Neighborhood Re-Ranking</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1711.10378">https://arxiv.org/abs/1711.10378</a><br>ã€€ã€€github(official): <a href="https://github.com/pse-ecn/expanded-cross-neighborhood">https://github.com/pse-ecn/expanded-cross-neighborhood</a></p><p><strong>Adaptive Re-ranking of Deep Feature for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.08561">https://arxiv.org/abs/1811.08561</a></p><h2 id="Unsupervised-Re-ID"><a href="#Unsupervised-Re-ID" class="headerlink" title="Unsupervised Re-ID"></a>Unsupervised Re-ID</h2><p><strong>Unsupervised Person Re-identification: Clustering and Fine-tuning</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1705.10444">https://arxiv.org/abs/1705.10444</a><br>ã€€ã€€github: <a href="https://github.com/hehefan/Unsupervised-Person-Re-identification-Clustering-and-Fine-tuning">https://github.com/hehefan/Unsupervised-Person-Re-identification-Clustering-and-Fine-tuning</a></p><p><strong>Stepwise Metric Promotion for Unsupervised Video Person Re-identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_ICCV_2017/papers/Liu_Stepwise_Metric_Promotion_ICCV_2017_paper.pdf">http://openaccess.thecvf.com/content_ICCV_2017/papers/Liu_Stepwise_Metric_Promotion_ICCV_2017_paper.pdf</a><br>ã€€ã€€github: <a href="https://github.com/lilithliu/StepwiseMetricPromotion-code">https://github.com/lilithliu/StepwiseMetricPromotion-code</a></p><p><strong>Dynamic Label Graph Matching for Unsupervised Video Re-Identification</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1709.09297">https://arxiv.org/abs/1709.09297</a><br>ã€€ã€€github: <a href="https://github.com/mangye16/dgm_re-id">https://github.com/mangye16/dgm_re-id</a></p><p><strong>Unsupervised Cross-dataset Person Re-identification by Transfer Learning of Spatio-temporal Patterns</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.07293">https://arxiv.org/abs/1803.07293</a><br>ã€€ã€€github: <a href="https://github.com/ahangchen/TFusion">https://github.com/ahangchen/TFusion</a><br>ã€€ã€€blog: <a href="https://zhuanlan.zhihu.com/p/34778414">https://zhuanlan.zhihu.com/p/34778414</a></p><p><strong>Cross-dataset Person Re-Identification Using Similarity Preserved Generative Adversarial Networks</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1806.04533">https://arxiv.org/abs/1806.04533</a></p><p><strong>Transferable Joint Attribute-Identity Deep Learning for Unsupervised Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1803.09786">https://arxiv.org/abs/1803.09786</a></p><p><strong>Adaptation and Re-Identification Network: An Unsupervised Deep Transfer Learning Approach to Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018 workshop. National Taiwan University &amp; Umbo Computer Vision<br>ã€€ã€€keywords: adaptation and re-identification network (ARN)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.09347">https://arxiv.org/abs/1804.09347</a></p><p><strong>Domain Adaptation through Synthesis for Unsupervised Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1804.10094">https://arxiv.org/abs/1804.10094</a></p><p><strong>Deep Association Learning for Unsupervised Video Person Re-identification</strong><br>ã€€ã€€intro: BMVC 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1808.07301">https://arxiv.org/abs/1808.07301</a></p><p><strong>Support Neighbor Loss for Person Re-Identification</strong><br>ã€€ã€€intro: ACM Multimedia (ACM MM) 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1808.06030">https://arxiv.org/abs/1808.06030</a></p><p><strong>Unsupervised Person Re-identification by Deep Learning Tracklet Association</strong><br>ã€€ã€€intro: ECCV 2018 Oral<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1809.02874">https://arxiv.org/abs/1809.02874</a></p><p><strong>Unsupervised Tracklet Person Re-Identification</strong><br>ã€€ã€€intro: TPAMI 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.00535">https://arxiv.org/abs/1903.00535</a><br>ã€€ã€€github: <a href="https://github.com/liminxian/DukeMTMC-SI-Tracklet">https://github.com/liminxian/DukeMTMC-SI-Tracklet</a></p><p><strong>Unsupervised Person Re-identification by Deep Asymmetric Metric Embedding</strong><br>ã€€ã€€intro: TPAMI<br>ã€€ã€€keywords: DEep Clustering-based Asymmetric MEtric Learning (DECAMEL)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.10177">https://arxiv.org/abs/1901.10177</a><br>ã€€ã€€github: <a href="https://github.com/KovenYu/DECAMEL">https://github.com/KovenYu/DECAMEL</a></p><p><strong>Unsupervised Person Re-identification by Soft Multilabel Learning</strong><br>ã€€ã€€intro: CVPR 2019 oral<br>ã€€ã€€intro: Sun Yat-sen University &amp; YouTu Lab &amp; Queen Mary University of London<br>ã€€ã€€keywords: MAR (MultilAbel Reference learning), soft multilabel-guided hard negative mining<br>ã€€ã€€project page: <a href="https://kovenyu.com/publication/2019-cvpr-mar/">https://kovenyu.com/publication/2019-cvpr-mar/</a><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.06325">https://arxiv.org/abs/1903.06325</a><br>ã€€ã€€github(official, Pytorch): <a href="https://github.com/KovenYu/MAR">https://github.com/KovenYu/MAR</a></p><p><strong>A Novel Unsupervised Camera-aware Domain Adaptation Framework for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.03425">https://arxiv.org/abs/1904.03425</a></p><h2 id="Weakly-Supervised-Person-Re-identification"><a href="#Weakly-Supervised-Person-Re-identification" class="headerlink" title="Weakly Supervised Person Re-identification"></a>Weakly Supervised Person Re-identification</h2><p><strong>Weakly Supervised Person Re-Identification</strong><br>ã€€ã€€intro: CVPR 2019<br>ã€€ã€€keywords: multi-instance multi-label learning (MIML), Cross-View MIML (CV-MIML)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.03832">https://arxiv.org/abs/1904.03832</a></p><p><strong>Weakly Supervised Person Re-identification: Cost-effective Learning with A New Benchmark</strong><br>ã€€ã€€keywords: SYSU-30k<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.03845">https://arxiv.org/abs/1904.03845</a></p><h2 id="Vehicle-Re-ID"><a href="#Vehicle-Re-ID" class="headerlink" title="Vehicle Re-ID"></a>Vehicle Re-ID</h2><p><strong>Learning Deep Neural Networks for Vehicle Re-ID with Visual-spatio-temporal Path Proposals</strong><br>ã€€ã€€intro: ICCV 2017<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1708.03918">https://arxiv.org/abs/1708.03918</a></p><p><strong>Viewpoint-Aware Attentive Multi-View Inference for Vehicle Re-Identification</strong><br>ã€€ã€€intro: CVPR 2018<br>ã€€ã€€paper: <a href="http://openaccess.thecvf.com/content_cvpr_2018/papers/Zhou_Viewpoint-Aware_Attentive_Multi-View_CVPR_2018_paper.pdf">http://openaccess.thecvf.com/content_cvpr_2018/papers/Zhou_Viewpoint-Aware_Attentive_Multi-View_CVPR_2018_paper.pdf</a></p><p><strong>RAM: A Region-Aware Deep Model for Vehicle Re-Identification</strong><br>ã€€ã€€intro: ICME 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1806.09283">https://arxiv.org/abs/1806.09283</a></p><p><strong>Vehicle Re-Identification in Context</strong><br>ã€€ã€€intro: Pattern Recognition - 40th German Conference, (GCPR) 2018, Stuttgart<br>ã€€ã€€project page: <a href="https://qmul-vric.github.io/">https://qmul-vric.github.io/</a><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1809.09409">https://arxiv.org/abs/1809.09409</a></p><p><strong>Vehicle Re-identification Using Quadruple Directional Deep Learning Features</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1811.05163">https://arxiv.org/abs/1811.05163</a></p><p><strong>Coarse-to-fine: A RNN-based hierarchical attention model for vehicle re-identification</strong><br>ã€€ã€€intro: ACCV 2018<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1812.04239">https://arxiv.org/abs/1812.04239</a></p><p><strong>Vehicle Re-Identification: an Efficient Baseline Using Triplet Embedding</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1901.01015">https://arxiv.org/abs/1901.01015</a></p><p><strong>A Two-Stream Siamese Neural Network for Vehicle Re-Identification by Using Non-Overlapping Cameras</strong><br>ã€€ã€€intro: ICIP 2019<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1902.01496">https://arxiv.org/abs/1902.01496</a></p><p><strong>CityFlow: A City-Scale Benchmark for Multi-Target Multi-Camera Vehicle Tracking and Re-Identification</strong><br>ã€€ã€€intro: Accepted for oral presentation at CVPR 2019 with review ratings of 2 strong accepts and 1 accept (work done during an internship at NVIDIA)<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1903.09254">https://arxiv.org/abs/1903.09254</a></p><p><strong>Vehicle Re-identification in Aerial Imagery: Dataset and Approach</strong><br>ã€€ã€€intro: Northwestern Polytechnical University<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1904.01400">https://arxiv.org/abs/1904.01400</a></p><h2 id="Deep-Metric-Learning"><a href="#Deep-Metric-Learning" class="headerlink" title="Deep Metric Learning"></a>Deep Metric Learning</h2><p><strong>Deep Metric Learning for Person Re-Identification</strong><br>ã€€ã€€intro: ICPR 2014<br>ã€€ã€€paper: <a href="http://www.cbsr.ia.ac.cn/users/zlei/papers/ICPR2014/Yi-ICPR-14.pdf">http://www.cbsr.ia.ac.cn/users/zlei/papers/ICPR2014/Yi-ICPR-14.pdf</a></p><p><strong>Deep Metric Learning for Practical Person Re-Identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1407.4979">https://arxiv.org/abs/1407.4979</a></p><p><strong>Constrained Deep Metric Learning for Person Re-identification</strong><br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1511.07545">https://arxiv.org/abs/1511.07545</a></p><p><strong>Embedding Deep Metric for Person Re-identication A Study Against Large Variations</strong><br>ã€€ã€€intro: ECCV 2016<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1611.00137">https://arxiv.org/abs/1611.00137</a></p><p><strong>DarkRank: Accelerating Deep Metric Learning via Cross Sample Similarities Transfer</strong><br>ã€€ã€€intro: TuSimple<br>ã€€ã€€keywords: pedestrian re-identification<br>ã€€ã€€arxiv: <a href="https://arxiv.org/abs/1707.01220">https://arxiv.org/abs/1707.01220</a></p><h2 id="Projects"><a href="#Projects" class="headerlink" title="Projects"></a>Projects</h2><p><strong>Open-ReID: Open source person re-identification library in python</strong><br>ã€€ã€€intro: Open-ReID is a lightweight library of person re-identification for research purpose. It aims to provide a uniform interface for different datasets, a full set of models and evaluation metrics, as well as examples to reproduce (near) state-of-the-art results.<br>ã€€ã€€project page: <a href="https://cysu.github.io/open-reid/">https://cysu.github.io/open-reid/</a><br>ã€€ã€€github(PyTorch): <a href="https://github.com/Cysu/open-reid">https://github.com/Cysu/open-reid</a><br>ã€€ã€€examples: <a href="https://cysu.github.io/open-reid/examples/training_id.html">https://cysu.github.io/open-reid/examples/training_id.html</a><br>ã€€ã€€benchmarks: <a href="https://cysu.github.io/open-reid/examples/benchmarks.html">https://cysu.github.io/open-reid/examples/benchmarks.html</a></p><p><strong>caffe-PersonReID</strong><br>ã€€ã€€intro: Person Re-Identification: Multi-Task Deep CNN with Triplet Loss<br>ã€€ã€€gtihub: <a href="https://github.com/agjayant/caffe-Person-ReID">https://github.com/agjayant/caffe-Person-ReID</a></p><p><strong>Person_reID_baseline_pytorch</strong><br>ã€€ã€€intro: Pytorch implement of Person re-identification baseline<br>ã€€ã€€arxiv: <a href="https://github.com/layumi/Person_reID_baseline_pytorch">https://github.com/layumi/Person_reID_baseline_pytorch</a></p><p><strong>deep-person-reid</strong><br>ã€€ã€€intro: Pytorch implementation of deep person re-identification models.<br>ã€€ã€€github: <a href="https://github.com/KaiyangZhou/deep-person-reid">https://github.com/KaiyangZhou/deep-person-reid</a></p><p><strong>ReID_baseline</strong><br>ã€€ã€€intro: Baseline model (with bottleneck) for person ReID (using softmax and triplet loss).<br>ã€€ã€€github: <a href="https://github.com/L1aoXingyu/reid_baseline">https://github.com/L1aoXingyu/reid_baseline</a><br>ã€€ã€€blog: <a href="https://zhuanlan.zhihu.com/p/40514536">https://zhuanlan.zhihu.com/p/40514536</a></p><p><strong>gluon-reid</strong><br>ã€€ã€€intro: A code gallery for person re-identification with mxnet-gluon, and I will reproduce many STOA algorithm.<br>ã€€ã€€github: <a href="https://github.com/xiaolai-sqlai/gluon-reid">https://github.com/xiaolai-sqlai/gluon-reid</a></p><h2 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h2><p><strong>DukeMTMC-reID</strong><br>ã€€ã€€intro: The Person re-ID Evaluation Code for DukeMTMC-reID Dataset (Including Dataset Download)<br>ã€€ã€€github: <a href="https://github.com/layumi/DukeMTMC-reID_evaluation">https://github.com/layumi/DukeMTMC-reID_evaluation</a></p><p><strong>DukeMTMC-reID_baseline (Matlab)</strong><br>ã€€ã€€github: <a href="https://github.com/layumi/DukeMTMC-reID_baseline">https://github.com/layumi/DukeMTMC-reID_baseline</a></p><p><strong>Code for IDE baseline on Market-1501</strong><br>ã€€ã€€github: <a href="https://github.com/zhunzhong07/IDE-baseline-Market-1501">https://github.com/zhunzhong07/IDE-baseline-Market-1501</a></p><h2 id="Datasets"><a href="#Datasets" class="headerlink" title="Datasets"></a>Datasets</h2><p><strong>Re-ID æ•°æ®é›†æ±‡æ€»</strong><br><a href="https://robustsystems.coe.neu.edu/sites/robustsystems.coe.neu.edu/files/systems/projectpages/reiddataset.html">https://robustsystems.coe.neu.edu/sites/robustsystems.coe.neu.edu/files/systems/projectpages/reiddataset.html</a></p><p><strong>Attributeç›¸å…³æ•°æ®é›†</strong><br>RAP: <a href="http://rap.idealtest.org/">http://rap.idealtest.org/</a><br>Attribute for Market-1501 and DukeMTMC_reID: <a href="https://vana77.github.io/">https://vana77.github.io/</a></p><p><strong>è§†é¢‘ç›¸å…³æ•°æ®é›†</strong><br>Mars: <a href="http://liangzheng.org/Project/project_mars.html">http://liangzheng.org/Project/project_mars.html</a><br>PRID2011: <a href="https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/">https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/</a></p><p><strong>NLPç›¸å…³æ•°æ®é›†</strong><br>è‡ªç„¶è¯­è¨€æœå›¾åƒ: <a href="http://xiaotong.me/static/projects/person-search-language/dataset.html">http://xiaotong.me/static/projects/person-search-language/dataset.html</a><br>è‡ªç„¶è¯­è¨€æœè¡Œäººæ‰€åœ¨è§†é¢‘: <a href="http://www.mi.t.u-tokyo.ac.jp/projects/person_search">http://www.mi.t.u-tokyo.ac.jp/projects/person_search</a></p><h2 id="Tutorials"><a href="#Tutorials" class="headerlink" title="Tutorials"></a>Tutorials</h2><p><strong>1st Workshop on Target Re-Identification and Multi-Target Multi-Camera Tracking</strong><br><a href="https://reid-mct.github.io/">https://reid-mct.github.io/</a></p><p><strong>Target Re-Identification and Multi-Target Multi-Camera Tracking</strong><br><a href="http://openaccess.thecvf.com/CVPR2017_workshops/CVPR2017_W17.py">http://openaccess.thecvf.com/CVPR2017_workshops/CVPR2017_W17.py</a></p><p><strong>Person Re-Identification: Theory and Best Practice</strong><br><a href="http://www.micc.unifi.it/reid-tutorial/">http://www.micc.unifi.it/reid-tutorial/</a></p><h2 id="Experts"><a href="#Experts" class="headerlink" title="Experts"></a>Experts</h2><blockquote><p>Listed in No Particular Order</p></blockquote><ul><li><strong>Shaogang Gong</strong> - [<a href="http://www.eecs.qmul.ac.uk/~sgg/]">http://www.eecs.qmul.ac.uk/~sgg/]</a></li><li><strong>Xiaogang Wang</strong> - [<a href="http://www.ee.cuhk.edu.hk/~xgwang/]">http://www.ee.cuhk.edu.hk/~xgwang/]</a></li><li><strong>Weishi Zheng</strong> - [<a href="http://isee.sysu.edu.cn/~zhwshi/]">http://isee.sysu.edu.cn/~zhwshi/]</a></li><li><strong>Liang Zheng</strong> - [<a href="http://www.liangzheng.com.cn/]">http://www.liangzheng.com.cn/]</a></li><li><strong>Li Zhang</strong> - [<a href="http://www.robots.ox.ac.uk/~lz/]">http://www.robots.ox.ac.uk/~lz/]</a></li><li><strong>Xiatian Zhu</strong> - [<a href="http://www.eecs.qmul.ac.uk/~xiatian/index.html]">http://www.eecs.qmul.ac.uk/~xiatian/index.html]</a></li><li><strong>Chen Change Loy</strong> - [<a href="https://staff.ie.cuhk.edu.hk/~ccloy/]">https://staff.ie.cuhk.edu.hk/~ccloy/]</a></li><li><strong>Qi Tian</strong> - [<a href="http://www.cs.utsa.edu/~qitian/tian-publication-year.html]">http://www.cs.utsa.edu/~qitian/tian-publication-year.html]</a></li><li><strong>Shengcai Liao</strong> - [<a href="http://www.cbsr.ia.ac.cn/users/scliao/]">http://www.cbsr.ia.ac.cn/users/scliao/]</a></li><li><strong>Rui Zhao</strong> - [<a href="http://www.ee.cuhk.edu.hk/~rzhao/]">http://www.ee.cuhk.edu.hk/~rzhao/]</a></li><li><strong>Yang Yang</strong> - [<a href="http://www.cbsr.ia.ac.cn/users/yyang/main.htm]">http://www.cbsr.ia.ac.cn/users/yyang/main.htm]</a></li><li><strong>Ling Shao</strong> - [<a href="http://lshao.staff.shef.ac.uk]">http://lshao.staff.shef.ac.uk]</a></li><li><strong>Ziyan Wu</strong> - [<a href="http://wuziyan.com/]">http://wuziyan.com/]</a></li><li><strong>DaPeng Chen</strong> - [<a href="http://gr.xjtu.edu.cn/web/dapengchen/home]">http://gr.xjtu.edu.cn/web/dapengchen/home]</a></li><li><strong>Horst Bischof</strong> - [<a href="https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/prid450s]">https://www.tugraz.at/institute/icg/research/team-bischof/lrs/downloads/prid450s]</a></li><li><strong>Niki Martinel</strong> - [<a href="http://users.dimi.uniud.it/~niki.martinel/]">http://users.dimi.uniud.it/~niki.martinel/]</a></li><li><strong>Liang Lin</strong> - [<a href="http://hcp.sysu.edu.cn/home/]">http://hcp.sysu.edu.cn/home/]</a></li><li><strong>Le An</strong> - [<a href="http://auto.hust.edu.cn/index.php?a=shows&amp;catid=28&amp;id=134]">http://auto.hust.edu.cn/index.php?a=shows&amp;catid=28&amp;id=134]</a></li><li><strong>Xiang Bai</strong> - [<a href="http://mc.eistar.net/~xbai/index.html]">http://mc.eistar.net/~xbai/index.html]</a></li><li><strong>Xiaoyuan Jing</strong> - [<a href="http://mla.whu.edu.cn/plus/list.php?tid=2]">http://mla.whu.edu.cn/plus/list.php?tid=2]</a></li><li><strong>Fei Xiong</strong> - [<a href="http://robustsystems.coe.neu.edu/?q=content/research]">http://robustsystems.coe.neu.edu/?q=content/research]</a></li><li><strong>DaPeng Chen</strong> - [<a href="http://gr.xjtu.edu.cn/web/dapengchen/home]">http://gr.xjtu.edu.cn/web/dapengchen/home]</a></li><li><strong>Zhedong Zheng</strong> - [<a href="http://zdzheng.xyz/]">http://zdzheng.xyz/]</a></li><li><strong>Zhun Zhong</strong> - [<a href="http://zhunzhong.site/]">http://zhunzhong.site/]</a></li></ul><h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><p><strong>Re-id Resources</strong><br><a href="https://wangzwhu.github.io/home/re_id_resources.html">https://wangzwhu.github.io/home/re_id_resources.html</a></p><p><strong>Zhuanzhi</strong><br><a href="http://www.zhuanzhi.ai/topic/2001183057160970">http://www.zhuanzhi.ai/topic/2001183057160970</a></p><p><strong>Zhihu</strong><br>è¡Œäººé‡è¯†åˆ«: <a href="https://zhuanlan.zhihu.com/personReid">https://zhuanlan.zhihu.com/personReid</a><br>Person Re-id: <a href="https://zhuanlan.zhihu.com/re-id">https://zhuanlan.zhihu.com/re-id</a><br>Topci: <a href="https://www.zhihu.com/topic/20087378/hot">https://www.zhihu.com/topic/20087378/hot</a></p><p><strong>Blogs</strong><br>è¡Œäººé‡è¯†åˆ«ç®€ä»‹: <a href="https://www.jianshu.com/p/98cc04cca0ae">https://www.jianshu.com/p/98cc04cca0ae</a><br>åŸºäºæ·±åº¦å­¦ä¹ çš„Person Re-IDï¼ˆç»¼è¿°ï¼‰: <a href="https://blog.csdn.net/linolzhang/article/details/71075756">https://blog.csdn.net/linolzhang/article/details/71075756</a><br>è¡Œäººå†è¯†åˆ«ï¼ˆè¡Œäººé‡è¯†åˆ«ï¼‰ã€åŒ…å«ä¸è¡Œäººæ£€æµ‹çš„å¯¹æ¯”ã€‘: <a href="https://blog.csdn.net/liuqinglong110/article/details/41699861">https://blog.csdn.net/liuqinglong110/article/details/41699861</a><br>è¡Œäººé‡è¯†åˆ«ç»¼è¿°ï¼ˆPerson Re-identification: Past, Present and Futureï¼‰: <a href="https://blog.csdn.net/auto1993/article/details/74091803">https://blog.csdn.net/auto1993/article/details/74091803</a><br>è¡Œäººé‡è¯†åˆ«: <a href="http://cweihang.cn/ml/reid/">http://cweihang.cn/ml/reid/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€€ã€€Person re-identification, also known as person retrieval, is to match pedestrian images observed from non-overlapping camera views based on appearance.It receives increasing attentions in video surveillance for its important applications in threat detection, human retrieval, and multi-camera tracking. It saves a lot of human labor in exhaustively searching for a person of interest from large amounts of video sequences.&lt;/p&gt;
    
    </summary>
    
      <category term="è¡Œäººé‡è¯†åˆ«" scheme="http://blog.fcj.one/categories/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="Person Re-ID" scheme="http://blog.fcj.one/tags/Person-Re-ID/"/>
    
  </entry>
  
  <entry>
    <title>Person Re-identificationæ•°æ®é›†æè¿°â€”â€”Market-1501</title>
    <link href="http://blog.fcj.one/reid-market-1501.html"/>
    <id>http://blog.fcj.one/reid-market-1501.html</id>
    <published>2018-07-12T10:13:12.000Z</published>
    <updated>2022-04-29T07:03:48.313Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-12/87140649.jpg" alt="dataset"></p><span id="more"></span><h2 id="æ•°æ®é›†ç®€ä»‹"><a href="#æ•°æ®é›†ç®€ä»‹" class="headerlink" title="æ•°æ®é›†ç®€ä»‹"></a>æ•°æ®é›†ç®€ä»‹</h2><p>ã€€ã€€Market-1501 æ•°æ®é›†åœ¨æ¸…åå¤§å­¦æ ¡å›­ä¸­é‡‡é›†ï¼Œå¤å¤©æ‹æ‘„ï¼Œåœ¨ 2015 å¹´æ„å»ºå¹¶å…¬å¼€ã€‚å®ƒåŒ…æ‹¬ç”±6ä¸ªæ‘„åƒå¤´ï¼ˆå…¶ä¸­5ä¸ªé«˜æ¸…æ‘„åƒå¤´å’Œ1ä¸ªä½æ¸…æ‘„åƒå¤´ï¼‰æ‹æ‘„åˆ°çš„ 1501 ä¸ªè¡Œäººã€32668 ä¸ªæ£€æµ‹åˆ°çš„è¡ŒäººçŸ©å½¢æ¡†ã€‚æ¯ä¸ªè¡Œäººè‡³å°‘ç”±2ä¸ªæ‘„åƒå¤´æ•è·åˆ°ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªæ‘„åƒå¤´ä¸­å¯èƒ½å…·æœ‰å¤šå¼ å›¾åƒã€‚è®­ç»ƒé›†æœ‰ 751 äººï¼ŒåŒ…å« 12,936 å¼ å›¾åƒï¼Œå¹³å‡æ¯ä¸ªäººæœ‰ 17.2 å¼ è®­ç»ƒæ•°æ®ï¼›æµ‹è¯•é›†æœ‰ 750 äººï¼ŒåŒ…å« 19,732 å¼ å›¾åƒï¼Œå¹³å‡æ¯ä¸ªäººæœ‰ 26.3 å¼ æµ‹è¯•æ•°æ®ã€‚3368 å¼ æŸ¥è¯¢å›¾åƒçš„è¡Œäººæ£€æµ‹çŸ©å½¢æ¡†æ˜¯äººå·¥ç»˜åˆ¶çš„ï¼Œè€Œ gallery ä¸­çš„è¡Œäººæ£€æµ‹çŸ©å½¢æ¡†åˆ™æ˜¯ä½¿ç”¨DPMæ£€æµ‹å™¨æ£€æµ‹å¾—åˆ°çš„ã€‚è¯¥æ•°æ®é›†æä¾›çš„å›ºå®šæ•°é‡çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†å‡å¯ä»¥åœ¨single-shotæˆ–multi-shotæµ‹è¯•è®¾ç½®ä¸‹ä½¿ç”¨ã€‚</p><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>Market-1501<br>ã€€ã€€â”œâ”€â”€ bounding_box_test<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0000_c1s1_000151_01.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0000_c1s1_000376_03.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0000_c1s1_001051_02.jpg<br>ã€€ã€€â”œâ”€â”€ bounding_box_train<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0002_c1s1_000451_03.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0002_c1s1_000551_01.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0002_c1s1_000801_01.jpg<br>ã€€ã€€â”œâ”€â”€ gt_bbox<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c1s1_001051_00.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c1s1_009376_00.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c2s1_001976_00.jpg<br>ã€€ã€€â”œâ”€â”€ gt_query<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c1s1_001051_00_good.mat<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c1s1_001051_00_junk.mat<br>ã€€ã€€â”œâ”€â”€ query<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c1s1_001051_00.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c2s1_000301_00.jpg<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c3s1_000551_00.jpg<br>ã€€ã€€â””â”€â”€ readme.txt</p><h3 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h3><p>1ï¼‰ â€œbounding_box_testâ€â€”â€”ç”¨äºæµ‹è¯•é›†çš„ 750 äººï¼ŒåŒ…å« 19,732 å¼ å›¾åƒï¼Œå‰ç¼€ä¸º 0000 è¡¨ç¤ºåœ¨æå–è¿™ 750 äººçš„è¿‡ç¨‹ä¸­DPMæ£€æµ‹é”™çš„å›¾ï¼ˆå¯èƒ½ä¸queryæ˜¯åŒä¸€ä¸ªäººï¼‰ï¼Œ-1 è¡¨ç¤ºæ£€æµ‹å‡ºæ¥å…¶ä»–äººçš„å›¾ï¼ˆä¸åœ¨è¿™ 750 äººä¸­ï¼‰<br>2ï¼‰ â€œbounding_box_trainâ€â€”â€”ç”¨äºè®­ç»ƒé›†çš„ 751 äººï¼ŒåŒ…å« 12,936 å¼ å›¾åƒ<br>3ï¼‰ â€œqueryâ€â€”â€”ä¸º 750 äººåœ¨æ¯ä¸ªæ‘„åƒå¤´ä¸­éšæœºé€‰æ‹©ä¸€å¼ å›¾åƒä½œä¸ºqueryï¼Œå› æ­¤ä¸€ä¸ªäººçš„queryæœ€å¤šæœ‰ 6 ä¸ªï¼Œå…±æœ‰ 3,368 å¼ å›¾åƒ<br>4ï¼‰ â€œgt_queryâ€â€”â€”matlabæ ¼å¼ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªqueryçš„å“ªäº›å›¾ç‰‡æ˜¯å¥½çš„åŒ¹é…ï¼ˆåŒä¸€ä¸ªäººä¸åŒæ‘„åƒå¤´çš„å›¾åƒï¼‰å’Œä¸å¥½çš„åŒ¹é…ï¼ˆåŒä¸€ä¸ªäººåŒä¸€ä¸ªæ‘„åƒå¤´çš„å›¾åƒæˆ–éåŒä¸€ä¸ªäººçš„å›¾åƒï¼‰<br>5ï¼‰ â€œgt_bboxâ€â€”â€”æ‰‹å·¥æ ‡æ³¨çš„bounding boxï¼Œç”¨äºåˆ¤æ–­DPMæ£€æµ‹çš„bounding boxæ˜¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„box</p><h3 id="å‘½åè§„åˆ™"><a href="#å‘½åè§„åˆ™" class="headerlink" title="å‘½åè§„åˆ™"></a>å‘½åè§„åˆ™</h3><p>ä»¥ 0001_c1s1_000151_01.jpg ä¸ºä¾‹<br>1ï¼‰ 0001 è¡¨ç¤ºæ¯ä¸ªäººçš„æ ‡ç­¾ç¼–å·ï¼Œä»0001åˆ°1501ï¼›<br>2ï¼‰ c1 è¡¨ç¤ºç¬¬ä¸€ä¸ªæ‘„åƒå¤´(camera1)ï¼Œå…±æœ‰6ä¸ªæ‘„åƒå¤´ï¼›<br>3ï¼‰ s1 è¡¨ç¤ºç¬¬ä¸€ä¸ªå½•åƒç‰‡æ®µ(sequece1)ï¼Œæ¯ä¸ªæ‘„åƒæœºéƒ½æœ‰æ•°ä¸ªå½•åƒæ®µï¼›<br>4ï¼‰ 000151 è¡¨ç¤º c1s1 çš„ç¬¬000151å¸§å›¾ç‰‡ï¼Œè§†é¢‘å¸§ç‡25fpsï¼›<br>5ï¼‰ 01 è¡¨ç¤º c1s1_001051 è¿™ä¸€å¸§ä¸Šçš„ç¬¬1ä¸ªæ£€æµ‹æ¡†ï¼Œç”±äºé‡‡ç”¨DPMæ£€æµ‹å™¨ï¼Œå¯¹äºæ¯ä¸€å¸§ä¸Šçš„è¡Œäººå¯èƒ½ä¼šæ¡†å‡ºå¥½å‡ ä¸ªbboxã€‚00 è¡¨ç¤ºæ‰‹å·¥æ ‡æ³¨æ¡†</p><h2 id="æµ‹è¯•åè®®"><a href="#æµ‹è¯•åè®®" class="headerlink" title="æµ‹è¯•åè®®"></a>æµ‹è¯•åè®®</h2><p>Cumulative Matching Characteristics (CMC) curves æ˜¯ç›®å‰è¡Œäººé‡è¯†åˆ«é¢†åŸŸæœ€æµè¡Œçš„æ€§èƒ½è¯„ä¼°æ–¹æ³•ã€‚è€ƒè™‘ä¸€ä¸ªç®€å•çš„ single-gallery-shot æƒ…å½¢ï¼Œæ¯ä¸ªæ•°æ®é›†ä¸­çš„ID(gallery ID)åªæœ‰ä¸€ä¸ªå®ä¾‹. å¯¹äºæ¯ä¸€æ¬¡çš„è¯†åˆ«(query), ç®—æ³•å°†æ ¹æ®è¦æŸ¥è¯¢çš„å›¾åƒ(query) åˆ°æ‰€æœ‰gallery samplesçš„è·ç¦»ä»å°åˆ°å¤§æ’åºï¼ŒCMC top-k accuracy è®¡ç®—å¦‚ä¸‹ï¼š</p><pre><code>Acc_k = 1, if top-k ranked gallery samples contain query identityAcc_k = 0, otherwise</code></pre><p>è¿™æ˜¯ä¸€ä¸ª shifted step function, æœ€ç»ˆçš„CMC æ›²çº¿(curve) é€šè¿‡å¯¹æ‰€æœ‰queriesçš„shifted step functionså–å¹³å‡å¾—åˆ°ã€‚å°½ç®¡åœ¨ single-gallery-shot æƒ…å½¢ä¸‹ï¼ŒCMC æœ‰å¾ˆæ˜ç¡®çš„å®šä¹‰ï¼Œä½†æ˜¯åœ¨ multi-gallery-shot æƒ…å½¢ä¸‹ï¼Œå®ƒçš„å®šä¹‰å¹¶ä¸æ˜ç¡®ï¼Œå› ä¸ºæ¯ä¸ªgallery identity å¯èƒ½å­˜åœ¨å¤šä¸ªinstances.</p><p>Market-1501ä¸­ Query å’Œ gallery é›†å¯èƒ½æ¥è‡ªç›¸åŒçš„æ‘„åƒå¤´è§†è§’ï¼Œä½†æ˜¯å¯¹äºæ¯ä¸ªquery identity, ä»–/å¥¹çš„æ¥è‡ªåŒä¸€ä¸ªæ‘„åƒå¤´çš„ gallery samples ä¼šè¢«æ’é™¤æ‰ã€‚å¯¹äºæ¯ä¸ª gallery identityï¼Œä»–ä»¬ä¸ä¼šåªéšæœºé‡‡æ ·ä¸€ä¸ªinstance. è¿™æ„å‘³ç€åœ¨è®¡ç®—CMCæ—¶ï¼Œ query å°†æ€»æ˜¯åŒ¹é… gallery ä¸­â€œæœ€ç®€å•â€çš„æ­£æ ·æœ¬ï¼Œè€Œä¸å…³æ³¨å…¶ä»–æ›´éš¾è¯†åˆ«çš„æ­£æ ·æœ¬ã€‚bounding_box_test æ–‡ä»¶å¤¹æ˜¯ gallery æ ·æœ¬ï¼Œbounding_box_train æ–‡ä»¶å¤¹æ˜¯ train æ ·æœ¬ï¼Œquery æ–‡ä»¶å¤¹æ˜¯ query æ ·æœ¬</p><p>ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œåœ¨ multi-gallery-shot æƒ…å½¢ä¸‹ï¼ŒCMCè¯„ä¼°å…·æœ‰ç¼ºé™·ã€‚å› æ­¤ï¼Œä¹Ÿä½¿ç”¨ mAPï¼ˆmean average precsionï¼‰ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ã€‚mAPå¯è®¤ä¸ºæ˜¯PRæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œå³å¹³å‡çš„æŸ¥å‡†ç‡ã€‚</p><ul><li><a href="https://github.com/HejaBVB09/Market1501Evaluation">Market-1501 Evaluation Code</a></li></ul><h2 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h2><ol><li><a href="https://drive.google.com/file/d/0B8-rUzbwVRk0c054eEozWG9COHM/view?usp=sharing">Google Drive</a></li><li><a href="https://pan.baidu.com/s/1ntIi2Op">Baidu Disk</a></li></ol><h2 id="State-of-the-art"><a href="#State-of-the-art" class="headerlink" title="State of the art"></a>State of the art</h2><ul><li><a href="http://www.liangzheng.org/Project/state_of_the_art_market1501.html">State of the art on the Market-1501 dataset</a></li></ul><h2 id="Citation"><a href="#Citation" class="headerlink" title="Citation"></a>Citation</h2><p>If you use this dataset, please kindly cite this paper:<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@inproceedings&#123;zheng2015scalable,</span><br><span class="line">  title=&#123;<span class="keyword">Scalable </span>Person Re-identification: A <span class="keyword">Benchmark&#125;,</span></span><br><span class="line"><span class="keyword"></span>  author=&#123;Zheng, Liang <span class="keyword">and </span><span class="keyword">Shen, </span>Liyue <span class="keyword">and </span>Tian, Lu <span class="keyword">and </span>Wang, <span class="keyword">Shengjin </span><span class="keyword">and </span>Wang, <span class="keyword">Jingdong </span><span class="keyword">and </span>Tian, Qi&#125;,</span><br><span class="line">  <span class="keyword">booktitle=&#123;Computer </span>Vision, IEEE International Conference on&#125;,</span><br><span class="line">  year=&#123;<span class="number">2015</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>Zheng, Liang, et al. â€œScalable Person Re-identification: A Benchmark.â€ IEEE International Conference on Computer Vision IEEE Computer Society, 2015:1116-1124.</li><li><a href="http://www.liangzheng.org/Project/project_reid.html">Liang Zheng</a></li><li><a href="http://bigbrothersue.com/index.php/2017/12/20/person-re-id/">Person re-ID</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-12/87140649.jpg&quot; alt=&quot;dataset&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è¡Œäººé‡è¯†åˆ«" scheme="http://blog.fcj.one/categories/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="Person Re-ID" scheme="http://blog.fcj.one/tags/Person-Re-ID/"/>
    
  </entry>
  
  <entry>
    <title>Person Re-identificationæ•°æ®é›†æè¿°â€”â€”DukeMTMC-reID</title>
    <link href="http://blog.fcj.one/reid-duke.html"/>
    <id>http://blog.fcj.one/reid-duke.html</id>
    <published>2018-07-11T16:23:26.000Z</published>
    <updated>2022-04-29T07:03:48.313Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/2293983.jpg" alt="dataset"></p><span id="more"></span><h2 id="æ•°æ®é›†ç®€ä»‹"><a href="#æ•°æ®é›†ç®€ä»‹" class="headerlink" title="æ•°æ®é›†ç®€ä»‹"></a>æ•°æ®é›†ç®€ä»‹</h2><p>ã€€ã€€DukeMTMC æ•°æ®é›†æ˜¯ä¸€ä¸ªå¤§è§„æ¨¡æ ‡è®°çš„å¤šç›®æ ‡å¤šæ‘„åƒæœºè¡Œäººè·Ÿè¸ªæ•°æ®é›†ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç”± 8 ä¸ªåŒæ­¥æ‘„åƒæœºè®°å½•çš„æ–°å‹å¤§å‹é«˜æ¸…è§†é¢‘æ•°æ®é›†ï¼Œå…·æœ‰ 7,000 å¤šä¸ªå•æ‘„åƒæœºè½¨è¿¹å’Œè¶…è¿‡ 2,700 å¤šä¸ªç‹¬ç«‹äººç‰©ï¼ŒDukeMTMC-reID æ˜¯ DukeMTMC æ•°æ®é›†çš„è¡Œäººé‡è¯†åˆ«å­é›†ï¼Œå¹¶ä¸”æä¾›äº†äººå·¥æ ‡æ³¨çš„bounding boxã€‚</p><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>DukeMTMC-reID<br>  ã€€ã€€â”œâ”€â”€ bounding_box_test<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0002_c1_f0044158.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 3761_c6_f0183709.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 7139_c2_f0160815.jpg<br>  ã€€ã€€â”œâ”€â”€ bounding_box_train<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0001_c2_f0046182.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0008_c3_f0026318.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 7140_c4_f0175988.jpg<br>  ã€€ã€€â”œâ”€â”€ query<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0005_c2_f0046985.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 0023_c4_f0031504.jpg<br>  ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 7139_c2_f0160575.jpg<br>  ã€€ã€€â””â”€â”€ CITATION_DukeMTMC.txt<br>  ã€€ã€€â””â”€â”€ CITATION_DukeMTMC-reID.txt<br>  ã€€ã€€â””â”€â”€ LICENSE_DukeMTMC.txt<br>  ã€€ã€€â””â”€â”€ LICENSE_DukeMTMC-reID.txt<br>  ã€€ã€€â””â”€â”€ README.md</p><h3 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h3><p>ä»è§†é¢‘ä¸­æ¯ 120 å¸§é‡‡æ ·ä¸€å¼ å›¾åƒï¼Œå¾—åˆ°äº† 36,411 å¼ å›¾åƒã€‚ä¸€å…±æœ‰ 1,404 ä¸ªäººå‡ºç°åœ¨å¤§äºä¸¤ä¸ªæ‘„åƒå¤´ä¸‹ï¼Œæœ‰ 408 ä¸ªäºº (distractor ID) åªå‡ºç°åœ¨ä¸€ä¸ªæ‘„åƒå¤´ä¸‹ã€‚<br>1ï¼‰ â€œbounding_box_testâ€â€”â€”ç”¨äºæµ‹è¯•é›†çš„ 702 äººï¼ŒåŒ…å« 17,661  å¼ å›¾åƒï¼ˆéšæœºé‡‡æ ·ï¼Œ702 ID + 408 distractor IDï¼‰<br>2ï¼‰ â€œbounding_box_trainâ€â€”â€”ç”¨äºè®­ç»ƒé›†çš„ 702 äººï¼ŒåŒ…å« 16,522 å¼ å›¾åƒï¼ˆéšæœºé‡‡æ ·ï¼‰<br>3ï¼‰ â€œqueryâ€â€”â€”ä¸ºæµ‹è¯•é›†ä¸­çš„ 702 äººåœ¨æ¯ä¸ªæ‘„åƒå¤´ä¸­éšæœºé€‰æ‹©ä¸€å¼ å›¾åƒä½œä¸º queryï¼Œå…±æœ‰ 2,228 å¼ å›¾åƒ</p><h3 id="å‘½åè§„åˆ™"><a href="#å‘½åè§„åˆ™" class="headerlink" title="å‘½åè§„åˆ™"></a>å‘½åè§„åˆ™</h3><p>ä»¥ 0001_c2_f0046182.jpg ä¸ºä¾‹<br>1ï¼‰ 0001 è¡¨ç¤ºæ¯ä¸ªäººçš„æ ‡ç­¾ç¼–å·ï¼›<br>2ï¼‰ c2 è¡¨ç¤ºæ¥è‡ªç¬¬äºŒä¸ªæ‘„åƒå¤´(camera2)ï¼Œå…±æœ‰ 8 ä¸ªæ‘„åƒå¤´ï¼›<br>3ï¼‰ f0046182 è¡¨ç¤ºæ¥è‡ªç¬¬äºŒä¸ªæ‘„åƒå¤´çš„ç¬¬ 46182 å¸§ã€‚</p><h2 id="Dataset-Insights"><a href="#Dataset-Insights" class="headerlink" title="Dataset Insights"></a>Dataset Insights</h2><h3 id="æ•°æ®åˆ†å¸ƒ"><a href="#æ•°æ®åˆ†å¸ƒ" class="headerlink" title="æ•°æ®åˆ†å¸ƒ"></a>æ•°æ®åˆ†å¸ƒ</h3><p><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/37515800.jpg" alt=""></p><p>Figure. The image distribution of DukeMTMC-reID training set. We note that the median of images per ID is 20. But some ID may contain lots of images, which may compromise some algorithms. (For example, ID 5388 contains 426 images.)</p><p>Thank <a href="https://github.com/Xun-Yang">Xun</a> for suggestions.</p><h3 id="åœ°ç†ä½ç½®"><a href="#åœ°ç†ä½ç½®" class="headerlink" title="åœ°ç†ä½ç½®"></a>åœ°ç†ä½ç½®</h3><p><img src="http://vision.cs.duke.edu/DukeMTMC/img/campus.png" alt=""></p><p>This picture is from <a href="http://vision.cs.duke.edu/DukeMTMC/">DukeMTMC Homepage</a>.</p><h2 id="æµ‹è¯•åè®®"><a href="#æµ‹è¯•åè®®" class="headerlink" title="æµ‹è¯•åè®®"></a>æµ‹è¯•åè®®</h2><p>(Matlab)To evaluate, you need to calculate your gallery and query feature (i.e., 17661x2048 and 2228x2048 matrix) and save them in advance. Then download the codes in this repository. You just need to change the image path and the feature path in the evaluation_res_duke_fast.m and run it to evaluate.</p><p>(Python)We also provide an evaluation code in python. You may refer to <a href="https://github.com/layumi/Person_reID_baseline_pytorch#evaluation">here</a>.</p><h2 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h2><ol><li><a href="https://drive.google.com/open?id=1jjE85dRCMOgRtvJ5RQV9-Afs-2_5dY3O">Google Drive</a></li><li><a href="https://pan.baidu.com/s/1jS0XM7Var5nQGcbf9xUztw">Baidu Disk</a> å¯†ç ï¼šbhbh</li><li><a href="http://vision.cs.duke.edu/DukeMTMC/data/misc/DukeMTMC-reID.zip">DukeMTMC Project</a></li></ol><h2 id="Baseline"><a href="#Baseline" class="headerlink" title="Baseline"></a>Baseline</h2><p>We release our baseline training code and pretrained model in <a href="https://github.com/layumi/DukeMTMC-reID_baseline">[Matconvnet Version]</a> and <a href="https://github.com/layumi/Person_reID_baseline_pytorch">[Pytorch Version]</a>. You can choose one of the two tools to conduct the experiment. Furthermore, you may try our new <a href="https://github.com/layumi/Pedestrian_Alignment">Pedestrain Alignment Code</a> which combines person alignment with re-ID.</p><p>Or you can directly download the finetuned ResNet-50 baseline feature. You can download it from <a href="https://drive.google.com/open?id=0B0VOCNYh8HeRVFR6bldBX0lTRVE">GoogleDriver</a> or <a href="https://pan.baidu.com/s/1c2CIsTy">BaiduYun</a>, which includes the feature of training set, query set and gallery set. The DukeMTMC-reID LICENSE is also included.</p><h2 id="State-of-the-art"><a href="#State-of-the-art" class="headerlink" title="State-of-the-art"></a>State-of-the-art</h2><ul><li><a href="https://github.com/layumi/DukeMTMC-reID_evaluation/blob/master/State-of-the-art/README.md">State of the art on the DukeMTMC-reID dataset</a></li></ul><h2 id="Citation"><a href="#Citation" class="headerlink" title="Citation"></a>Citation</h2><p>If you use this dataset, please kindly cite the following two papers:<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@inproceedings&#123;zheng2017unlabeled,</span><br><span class="line">  title=&#123;Unlabeled Samples Generated <span class="keyword">by </span>GAN Improve the Person Re-identification <span class="keyword">Baseline </span>in vitro&#125;,</span><br><span class="line">  author=&#123;Zheng, Zhedong <span class="keyword">and </span>Zheng, Liang <span class="keyword">and </span>Yang, Yi&#125;,</span><br><span class="line">  <span class="keyword">booktitle=&#123;Proceedings </span>of the IEEE International Conference on Computer Vision&#125;,</span><br><span class="line">  year=&#123;<span class="number">2017</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line">@inproceedings&#123;ristani2016MTMC,</span><br><span class="line">  title = &#123;Performance Measures <span class="keyword">and </span>a Data Set for <span class="keyword">Multi-Target, </span><span class="keyword">Multi-Camera </span>Tracking&#125;,</span><br><span class="line">  author = &#123;Ristani, Ergys <span class="keyword">and </span>Solera, Francesco <span class="keyword">and </span>Zou, Roger <span class="keyword">and </span>Cucchiara, Rita <span class="keyword">and </span>Tomasi, Carlo&#125;,</span><br><span class="line">  <span class="keyword">booktitle </span>= &#123;European Conference on Computer Vision workshop on <span class="keyword">Benchmarking </span><span class="keyword">Multi-Target </span>Tracking&#125;,</span><br><span class="line">  year = &#123;<span class="number">2016</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>Unlabeled Samples Generated by GAN Improve the Person Re-identification Baseline in vitro. Zheng et al., ICCV 2017</li><li>Performance Measures and a Data Set for Multi-Target, Multi-Camera Tracking. Ristani et al., ECCVWS 2016</li><li><a href="https://github.com/layumi/DukeMTMC-reID_evaluation">DukeMTMC-reID Description</a></li><li><a href="https://blog.csdn.net/Layumi1993/article/details/72716551">https://blog.csdn.net/Layumi1993/article/details/72716551</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/2293983.jpg&quot; alt=&quot;dataset&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è¡Œäººé‡è¯†åˆ«" scheme="http://blog.fcj.one/categories/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="Person Re-ID" scheme="http://blog.fcj.one/tags/Person-Re-ID/"/>
    
  </entry>
  
  <entry>
    <title>Person Re-identificationæ•°æ®é›†æè¿°â€”â€”CUHK03</title>
    <link href="http://blog.fcj.one/reid-cuhk03.html"/>
    <id>http://blog.fcj.one/reid-cuhk03.html</id>
    <published>2018-07-10T11:54:21.000Z</published>
    <updated>2022-04-29T07:03:48.313Z</updated>
    
    <content type="html"><![CDATA[<p>CUHK03æ˜¯ç¬¬ä¸€ä¸ªè¶³ä»¥è¿›è¡Œæ·±åº¦å­¦ä¹ çš„å¤§è§„æ¨¡è¡Œäººé‡è¯†åˆ«æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†çš„å›¾åƒé‡‡é›†äºé¦™æ¸¯ä¸­æ–‡å¤§å­¦ï¼ˆCUHKï¼‰æ ¡å›­ã€‚æ•°æ®ä»¥â€cuhk-03.matâ€çš„ MAT æ–‡ä»¶æ ¼å¼å­˜å‚¨ï¼Œå«æœ‰ 1467 ä¸ªä¸åŒçš„äººç‰©ï¼Œç”± 5 å¯¹æ‘„åƒå¤´é‡‡é›†ã€‚</p><span id="more"></span><h2 id="æ•°æ®é›†ç®€ä»‹"><a href="#æ•°æ®é›†ç®€ä»‹" class="headerlink" title="æ•°æ®é›†ç®€ä»‹"></a>æ•°æ®é›†ç®€ä»‹</h2><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>CUHK-03<br>ã€€ã€€â”œâ”€â”€ â€œdetectedâ€â”€â”€ 5 x 1 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 843x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 440x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 77x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 58x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 49x10 cell<br>ã€€ã€€â”œâ”€â”€ â€œlabeledâ€â”€â”€ 5 x 1 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 843x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 440x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 77x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 58x10 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 49x10 cell<br>ã€€ã€€â”œâ”€â”€ â€œtestsetsâ€â”€â”€ 20 x 1 cell<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”œâ”€â”€ 100 x 2 double matrix</p><h3 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h3><p>ï¼ˆ1ï¼‰â€detectedâ€â€”â€” 5 x 1 cellsï¼Œç”±æœºå™¨æ ‡æ³¨ï¼Œæ¯ä¸ª cell ä¸­åŒ…å«ä¸€å¯¹æ‘„åƒå¤´ç»„é‡‡é›†çš„ç…§ç‰‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>ã€€ã€€æ¯ä¸ªæ‘„åƒå¤´ç»„ç”± M x 10 cells ç»„æˆï¼ŒM ä¸ºè¡Œäººç´¢å¼•ï¼Œå‰ 5 åˆ—å’Œå 5 åˆ—åˆ†åˆ«æ¥è‡ªåŒä¸€ç»„çš„ä¸åŒæ‘„åƒå¤´ã€‚<br>ã€€ã€€cell å†…æ¯ä¸ªå…ƒç´ ä¸ºä¸€å¹… H x W x 3 çš„è¡Œäººæ¡†å›¾åƒ(uint8 æ•°æ®ç±»å‹)ï¼Œä¸ªåˆ«å›¾åƒå¯èƒ½ç©ºç¼ºï¼Œä¸ºç©ºé›†ã€‚</p><ul><li>843x10 cell â€”â€”&gt; æ‘„åƒå¤´ç»„pair 1ã€‚</li><li>440x10 cell â€”â€”&gt; æ‘„åƒå¤´ç»„pair 2ã€‚</li><li>77x10 cell â€”â€”&gt; æ‘„åƒå¤´ç»„pair 3ã€‚</li><li>58x10 cell â€”â€”&gt; æ‘„åƒå¤´ç»„pair 4ã€‚</li><li>49x10 cell â€”â€”&gt; æ‘„åƒå¤´ç»„pair 5ã€‚</li></ul><p>ï¼ˆ2ï¼‰â€labeledâ€â€”â€” 5 x 1 cellsï¼Œè¡Œäººæ¡†ç”±äººå·¥æ ‡æ³¨ï¼Œæ ¼å¼å’Œå†…å®¹å’Œâ€detectedâ€ç›¸åŒã€‚</p><p>ï¼ˆ3ï¼‰â€testsetsâ€â€”â€” 20 x 1 cellsï¼Œæµ‹è¯•åè®®ï¼Œç”± 20 ä¸ª 100 x 2 double ç±»å‹çŸ©é˜µç»„æˆ (é‡å¤äºŒåæ¬¡)ã€‚<br>ã€€ã€€100 x 2 doubleï¼Œ100 è¡Œä»£è¡¨ 100 ä¸ªæµ‹è¯•æ ·æœ¬ï¼Œç¬¬ 1 åˆ—ä¸ºæ‘„åƒå¤´ pair ç´¢å¼•ï¼Œç¬¬ 2 åˆ—ä¸ºè¡Œäººç´¢å¼•ã€‚</p><h2 id="æµ‹è¯•åè®®"><a href="#æµ‹è¯•åè®®" class="headerlink" title="æµ‹è¯•åè®®"></a>æµ‹è¯•åè®®</h2><p>CUHK-03çš„æµ‹è¯•åè®®æœ‰ä¸¤ç§ã€‚</p><p>ã€€ã€€ç¬¬ä¸€ç§ä¸ºæ—§çš„ç‰ˆæœ¬(å‚è€ƒæ–‡çŒ® [1], å³æ•°æ®é›†çš„å‡ºå¤„)ï¼Œå‚è§æ•°æ®é›†ä¸­çš„â€™testsetsâ€™æµ‹è¯•åè®®ã€‚å…·ä½“åœ°è¯´ï¼Œå³éšæœºé€‰å‡º100ä¸ªè¡Œäººä½œä¸ºæµ‹è¯•é›†ï¼Œ1160 ä¸ªè¡Œäººä½œä¸ºè®­ç»ƒé›†ï¼Œ100 ä¸ªè¡Œäººä½œä¸ºéªŒè¯é›†ï¼ˆè¿™é‡Œæ€»å…± 1360 ä¸ªè¡Œäººè€Œä¸æ˜¯ 1467 ä¸ªï¼Œè¿™æ˜¯å› ä¸ºå®éªŒä¸­æ²¡æœ‰ç”¨åˆ°æ‘„åƒå¤´ç»„pair 4 å’Œ 5 çš„æ•°æ®ï¼‰ï¼Œé‡å¤äºŒåæ¬¡ã€‚è¿™ç§æµ‹è¯•åè®®æ˜¯ single-shot setting.</p><p>ã€€ã€€ç¬¬äºŒç§æµ‹è¯•åè®®(å‚è€ƒæ–‡çŒ® [2])ç±»ä¼¼äº Market-1501 ï¼Œå®ƒå°†æ•°æ®é›†åˆ†ä¸ºåŒ…å« 767 ä¸ªè¡Œäººçš„è®­ç»ƒé›†å’ŒåŒ…å« 700 ä¸ªè¡Œäººçš„æµ‹è¯•é›†ã€‚åœ¨æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©ä¸€å¼ å›¾åƒä½œä¸º queryï¼Œå‰©ä¸‹çš„ä½œä¸º galleryï¼Œè¿™æ ·çš„è¯ï¼Œå¯¹äºæ¯ä¸ªè¡Œäººï¼Œæœ‰å¤šä¸ª ground truth åœ¨ gallery ä¸­ã€‚ï¼ˆæ–°æµ‹è¯•åè®®å¯ä»¥å‚è€ƒ<a href="https://github.com/zhunzhong07/person-re-ranking">è¿™é‡Œ</a>ï¼‰</p><h2 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h2><ol><li><a href="https://drive.google.com/file/d/0BxJeH3p7Ln48djNVVVJtUXh6bXc/edit?usp=sharing">Google Drive</a></li><li><a href="http://pan.baidu.com/s/1mgklxSc">Baidu Disk</a> å¯†ç ï¼šrhjq</li></ol><h2 id="State-of-the-art"><a href="#State-of-the-art" class="headerlink" title="State-of-the-art"></a>State-of-the-art</h2><ul><li><a href="https://github.com/zhunzhong07/person-re-ranking/tree/master/CUHK03-NP">State of the art on the CUHK03</a></li></ul><h2 id="Citation"><a href="#Citation" class="headerlink" title="Citation"></a>Citation</h2><p>If you use this dataset, please kindly cite the following paper:<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">@inproceedings</span><span class="template-variable">&#123;li2014deepreid,</span></span><br><span class="line"><span class="template-variable">  title=&#123;DeepReID: Deep Filter Pairing Neural Network for Person Re-identification&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">  author=</span><span class="template-variable">&#123;Li, Wei and Zhao, Rui and Xiao, Tong and Wang, Xiaogang&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">  booktitle=</span><span class="template-variable">&#123;CVPR&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">  year=</span><span class="template-variable">&#123;2014&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>Li, W., Zhao, R., Xiao, T., &amp; Wang, X. (2014). Deepreid: Deep filter pairing neural network for person re-identification. In Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition (pp. 152-159).</li><li>Zhong Z, Zheng L, Cao D, et al. Re-ranking person re-identification with k-reciprocal encoding[C]//Computer Vision and Pattern Recognition (CVPR), 2017 IEEE Conference on. IEEE, 2017: 3652-3661.</li><li><a href="https://github.com/zhunzhong07/person-re-ranking">zhunzhong07/person-re-ranking</a></li><li><a href="https://blog.csdn.net/hyk_1996/article/details/79387053">https://blog.csdn.net/hyk_1996/article/details/79387053</a></li><li><a href="http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html">http://www.ee.cuhk.edu.hk/~xgwang/CUHK_identification.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CUHK03æ˜¯ç¬¬ä¸€ä¸ªè¶³ä»¥è¿›è¡Œæ·±åº¦å­¦ä¹ çš„å¤§è§„æ¨¡è¡Œäººé‡è¯†åˆ«æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†çš„å›¾åƒé‡‡é›†äºé¦™æ¸¯ä¸­æ–‡å¤§å­¦ï¼ˆCUHKï¼‰æ ¡å›­ã€‚æ•°æ®ä»¥â€cuhk-03.matâ€çš„ MAT æ–‡ä»¶æ ¼å¼å­˜å‚¨ï¼Œå«æœ‰ 1467 ä¸ªä¸åŒçš„äººç‰©ï¼Œç”± 5 å¯¹æ‘„åƒå¤´é‡‡é›†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è¡Œäººé‡è¯†åˆ«" scheme="http://blog.fcj.one/categories/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="Person Re-ID" scheme="http://blog.fcj.one/tags/Person-Re-ID/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦æ®‹å·®ç½‘ç»œResNetåˆæ¢</title>
    <link href="http://blog.fcj.one/resnet.html"/>
    <id>http://blog.fcj.one/resnet.html</id>
    <published>2018-07-07T16:45:11.000Z</published>
    <updated>2022-04-29T07:03:48.315Z</updated>
    
    <content type="html"><![CDATA[<p>å¾®è½¯äºšæ´²ç ”ç©¶é™¢ Kaiming He åšå£«åœ¨ 2015 å¹´å‡­å€Ÿæ·±åº¦æ®‹å·®ç½‘ç»œ Deep Residual Network (DRN) åœ¨ Imagenet æ¯”èµ›çš„è¯†åˆ«ã€æ£€æµ‹å’Œå®šä½ä¸‰ä¸ªä»»åŠ¡ã€ä»¥åŠ COCO æ¯”èµ›çš„æ£€æµ‹å’Œåˆ†å‰²ä»»åŠ¡ä¸Šéƒ½è·å¾—äº†å† å†›ã€‚è®ºæ–‡ã€Š<a href="https://arxiv.org/abs/1512.03385">Deep Residual Learning for Image Recognition</a>ã€‹è·å¾— 2016 CVPR best paperï¼ŒResNetå› æ­¤å£°åå¤§å™ªï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¼•å‘äº† deep network çš„é©å‘½ã€‚</p><span id="more"></span><h2 id="é—®é¢˜æå‡º"><a href="#é—®é¢˜æå‡º" class="headerlink" title="é—®é¢˜æå‡º"></a>é—®é¢˜æå‡º</h2><p>ã€€ã€€ç°æœ‰çš„æ·±åº¦å­¦ä¹ æ€æƒ³å¯èƒ½è®¤ä¸ºæ·±å±‚çš„ç½‘ç»œä¸€èˆ¬ä¼šæ¯”æµ…å±‚çš„ç½‘ç»œæ•ˆæœå¥½ï¼Œå¦‚æœè¦è¿›ä¸€æ­¥åœ°æå‡æ¨¡å‹çš„å‡†ç¡®ç‡ï¼Œæœ€ç›´æ¥çš„æ–¹æ³•å°±æ˜¯æŠŠç½‘ç»œè®¾è®¡å¾—è¶Šæ·±è¶Šå¥½ï¼Œè¿™æ ·æ¨¡å‹çš„å‡†ç¡®ç‡ä¹Ÿå°±ä¼šè¶Šæ¥è¶Šå‡†ç¡®ã€‚ä¾‹å¦‚åœ¨å›¾åƒå¤„ç†ä»»åŠ¡ä¸­ï¼ŒCNN èƒ½å¤Ÿæå– low / mid / high-level çš„ç‰¹å¾ï¼Œç½‘ç»œçš„å±‚æ•°è¶Šå¤šï¼Œæ„å‘³ç€èƒ½å¤Ÿæå–åˆ°ä¸åŒ level çš„ç‰¹å¾è¶Šä¸°å¯Œã€‚è¶Šæ·±çš„ç½‘ç»œæå–çš„ç‰¹å¾è¶ŠæŠ½è±¡ï¼Œè¶Šå…·æœ‰è¯­ä¹‰ä¿¡æ¯ã€‚<br>ã€€ã€€Kaiming åšå£«åœ¨è®ºæ–‡ä¸­åšäº†è¿™æ ·ä¸€ç»„å®éªŒï¼šåœ¨ CIFAR-10 æ•°æ®é›†ä¸Šåˆ†åˆ«è®­ç»ƒäº†ä¸€ä¸ª 20 å±‚å’Œ 56 å±‚çš„ plain network (å·ç§¯ã€æ± åŒ–ã€å…¨è¿æ¥æ„æˆçš„ä¼ ç»Ÿ CNN )ï¼Œå‘ç° 56 å±‚ç½‘ç»œçš„è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½å¤§äº 20 å±‚ç½‘ç»œçš„è®­ç»ƒè¯¯å·®ï¼Œå³ç½‘ç»œå±‚æ•°åŠ æ·±æ—¶ï¼Œæ¨¡å‹æ•ˆæœå´è¶Šæ¥è¶Šå·®ï¼Œåœ¨è®­ç»ƒé›†ä¸Šçš„å‡†ç¡®ç‡ç”šè‡³ä¸‹é™äº†ï¼Œå› æ­¤è¿™ä¸ªæ˜¾ç„¶ä¸æ˜¯ç”±äº overfitting å¯¼è‡´çš„ï¼Œå› ä¸º overfitting åº”è¯¥è¡¨ç°ä¸ºåœ¨è®­ç»ƒé›†ä¸Šæ•ˆæœæ›´å¥½æ‰å¯¹ã€‚<br><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/43257140.jpg" alt="1"></p><h2 id="åˆ†ææ€è€ƒ"><a href="#åˆ†ææ€è€ƒ" class="headerlink" title="åˆ†ææ€è€ƒ"></a>åˆ†ææ€è€ƒ</h2><p>1.ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç®€å•åœ°å¢åŠ å±‚æ•°ï¼Ÿ<br>ã€€ã€€ç¥ç»ç½‘ç»œçš„æ·±åº¦åŠ æ·±ï¼Œä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜å°±æ˜¯æ¢¯åº¦çš„æ¶ˆå¤±å’Œçˆ†ç‚¸ (gradients vanishing / gradients exploding)ï¼Œå®ƒä¼šå¯¼è‡´æ·±å±‚çš„ç½‘ç»œå‚æ•°å¾—ä¸åˆ°æœ‰æ•ˆçš„æ ¡æ­£ä¿¡å·æˆ–ä½¿å¾—è®­ç»ƒéš¾ä»¥æ”¶æ•›ï¼Œé€šè¿‡æ­£åˆ™åŒ–åˆå§‹åŒ–æˆ–è€…ä¸­é—´çš„æ­£åˆ™åŒ–å±‚ (Batch Normalization) æ–¹æ³•å¯ä»¥å¾—åˆ°æœ‰æ•ˆçš„ç¼“è§£ï¼Œä½†å¹¶ä¸èƒ½è§£å†³è¿™é‡Œæå‡ºçš„é—®é¢˜ã€‚</p><p>2.ä¸ºä»€ä¹ˆç½‘ç»œå±‚æ•°åŠ æ·±æ—¶ï¼Œç½‘ç»œçš„æ€§èƒ½åè€Œä¸‹é™ï¼Ÿ<br>ã€€ã€€æˆ‘ä»¬å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªæµ…å±‚ (å‡è®¾å±‚æ•°ä¸º n) çš„ç¥ç»ç½‘ç»œplain network A ï¼Œå…·æœ‰æ¯”è¾ƒç†æƒ³çš„è¾“å‡ºç»“æœï¼Œç°åœ¨åœ¨è¿™ä¸ªç¥ç»ç½‘ç»œçš„åè¾¹å†åŠ  m å±‚å¾—åˆ°ä¸€ä¸ªæ–°çš„ç¥ç»ç½‘ç»œ Bï¼Œæˆ‘ä»¬å‘ç°è¾“å‡ºç»“æœçš„å‡†ç¡®åº¦åè€Œä¸‹é™äº†ã€‚è¿™æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºå¦‚æœåè¾¹åŠ ä¸Šçš„é‚£ m å±‚æ˜¯å¯¹å‰ n å±‚çš„è¾“å‡ºç»“æœåšæ’ç­‰æ˜ å°„ (identity mapping)ï¼Œè‡³å°‘ B ä¹Ÿèƒ½å’Œ A çš„æ€§èƒ½æŒå¹³æ‰å¯¹ã€‚ä½†æ˜¯å®éªŒçš„ç»“æœè¡¨æ˜ç°åœ¨çš„æ±‚è§£æ–¹æ³•å¹¶ä¸èƒ½å¾—åˆ°ç†æƒ³çš„ç»“æœï¼Œè¿™è¯´æ˜ B ç½‘ç»œåœ¨å­¦ä¹ æ’ç­‰æ˜ å°„çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¼ ç»Ÿç½‘ç»œ (plain networks) å¾ˆéš¾å»å­¦ä¹ æ’ç­‰æ˜ å°„ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é€€åŒ– (degradation) ç°è±¡ã€‚</p><h2 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h2><p>ã€€ã€€å¦‚æœæ·±å±‚ç½‘ç»œçš„åé¢é‚£äº›å±‚æ˜¯æ’ç­‰æ˜ å°„ï¼Œé‚£ä¹ˆæ¨¡å‹å°±é€€åŒ–ä¸ºä¸€ä¸ªæµ…å±‚ç½‘ç»œï¼Œç°åœ¨è¦è§£å†³çš„å°±æ˜¯å¦‚ä½•å­¦ä¹ æ’ç­‰æ˜ å°„å‡½æ•°ã€‚ä½†æ˜¯ç›´æ¥è®©ä¸€äº›å±‚å»æ‹Ÿåˆä¸€ä¸ªæ½œåœ¨çš„æ’ç­‰æ˜ å°„å‡½æ•° H(x) = x æ˜¯å¾ˆå›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨æ®‹å·®å‡½æ•° H(x) = F(x) + xï¼ŒF(x) = H(x) - xï¼Œå¦‚æœèƒ½ä½¿ F(x) = 0ï¼ŒH(x) å°±æ˜¯æ’ç­‰æ˜ å°„ã€‚</p><p>ã€€ã€€ç½‘ç»œè¾“å…¥æ˜¯ xï¼Œç½‘ç»œçš„è¾“å‡ºæ˜¯ F(x)ï¼Œç½‘ç»œè¦æ‹Ÿåˆçš„ç›®æ ‡æ˜¯ H(x)ï¼Œä¼ ç»Ÿç½‘ç»œçš„è®­ç»ƒç›®æ ‡æ˜¯ F(x) = H(x)ã€‚</p><p>ã€€ã€€æ®‹å·®ç½‘ç»œï¼Œåˆ™æ˜¯æŠŠä¼ ç»Ÿç½‘ç»œçš„è¾“å‡º F(x) å¤„ç†ä¸€ä¸‹ï¼ŒåŠ ä¸Šè¾“å…¥ xï¼Œå˜æˆ F(x) + x ä½œä¸ºæœ€ç»ˆçš„è¾“å‡ºï¼Œè®­ç»ƒç›®æ ‡æ˜¯ F(x) = H(x) - xã€‚</p><p>ã€€ã€€ç°åœ¨æˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªæ·±å±‚çš„ç½‘ç»œï¼Œå®ƒå¯èƒ½è¿‡æ·±ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªæ€§èƒ½æœ€å¼ºçš„å®Œç¾ç½‘ç»œ Nï¼Œä¸å®ƒç›¸æ¯”æˆ‘ä»¬çš„ç½‘ç»œä¸­å¿…å®šæœ‰ä¸€äº›å±‚æ˜¯å¤šä½™çš„ï¼Œé‚£ä¹ˆè¿™äº›å¤šä½™çš„å±‚çš„è®­ç»ƒç›®æ ‡æ˜¯æ’ç­‰å˜æ¢ï¼Œåªæœ‰è¾¾åˆ°è¿™ä¸ªç›®æ ‡æˆ‘ä»¬çš„ç½‘ç»œæ€§èƒ½æ‰èƒ½è·Ÿ N ä¸€æ ·ã€‚å¯¹äºè¿™äº›éœ€è¦å®ç°æ’ç­‰å˜æ¢çš„å¤šä½™çš„å±‚ï¼Œè¦æ‹Ÿåˆçš„ç›®æ ‡å°±æˆäº† H(x) = xï¼Œåœ¨ä¼ ç»Ÿç½‘ç»œä¸­ï¼Œç½‘ç»œçš„è¾“å‡ºç›®æ ‡æ˜¯ F(x) = xï¼Œè¿™æ¯”è¾ƒå›°éš¾ï¼Œè€Œåœ¨æ®‹å·®ç½‘ç»œä¸­ï¼Œæ‹Ÿåˆçš„ç›®æ ‡æˆäº† x - x = 0ï¼Œç½‘ç»œçš„è¾“å‡ºç›®æ ‡ä¸º F(x) = 0ï¼Œè¿™æ¯”å‰è€…è¦å®¹æ˜“å¾—å¤šã€‚</p><p>ã€€ã€€<font color="#f00">è¿™é‡Œçš„ F(x) + x ä¸ºä»€ä¹ˆæ˜¯ x è€Œä¸æ˜¯å…¶ä»–å€¼ï¼Ÿ</font>å› ä¸ºå¤šä½™çš„å±‚çš„ç›®æ ‡æ˜¯æ’ç­‰å˜æ¢ï¼Œå³ F(x) + x = xï¼Œé‚£ F(x) çš„è®­ç»ƒç›®æ ‡å°±æ˜¯ 0ï¼Œæ¯”è¾ƒå®¹æ˜“ã€‚å¦‚æœæ˜¯å…¶ä»–ï¼Œæ¯”å¦‚ x/2 ï¼Œé‚£ F(x) çš„è®­ç»ƒç›®æ ‡å°±æ˜¯ x/2ï¼Œæ˜¯ä¸€ä¸ªé 0 çš„å€¼ï¼Œæ¯” 0 éš¾å®ç°ã€‚Kaiming åšå£«çš„å¦ä¸€ç¯‡æ–‡ç« [2]ä¸­æ¢è®¨äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯¹6ç§ç»“æ„çš„æ®‹å·®ç»“æ„è¿›è¡Œå®éªŒæ¯”è¾ƒè¯æ˜ F(x) åŠ ä¸Šè¾“å…¥å€¼ x çš„æ•ˆæœæœ€å¥½ã€‚</p><h3 id="Residual-Block"><a href="#Residual-Block" class="headerlink" title="Residual Block"></a>Residual Block</h3><div align="center"><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/19251915.jpg" alt="resnet" title="æ®‹å·®ç½‘ç»œç»“æ„å›¾"></div><p>åœ¨ä¸Šå›¾çš„æ®‹å·®ç½‘ç»œç»“æ„å›¾ä¸­ï¼Œé€šè¿‡â€œshortcut connections (æ·å¾„è¿æ¥)â€çš„æ–¹å¼ï¼Œç›´æ¥æŠŠè¾“å…¥xä¼ åˆ°è¾“å‡ºä½œä¸ºåˆå§‹ç»“æœï¼Œè¾“å‡ºç»“æœä¸º H(x) = F(x) + xï¼Œå½“ F(x) = 0 æ—¶ï¼Œé‚£ä¹ˆ H(x) = xï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ‰€æåˆ°çš„æ’ç­‰æ˜ å°„ã€‚äºæ˜¯ï¼ŒResNetç›¸å½“äºå°†å­¦ä¹ ç›®æ ‡æ”¹å˜äº†ï¼Œä¸å†æ˜¯å­¦ä¹ ä¸€ä¸ªå®Œæ•´çš„è¾“å‡ºï¼Œè€Œæ˜¯ç›®æ ‡å€¼H(X)å’Œxçš„å·®å€¼ï¼Œå³æ‰€è°“çš„æ®‹å·®F(x) = H(x) - xï¼Œå› æ­¤ï¼Œåé¢çš„è®­ç»ƒç›®æ ‡å°±æ˜¯è¦å°†æ®‹å·®ç»“æœé€¼è¿‘äº 0ï¼Œä½¿å¾—éšç€ç½‘ç»œåŠ æ·±ï¼Œå‡†ç¡®ç‡ä¸ä¸‹é™ã€‚</p><p>å®ƒæœ‰äºŒå±‚ï¼Œå¦‚ä¸‹è¡¨è¾¾å¼ï¼Œå…¶ä¸­ $\sigma$ ä»£è¡¨éçº¿æ€§å‡½æ•°ReLUï¼š<br>$$\mathcal{F} = W_2\sigma(W_1x)$$</p><p>ç„¶åé€šè¿‡ä¸€ä¸ª shortcut connectionï¼Œå’Œç¬¬ 2 ä¸ª ReLUï¼Œè·å¾—è¾“å‡º yï¼š<br>$${y}= \mathcal{F}({x}, {W_{i}}) + {x}.$$</p><p>F(x) ä¸ x ç›¸åŠ å°±æ˜¯é€å…ƒç´ ç›¸åŠ ï¼Œä½†æ˜¯å¦‚æœä¸¤è€…ç»´åº¦ä¸åŒï¼Œéœ€è¦ç»™ x æ‰§è¡Œä¸€ä¸ªçº¿æ€§å˜æ¢æ¥åŒ¹é…ç»´åº¦ï¼Œå¦‚ä¸‹å¼ï¼š</p><p>$${y}= \mathcal{F}({x}, {W_{i}}) + W_s{x}.$$</p><p>å®éªŒè¯æ˜ï¼Œè¿™ä¸ªæ®‹å·®å—å¾€å¾€éœ€è¦ä¸¤å±‚ä»¥ä¸Šï¼Œå•å•ä¸€å±‚çš„æ®‹å·®å— $y = W_1x + x$ å¹¶ä¸èƒ½èµ·åˆ°æå‡ä½œç”¨ã€‚</p><p>è¿™ç§æ®‹å·®è·³è·ƒå¼çš„ç»“æ„ï¼Œæ‰“ç ´äº†ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œ n - 1 å±‚çš„è¾“å‡ºåªèƒ½ç»™ n å±‚ä½œä¸ºè¾“å…¥çš„æƒ¯ä¾‹ï¼Œä½¿æŸä¸€å±‚çš„è¾“å‡ºå¯ä»¥ç›´æ¥è·¨è¿‡å‡ å±‚ä½œä¸ºåé¢æŸä¸€å±‚çš„è¾“å…¥ï¼Œå…¶æ„ä¹‰åœ¨äºä¸ºå åŠ å¤šå±‚ç½‘ç»œè€Œä½¿å¾—æ•´ä¸ªå­¦ä¹ æ¨¡å‹çš„é”™è¯¯ç‡ä¸é™åå‡çš„éš¾é¢˜æä¾›äº†æ–°çš„æ–¹å‘ (åæ¥çš„ DenseNet)ã€‚è‡³æ­¤ï¼Œç¥ç»ç½‘ç»œçš„å±‚æ•°å¯ä»¥è¶…è¶Šä¹‹å‰çš„çº¦æŸï¼Œè¾¾åˆ°å‡ åå±‚ã€ä¸Šç™¾å±‚ç”šè‡³åƒå±‚ï¼Œä¸ºé«˜çº§è¯­ä¹‰ç‰¹å¾æå–å’Œåˆ†ç±»æä¾›äº†å¯è¡Œæ€§ã€‚</p><h3 id="Model-Structure"><a href="#Model-Structure" class="headerlink" title="Model Structure"></a>Model Structure</h3><p>ã€€ã€€ä½œè€…ç”± VGG19 è®¾è®¡å‡ºäº† plain network å’Œ Resnet-34ï¼Œå¦‚ä¸‹å›¾ä¸­éƒ¨å’Œå³ä¾§ç½‘ç»œã€‚</p><div align="center"><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/54395655.jpg" alt=""></div><ol><li>å¯¹äºè¾“å‡º feature map å¤§å°ç›¸åŒçš„å±‚ï¼Œæœ‰ç›¸åŒæ•°é‡çš„ filtersï¼Œå³ channel æ•°ç›¸åŒï¼›</li><li>å½“ feature map å¤§å°å‡åŠæ—¶ï¼ˆpoolingï¼‰ï¼Œfiltersæ•°é‡ç¿»å€ã€‚</li><li>å¯¹äºæ®‹å·®ç½‘ç»œï¼Œç»´åº¦åŒ¹é…çš„shortcutè¿æ¥ä¸ºå®çº¿ï¼Œåä¹‹ä¸ºè™šçº¿ã€‚ç»´åº¦ä¸åŒ¹é…æ—¶ï¼ŒåŒç­‰æ˜ å°„æœ‰ä¸¤ç§å¯é€‰æ–¹æ¡ˆï¼š<ul><li>ç›´æ¥é€šè¿‡ zero padding æ¥å¢åŠ ç»´åº¦ï¼ˆchannelï¼‰ã€‚</li><li>ä¹˜ä»¥ W çŸ©é˜µæŠ•å½±åˆ°æ–°çš„ç©ºé—´ã€‚å®ç°æ˜¯ç”¨ 1 x 1 å·ç§¯å®ç°çš„ï¼Œç›´æ¥æ”¹å˜ 1 x 1 å·ç§¯çš„ filters æ•°ç›®ã€‚è¿™ç§ä¼šå¢åŠ å‚æ•°ã€‚</li></ul></li></ol><p>ã€€ã€€ä¸‹å›¾æ˜¯Resnetå¯¹åº”äºImageNetçš„ç»“æ„æ¡†æ¶ã€‚ä¸­æ‹¬å·ä¸­ä¸ºæ®‹å·®å—çš„å‚æ•°ï¼Œå¤šä¸ªæ®‹å·®å—è¿›è¡Œå †å ã€‚ä¸‹é‡‡æ ·ç”± stride ä¸º 2 çš„ conv3_1ã€conv4_1 å’Œ conv5_1 æ¥å®ç°ã€‚</p><p><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/99454670.jpg" alt=""></p><h3 id="Bottle-neck"><a href="#Bottle-neck" class="headerlink" title="Bottle neck"></a>Bottle neck</h3><p><div align="center"><img src="http://changingfond.oss-cn-hangzhou.aliyuncs.com/18-7-13/91444611.jpg" alt=""></div><br>ã€€ã€€è€ƒè™‘åˆ°æ—¶é—´èŠ±è´¹å’Œé™ä½å‚æ•°çš„æ•°ç›®ï¼Œå°†åŸæ¥çš„ Residual Block (æ®‹å·®å­¦ä¹ ç»“æ„) æ”¹ä¸º Bottleneck ç»“æ„ï¼Œå¦‚ä¸Šå›¾ã€‚é¦–ç«¯å’Œæœ«ç«¯çš„ 1 x 1 å·ç§¯ç”¨æ¥å‰Šå‡å’Œæ¢å¤ç»´åº¦ï¼Œç›¸æ¯”äºåŸæœ¬ç»“æ„ï¼Œåªæœ‰ä¸­é—´ 3 x 3 æˆä¸ºç“¶é¢ˆéƒ¨åˆ†ã€‚ä¸¤ç§ç»“æ„åˆ†åˆ«é’ˆå¯¹ ResNet-34 ï¼ˆå·¦å›¾ï¼‰å’Œ ResNet-50/ 101 / 152ï¼ˆå³å›¾ï¼‰ã€‚</p><p>ã€€ã€€å·¦å›¾æ˜¯ä¸¤ä¸ª 3 x 3 x 256çš„å·ç§¯ï¼Œå‚æ•°æ•°ç›®: 3 x 3 x 256 x 256 x 2 = 1179648ï¼›å³å›¾æ˜¯ç¬¬ä¸€ä¸ª 1 x 1 çš„å·ç§¯æŠŠ 256 ç»´é€šé“é™åˆ° 64 ç»´ï¼Œç„¶ååœ¨æœ€åé€šè¿‡ 1 x 1 å·ç§¯æ¢å¤ï¼Œæ•´ä½“ä¸Šç”¨çš„å‚æ•°æ•°ç›®ï¼š1 x 1 x 256 x 64 + 3 x 3 x 64 x 64 + 1 x 1 x 64 x 256 = 69632ï¼Œå³å›¾çš„å‚æ•°é‡æ¯”å·¦å›¾å‡å°‘äº† 16.94 å€ã€‚å¯¹äºå¸¸è§„çš„ResNetï¼Œå¯ä»¥ç”¨äº34å±‚æˆ–è€…æ›´å°‘çš„ç½‘ç»œä¸­ï¼ˆå·¦å›¾ï¼‰ï¼Œå¯¹äºæ›´æ·±çš„ç½‘ç»œï¼ˆå¦‚50 / 101 / 152å±‚ï¼‰ï¼Œåˆ™ä½¿ç”¨å³å›¾ï¼Œå…¶ç›®çš„æ˜¯å‡å°‘è®¡ç®—å’Œå‚æ•°é‡ã€‚</p><h2 id="TensorFlowå®ç°"><a href="#TensorFlowå®ç°" class="headerlink" title="TensorFlowå®ç°"></a>TensorFlowå®ç°</h2><ol><li><a href="https://github.com/KaimingHe/deep-residual-networks">KaimingHe/deep-residual-networks</a></li><li><a href="https://github.com/wenxinxu/resnet-in-tensorflow">wenxinxu/resnet-in-tensorflow</a></li><li><a href="https://github.com/tensorpack/tensorpack/tree/master/examples/ResNet">tensorpack/examples/ResNet</a></li><li><a href="https://github.com/ry/tensorflow-resnet">ry/tensorflow-resnet</a></li></ol><h2 id="Pythonç¤ºä¾‹"><a href="#Pythonç¤ºä¾‹" class="headerlink" title="Pythonç¤ºä¾‹"></a>Pythonç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">residual_block</span>(<span class="params">x, out_channels, down_sample, projection=<span class="literal">False</span></span>):</span><br><span class="line">    in_channels = x.get_shape().as_list()[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">if</span> down_sample:</span><br><span class="line">        x = max_pool(x)</span><br><span class="line"></span><br><span class="line">    output = conv2d_with_batch_norm(x, [<span class="number">3</span>, <span class="number">3</span>, in_channels, out_channels], <span class="number">1</span>)</span><br><span class="line">    output = conv2d_with_batch_norm(output, [<span class="number">3</span>, <span class="number">3</span>, out_channels, out_channels], <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> in_channels != out_channels:</span><br><span class="line">        <span class="keyword">if</span> projection:</span><br><span class="line">            <span class="comment"># projection shortcut</span></span><br><span class="line">            input_ = conv2d(x, [<span class="number">1</span>, <span class="number">1</span>, in_channels, out_channels], <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># zero-padding</span></span><br><span class="line">            input_ = tf.pad(x, [[<span class="number">0</span>,<span class="number">0</span>], [<span class="number">0</span>,<span class="number">0</span>], [<span class="number">0</span>,<span class="number">0</span>], [<span class="number">0</span>, out_channels - in_channels]])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">        input_ = x</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output + input_</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">residual_group</span>(<span class="params">name,x,num_block,out_channels</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> num_block&gt;=<span class="number">1</span>,<span class="string">&#x27;num_block must greater than 1&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> tf.variable_scope(<span class="string">&#x27;%s_head&#x27;</span>%name):</span><br><span class="line">        output = residual_block(x, out_channels, <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (num_block-<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">with</span> tf.variable_scope(<span class="string">&#x27;%s_%d&#x27;</span> % (name,i+<span class="number">1</span>)):</span><br><span class="line">            output = residual_block(output,out_channels, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li>He, K., Zhang, X., Ren, S., &amp; Sun, J. (2016). Deep Residual Learning for Image Recognition. IEEE Conference on Computer Vision and Pattern Recognition (pp.770-778). IEEE Computer Society.</li><li><a href="https://www.jianshu.com/p/e58437f39f65">https://www.jianshu.com/p/e58437f39f65</a></li><li><a href="https://zhuanlan.zhihu.com/p/32085715">https://zhuanlan.zhihu.com/p/32085715</a></li><li><a href="https://my.oschina.net/u/876354/blog/1622896">https://my.oschina.net/u/876354/blog/1622896</a></li><li><a href="https://blog.csdn.net/wspba/article/details/57074389">https://blog.csdn.net/wspba/article/details/57074389</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾®è½¯äºšæ´²ç ”ç©¶é™¢ Kaiming He åšå£«åœ¨ 2015 å¹´å‡­å€Ÿæ·±åº¦æ®‹å·®ç½‘ç»œ Deep Residual Network (DRN) åœ¨ Imagenet æ¯”èµ›çš„è¯†åˆ«ã€æ£€æµ‹å’Œå®šä½ä¸‰ä¸ªä»»åŠ¡ã€ä»¥åŠ COCO æ¯”èµ›çš„æ£€æµ‹å’Œåˆ†å‰²ä»»åŠ¡ä¸Šéƒ½è·å¾—äº†å† å†›ã€‚è®ºæ–‡ã€Š&lt;a href=&quot;https://arxiv.org/abs/1512.03385&quot;&gt;Deep Residual Learning for Image Recognition&lt;/a&gt;ã€‹è·å¾— 2016 CVPR best paperï¼ŒResNetå› æ­¤å£°åå¤§å™ªï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¼•å‘äº† deep network çš„é©å‘½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="ResNet" scheme="http://blog.fcj.one/tags/ResNet/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 16.04å®‰è£…NCCL 2</title>
    <link href="http://blog.fcj.one/ubuntu-nccl2.html"/>
    <id>http://blog.fcj.one/ubuntu-nccl2.html</id>
    <published>2018-06-29T10:21:14.000Z</published>
    <updated>2022-04-29T07:03:48.316Z</updated>
    
    <content type="html"><![CDATA[<p>NCCLæ˜¯Nvidia Collective multi-GPU Communication Libraryçš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ç°å¤šGPUçš„collective communicationé€šä¿¡ï¼ˆall-gather, reduce, broadcastï¼‰åº“ï¼ŒNvidiaåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä»¥åœ¨PCIeã€Nvlinkã€InfiniBandä¸Šå®ç°è¾ƒé«˜çš„é€šä¿¡é€Ÿåº¦ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨Ubuntu 16.04 LTSä¸Šå®‰è£…NCCL 2åº“ã€‚</p><span id="more"></span><h2 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h2><p>ç¡®ä¿æ‚¨çš„ç¯å¢ƒç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š</p><ul><li>glibc 2.19æˆ–æ›´é«˜</li><li>CUDA 8.0æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>NCCLæ”¯æŒæ‰€æœ‰å…·æœ‰3.0æˆ–æ›´é«˜è®¡ç®—èƒ½åŠ›çš„CUDAè®¾å¤‡ã€‚<a href="https://developer.nvidia.com/cuda-gpus">å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰NVIDIA GPUçš„è®¡ç®—èƒ½åŠ›</a>?</li></ul><h2 id="å®‰è£…NCCL"><a href="#å®‰è£…NCCL" class="headerlink" title="å®‰è£…NCCL"></a>å®‰è£…NCCL</h2><p>ä¸ºäº†ä¸‹è½½NCCLï¼Œè¯·ç¡®ä¿æ‚¨å·²æ³¨å†ŒNVIDIAå¼€å‘è€…è´¦å·ã€‚</p><ol><li>æ‰“å¼€<a href="https://developer.nvidia.com/nccl">NVIDIA NCCLä¸»é¡µ</a>ã€‚</li><li>ç‚¹å‡»ä¸‹è½½ã€‚</li><li>å®Œæˆç®€çŸ­è°ƒæŸ¥é—®å·å¹¶ç‚¹å‡»æäº¤ã€‚</li><li>æ¥å—æ¡æ¬¾å’Œæ¡ä»¶ã€‚æŸ¥çœ‹NCCLæ˜¾ç¤ºçš„å¯ç”¨ä¸‹è½½ç‰ˆæœ¬åˆ—è¡¨ã€‚</li><li>é€‰æ‹©æ‚¨æƒ³è¦å®‰è£…çš„NCCLç‰ˆæœ¬ã€‚æ˜¾ç¤ºå¯ç”¨ç‰ˆæœ¬åˆ—è¡¨ã€‚æ ¹æ®æ‚¨ä½¿ç”¨çš„Linuxå‘è¡Œç‰ˆä»¥é€‰æ‹©æ­£ç¡®çš„è½¯ä»¶åŒ…ã€‚</li></ol><h3 id="Ubuntu-14-04-LTSå’ŒUbuntu-16-04-LTS"><a href="#Ubuntu-14-04-LTSå’ŒUbuntu-16-04-LTS" class="headerlink" title="Ubuntu 14.04 LTSå’ŒUbuntu 16.04 LTS"></a>Ubuntu 14.04 LTSå’ŒUbuntu 16.04 LTS</h3><p>åœ¨Ubuntuä¸Šå®‰è£…NCCLéœ€è¦æ‚¨é¦–å…ˆå‘åŒ…å«NCCLè½¯ä»¶åŒ…çš„APTç³»ç»Ÿæ·»åŠ å­˜å‚¨åº“ï¼Œç„¶åé€šè¿‡APT å®‰è£…NCCLè½¯ä»¶åŒ…ï¼Œæœ‰ä¸¤ä¸ªå­˜å‚¨åº“å¯ç”¨â€”â€”æœ¬åœ°å­˜å‚¨åº“å’Œç½‘ç»œå­˜å‚¨åº“ã€‚å»ºè®®é€‰æ‹©æ›´æ–°ç‰ˆæœ¬ä»¥ä¾¿åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶è½»æ¾å‡çº§ã€‚</p><ol><li><p>å®‰è£…å­˜å‚¨åº“<br>å¯¹äºæœ¬åœ°NCCLå­˜å‚¨åº“ï¼š<code>sudo dpkg -i nccl-repo-&lt;version&gt;.deb</code><br>å¯¹äºç½‘ç»œå­˜å‚¨åº“ï¼š<code>sudo dpkg -i nvidia-machine-learning-repo-&lt;version&gt;.deb</code></p></li><li><p>æ›´æ–°APTæ•°æ®åº“ï¼š<code>sudo apt update</code></p></li><li><p>åˆ©ç”¨APTå®‰è£…libnccl2ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨éœ€è¦ä½¿ç”¨NCCLç¼–è¯‘åº”ç”¨ç¨‹åºï¼Œåˆ™åŒæ—¶å®‰è£… libnccl-devåŒ…ã€‚<br>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ç½‘ç»œå­˜å‚¨åº“ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚<br>ã€€ã€€<code>sudo apt install libnccl2 libnccl-dev</code><br>å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™è¾ƒæ—§ç‰ˆæœ¬çš„CUDAï¼Œè¯·æŒ‡å®šç‰¹å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š<br>ã€€ã€€<code>sudo apt-get install libnccl2=2.0.0-1+cuda8.0 libnccl-dev=2.0.0-1+cuda8.0</code><br>è¯·å‚é˜…<a href="https://developer.nvidia.com/nccl">ä¸‹è½½é¡µé¢</a>ä»¥äº†è§£ç¡®åˆ‡çš„è½¯ä»¶åŒ…ç‰ˆæœ¬ã€‚</p></li></ol><h3 id="å…¶ä»–æ–¹å¼"><a href="#å…¶ä»–æ–¹å¼" class="headerlink" title="å…¶ä»–æ–¹å¼"></a>å…¶ä»–æ–¹å¼</h3><ol><li>ä¸‹è½½taræ–‡ä»¶åŒ…ï¼Œå°†NCCLåŒ…è§£å‹åˆ°æ‚¨çš„ä¸»ç›®å½•æˆ–<code>/usr/local</code><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/usr/local</span></span><br><span class="line">tar xvf nccl-&lt;<span class="keyword">version</span>&gt;<span class="string">.txz</span></span><br></pre></td></tr></table></figure></li><li>å½“ç¼–è¯‘åº”ç”¨ç¨‹åºæ—¶ï¼ŒæŒ‡å®šåˆ°å®‰è£…ç›®å½•è·¯å¾„ NCCLï¼Œä¾‹å¦‚<code>/usr/local/nccl-&lt;ç‰ˆæœ¬&gt;/</code>ã€‚</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.nvidia.com/deeplearning/sdk/nccl-install-guide/index.html">NCCL Installation Guide :: Deep Learning SDK Documentation</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NCCLæ˜¯Nvidia Collective multi-GPU Communication Libraryçš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ç°å¤šGPUçš„collective communicationé€šä¿¡ï¼ˆall-gather, reduce, broadcastï¼‰åº“ï¼ŒNvidiaåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä»¥åœ¨PCIeã€Nvlinkã€InfiniBandä¸Šå®ç°è¾ƒé«˜çš„é€šä¿¡é€Ÿåº¦ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨Ubuntu 16.04 LTSä¸Šå®‰è£…NCCL 2åº“ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 16.04å®‰è£…é…ç½®OpenCV 2.4.9</title>
    <link href="http://blog.fcj.one/ubuntu-opencv.html"/>
    <id>http://blog.fcj.one/ubuntu-opencv.html</id>
    <published>2018-05-11T12:30:12.000Z</published>
    <updated>2022-04-29T07:03:48.316Z</updated>
    
    <content type="html"><![CDATA[<p>Ubuntu 16.04å®‰è£…é…ç½®OpenCV 2.4.9</p><span id="more"></span><h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><ul><li>Ubuntu 16.04</li><li>Intel(R) Core(TM) i7-6800K CPU @ 3.40GHz</li><li>opencv-2.4.9</li></ul><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install build-essential</span><br><span class="line">sudo apt-<span class="built_in">get</span> install libgtk2<span class="number">.0</span>-<span class="built_in">dev</span> libavcodec-<span class="built_in">dev</span> libavformat-<span class="built_in">dev</span> libtiff4-<span class="built_in">dev</span> libswscale-<span class="built_in">dev</span> libjasper-<span class="built_in">dev</span>  # å›¾ç‰‡è§†é¢‘æ”¯æŒ</span><br><span class="line">sudo apt-<span class="built_in">get</span> install cmake       # å®‰è£…cmake</span><br><span class="line">sudo apt-<span class="built_in">get</span> install pkg-config  # æä¾›ä»æºä»£ç ä¸­ç¼–è¯‘è½¯ä»¶æ—¶æŸ¥è¯¢å·²å®‰è£…çš„åº“æ—¶ä½¿ç”¨çš„ç»Ÿä¸€æ¥å£</span><br></pre></td></tr></table></figure><h2 id="ä¸‹è½½å®‰è£…åŒ…"><a href="#ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å®‰è£…åŒ…"></a>ä¸‹è½½å®‰è£…åŒ…</h2><p>ã€€ã€€ä¸‹è½½<a href="https://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.9/opencv-2.4.9.zip/download">opencv2.4.9</a>å®‰è£…åŒ…è‡³ä½ çš„è·¯å¾„<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">unzip opencv-2.4.9.zip</span><br><span class="line">cd opencv-2.4.9</span><br><span class="line">mkdir release</span><br><span class="line">cd release</span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™è¡Œcmakeå‚æ•°ç½‘ä¸Šæœ‰å¤šç§é€‰æ‹©ï¼Œæ­¤å¤„é€‰æ‹©ä¸åŒ…å«CUDAå’ŒEIGENï¼Œé¿å…åç»­ç¼–è¯‘å‡ºé”™ã€‚é»˜è®¤å®‰è£…è‡³/usr/localç›®å½•ä¸‹</span></span><br><span class="line">cmake -D <span class="attribute">CMAKE_BUILD_TYPE</span>=RELEASE -D <span class="attribute">CMAKE_INSTALL_PREFIX</span>=/usr/local -D <span class="attribute">WITH_CUDA</span>=OFF -D <span class="attribute">WITH_OPENMP</span>=ON -D <span class="attribute">WITH_QT</span>=ON -D <span class="attribute">WITH_EIGEN</span>=OFF <span class="built_in">..</span></span><br></pre></td></tr></table></figure></p><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">make</span> -j4</span><br><span class="line">sudo <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤è‡³ç›®å½•ï¼š/usr/local/libï¼Œå¯è‡ªå®šä¹‰å®‰è£…ç›®å½•ï¼ŒåŠ å‚æ•°--prefix=&quot;/usr/local/openmpi&quot;</span></span><br><span class="line">sudo vi <span class="regexp">/etc/</span>ld.so.conf.d/opencv.conf</span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line"><span class="regexp">/usr/</span>local/lib</span><br><span class="line">sudo ldconfig -v</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> opencv-2.4.9/samples/c</span><br><span class="line">./build_all.sh</span><br><span class="line">./find_obj</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/sinat_17196995/article/details/53466524">Ubuntu16.04 caffe Opencv2.4.13 GPUç¯å¢ƒé…ç½®</a></li><li><a href="https://blog.csdn.net/surgewong/article/details/39078251">Opencv 2.4.9åœ¨Ubuntuä¸‹çš„é…ç½®ä¸å®‰è£…</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Ubuntu 16.04å®‰è£…é…ç½®OpenCV 2.4.9&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
  </entry>
  
  <entry>
    <title>Windows 10å®‰è£…Cuda9ã€Cudnn7é…ç½®Tensorflow 1.8ç¯å¢ƒ</title>
    <link href="http://blog.fcj.one/win10-tf.html"/>
    <id>http://blog.fcj.one/win10-tf.html</id>
    <published>2018-05-10T19:27:13.000Z</published>
    <updated>2022-04-29T07:03:48.317Z</updated>
    
    <content type="html"><![CDATA[<p>Windows 10å®‰è£…Cuda9.0ã€Cudnn7.0ï¼Œé…ç½®Tensorflow r1.8ç¯å¢ƒæ­¥éª¤å…¨è®°å½•ã€‚<br>å½“å‰å®‰è£…æ—¶é—´ï¼š2018å¹´5æœˆ10æ—¥</p><span id="more"></span><h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><ul><li>Windows 10</li><li>Intel(R) Core(TM) i7-6800K CPU @ 3.40GHz</li><li>2 * NVIDIA GTX 1080 Ti</li><li>Tensorflow r1.8</li><li>CUDA 9.0ã€Cudnn 7.0</li><li>Python 3.6</li></ul><h2 id="å®‰è£…CUDA"><a href="#å®‰è£…CUDA" class="headerlink" title="å®‰è£…CUDA"></a>å®‰è£…CUDA</h2><p>ã€€ã€€ä¸‹è½½CUDAå¯¹åº”ç‰ˆæœ¬ï¼š<a href="https://developer.nvidia.com/cuda-toolkit-archiveï¼Œé€‰æ‹©**CUDA">https://developer.nvidia.com/cuda-toolkit-archiveï¼Œé€‰æ‹©**CUDA</a> Toolkit 9.0 (Sept 2017)-&gt;Windows-&gt;x86_64-&gt;10-&gt;exe(local)<br>ã€€ã€€ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€ç›´æ¥ç‚¹å‡»nextä¸‹ä¸€æ­¥è¿›è¡Œå®‰è£…ï¼Œå®‰è£…è·¯å¾„é»˜è®¤ä¸ºCç›˜</p><h2 id="é…ç½®Cudaç¯å¢ƒå˜é‡"><a href="#é…ç½®Cudaç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®Cudaç¯å¢ƒå˜é‡"></a>é…ç½®Cudaç¯å¢ƒå˜é‡</h2><ol><li>å³å‡»â€œæˆ‘çš„ç”µè„‘â€ï¼Œé€‰æ‹©â€œå±æ€§â€ï¼Œç‚¹å‡»â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€</li><li>é€‰æ‹©â€œç¯å¢ƒå˜é‡â€ï¼Œåœ¨â€œç³»ç»Ÿå˜é‡â€æ¡†ä¸­æ‰¾åˆ°â€œpathâ€ï¼Œç‚¹å‡»é€‰ä¸­ï¼Œå¹¶ç‚¹å‡»â€œç¼–è¾‘â€æŒ‰é’®</li><li>ç‚¹å‡»â€œæ–°å»ºâ€æŒ‰é’®ï¼Œæ·»åŠ ä»¥ä¸‹è·¯å¾„<br>ã€€ã€€<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0\bin</code><br>ã€€ã€€<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0\libnvvp</code><br>ã€€ã€€<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0\lib\x64</code><br>ã€€ã€€<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0\extras\CUPTI\libx64</code></li><li>å‘½ä»¤è¡Œè¾“å…¥<code>nccv -V</code>æ£€æŸ¥æ˜¯å¦æˆåŠŸ</li></ol><h2 id="å®‰è£…Cudnn"><a href="#å®‰è£…Cudnn" class="headerlink" title="å®‰è£…Cudnn"></a>å®‰è£…Cudnn</h2><p>ã€€ã€€è¿›å…¥ <a href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a> ï¼Œé€‰æ‹©å¯¹åº”çš„7.0ç‰ˆæœ¬ä¸‹è½½å³å¯ã€‚<br>ã€€ã€€è§£å‹å‹ç¼©åŒ…ï¼ŒæŠŠå‹ç¼©åŒ…ä¸­bin,include,libä¸­çš„æ–‡ä»¶åˆ†åˆ«æ‹·è´åˆ°C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0ç›®å½•çš„å¯¹åº”ç›®å½•ä¸‹ã€‚</p><h2 id="å®‰è£…TensorFlow-gpu"><a href="#å®‰è£…TensorFlow-gpu" class="headerlink" title="å®‰è£…TensorFlow-gpu"></a>å®‰è£…TensorFlow-gpu</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> tensorflow-gpu</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/zw__chen/article/details/79374467">win10+cuda9.0+cuDNN 7.0+Tensorflow1.5ï¼ˆGPUï¼‰å®‰è£…</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Windows 10å®‰è£…Cuda9.0ã€Cudnn7.0ï¼Œé…ç½®Tensorflow r1.8ç¯å¢ƒæ­¥éª¤å…¨è®°å½•ã€‚&lt;br&gt;å½“å‰å®‰è£…æ—¶é—´ï¼š2018å¹´5æœˆ10æ—¥&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
      <category term="Cuda" scheme="http://blog.fcj.one/tags/Cuda/"/>
    
      <category term="Windows" scheme="http://blog.fcj.one/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 16.04å®‰è£…OpenMPI</title>
    <link href="http://blog.fcj.one/ubuntu-openmpi.html"/>
    <id>http://blog.fcj.one/ubuntu-openmpi.html</id>
    <published>2018-05-08T20:08:12.000Z</published>
    <updated>2018-05-10T21:19:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>Ubuntu 16.04å®‰è£…OpenMPIç¯å¢ƒ</p><span id="more"></span><h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><ul><li>Ubuntu 16.04</li><li>Intel(R) Core(TM) i7-6800K CPU @ 3.40GHz</li><li>openmpi-1.8.0</li></ul><h2 id="ä¸‹è½½å®‰è£…åŒ…"><a href="#ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å®‰è£…åŒ…"></a>ä¸‹è½½å®‰è£…åŒ…</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="regexp">//</span>www.open-mpi.org<span class="regexp">/software/</span>ompi<span class="regexp">/v1.8/</span>downloads/openmpi-<span class="number">1.8</span>.<span class="number">0</span>.tar.gz</span><br></pre></td></tr></table></figure><h2 id="è§£å‹ç¼©"><a href="#è§£å‹ç¼©" class="headerlink" title="è§£å‹ç¼©"></a>è§£å‹ç¼©</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> zxvf openmpi-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>.tar.gz</span><br><span class="line"><span class="attribute">cd</span> openmpi-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®å®‰è£…æ–‡ä»¶"><a href="#é…ç½®å®‰è£…æ–‡ä»¶" class="headerlink" title="é…ç½®å®‰è£…æ–‡ä»¶"></a>é…ç½®å®‰è£…æ–‡ä»¶</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤è‡³ç›®å½•ï¼š/usr/local/libï¼Œå¯è‡ªå®šä¹‰å®‰è£…ç›®å½•ï¼ŒåŠ å‚æ•°--prefix=&quot;/usr/local/openmpi&quot;</span></span><br><span class="line">.<span class="regexp">/configure --prefix=&quot;/u</span>sr<span class="regexp">/local/</span>openmpi<span class="string">&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…openMPI"><a href="#å®‰è£…openMPI" class="headerlink" title="å®‰è£…openMPI"></a>å®‰è£…openMPI</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">make</span></span><br><span class="line">sudo <span class="keyword">make</span> <span class="keyword">all</span> install</span><br></pre></td></tr></table></figure><h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/.bashrc</span><br><span class="line"><span class="comment"># åœ¨.bashrcæ–‡ä»¶çš„æœ€ååŠ ä¸Šä¸‹é¢è¿™è¡Œ</span></span><br><span class="line">export PATH=<span class="regexp">/usr/</span>local<span class="regexp">/openmpi/</span>bin<span class="variable">$&#123;PATH:+:$&#123;PATH&#125;</span>&#125;</span><br><span class="line">export LD_LIBRARY_PATH=<span class="regexp">/usr/</span>local<span class="regexp">/openmpi/</span>lib<span class="variable">$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> openmpi-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>/examples</span><br><span class="line"><span class="attribute">make</span></span><br><span class="line"><span class="attribute">mpirun</span> -np <span class="number">4</span> hello_c</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Ubuntu 16.04å®‰è£…OpenMPIç¯å¢ƒ&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯äººç”Ÿ" scheme="http://blog.fcj.one/categories/%E6%8A%80%E6%9C%AF%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="Linux" scheme="http://blog.fcj.one/tags/Linux/"/>
    
      <category term="Deep Learning" scheme="http://blog.fcj.one/tags/Deep-Learning/"/>
    
  </entry>
  
</feed>
